import{_ as n,o as s,c as a,a as p}from"./app.a3ab45a4.js";const t={},e=p(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u8BFE\u524D\u56DE\u987E<span class="token operator">:</span>
  <span class="token number">1.</span>Arrays<span class="token operator">:</span>\u6570\u7EC4\u5DE5\u5177\u7C7B
    a<span class="token punctuation">.</span>\u7279\u70B9<span class="token operator">:</span>\u6784\u9020\u79C1\u6709<span class="token punctuation">,</span>\u65B9\u6CD5\u662F\u9759\u6001\u7684
    b<span class="token punctuation">.</span>\u8BBF\u95EE<span class="token operator">:</span>\u7C7B\u540D\u76F4\u63A5\u8C03\u7528
    c<span class="token punctuation">.</span>\u65B9\u6CD5<span class="token operator">:</span>
      toString<span class="token operator">:</span>\u6309\u7167\u6307\u5B9A\u683C\u5F0F\u6253\u5370\u6570\u7EC4<span class="token operator">-&gt;</span><span class="token punctuation">[</span>\u5143\u7D20<span class="token number">1</span><span class="token punctuation">,</span> \u5143\u7D20<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
      sort<span class="token operator">:</span>\u6392\u5E8F
      binarySearch<span class="token operator">:</span>\u4E8C\u5206\u67E5\u627E
      copyOf<span class="token operator">:</span>\u6570\u7EC4\u6269\u5BB9<span class="token operator">-&gt;</span>\u5E95\u5C42\u539F\u7406<span class="token punctuation">,</span>\u6570\u7EC4\u590D\u5236
  <span class="token number">2.</span>\u5305\u88C5\u7C7B<span class="token operator">:</span>\u57FA\u672C\u7C7B\u578B\u5BF9\u5E94\u7684\u7C7B
    a<span class="token punctuation">.</span>\u88C5\u7BB1<span class="token operator">:</span>\u5C06\u57FA\u672C\u7C7B\u578B\u8F6C\u6210\u5305\u88C5\u7C7B
          \u6784\u9020<span class="token operator">:</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span>
               <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token operator">-&gt;</span>s\u5FC5\u987B\u662F\u6570\u5B57\u683C\u5F0F
          \u65B9\u6CD5<span class="token operator">:</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span>
              <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span>
              
    b<span class="token punctuation">.</span>\u62C6\u7BB1<span class="token operator">:</span>
      <span class="token keyword">int</span> <span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    c<span class="token punctuation">.</span>\u57FA\u672C\u7C7B\u578B\u548C<span class="token class-name">String</span>\u4E4B\u95F4\u7684\u8F6C\u6362
      \u57FA\u672C\u7C7B\u578B\u8F6C\u6210<span class="token class-name">String</span><span class="token operator">:</span>
              <span class="token operator">+</span>
              <span class="token class-name">String</span>\u4E2D\u7684\u65B9\u6CD5valueOf
      <span class="token class-name">String</span>\u8F6C\u6210\u57FA\u672C\u7C7B\u578B<span class="token operator">:</span>
             parsexxx
  <span class="token number">3.</span>\u591A\u7EBF\u7A0B<span class="token operator">:</span>
    a<span class="token punctuation">.</span>\u8FDB\u7A0B<span class="token operator">:</span>\u8FDB\u5165\u5230\u5185\u5B58\u6267\u884C\u7684\u5E94\u7528\u7A0B\u5E8F
    b<span class="token punctuation">.</span>\u7EBF\u7A0B<span class="token operator">:</span>\u8FDB\u7A0B\u4E2D\u7684\u6267\u884C\u5355\u5143
    c<span class="token punctuation">.</span>cpu\u8C03\u5EA6<span class="token operator">:</span>
      \u5206\u65F6\u8C03\u5EA6
      \u62A2\u5360\u5F0F\u8C03\u5EA6<span class="token operator">:</span>java \u8C01\u7684\u4F18\u5148\u7EA7\u9AD8<span class="token punctuation">,</span>\u8C01\u62A2\u5230\u7684\u51E0\u7387\u8D8A\u5927
    d<span class="token punctuation">.</span>\u4E3B\u7EBF\u7A0B<span class="token operator">:</span>\u5728CPU\u548C\u5185\u5B58\u4E4B\u95F4\u4E13\u95E8\u4E3Amain\u65B9\u6CD5\u5F00\u8F9F\u7684\u901A\u9053
    e<span class="token punctuation">.</span>\u5B9E\u73B0\u591A\u7EBF\u7A0B\u65B9\u5F0F<span class="token number">1</span><span class="token operator">:</span><span class="token keyword">extends</span> <span class="token class-name">Thread</span>
      \u5B9A\u4E49\u4E00\u4E2A\u7C7B<span class="token punctuation">,</span>\u7EE7\u627F<span class="token class-name">Thread</span>
      \u91CD\u5199<span class="token class-name">Thread</span>\u4E2D\u7684run\u65B9\u6CD5<span class="token punctuation">,</span>\u8BBE\u7F6E\u7EBF\u7A0B\u4EFB\u52A1
      \u521B\u5EFA\u7EBF\u7A0B\u7C7B\u5BF9\u8C61<span class="token punctuation">,</span>\u8C03\u7528<span class="token class-name">Thread</span>\u4E2D\u7684start\u65B9\u6CD5<span class="token punctuation">,</span>\u5F00\u542F\u7EBF\u7A0B<span class="token punctuation">,</span>jvm\u81EA\u52A8\u6267\u884Crun\u65B9\u6CD5
    f<span class="token punctuation">.</span>\u5B9E\u73B0\u591A\u7EBF\u7A0B\u65B9\u5F0F<span class="token number">2</span><span class="token operator">:</span>\u5B9E\u73B0<span class="token class-name">Runnable</span>\u63A5\u53E3
      \u5B9A\u4E49\u4E00\u4E2A\u5B9E\u73B0\u7C7B<span class="token punctuation">,</span>\u5B9E\u73B0<span class="token class-name">Runnable</span>\u63A5\u53E3
      \u91CD\u5199run\u65B9\u6CD5
      \u521B\u5EFA\u5B9E\u73B0\u7C7B\u5BF9\u8C61<span class="token punctuation">,</span>\u5C06\u5176\u5C01\u88C5\u5230<span class="token class-name">Thread</span>\u5BF9\u8C61\u4E2D
      \u8C03\u7528<span class="token class-name">Thread</span>\u4E2D\u7684start\u65B9\u6CD5
    g<span class="token punctuation">.</span>\u5B9E\u73B0\u591A\u7EBF\u7A0B\u65B9\u5F0F<span class="token number">3</span><span class="token operator">:</span>\u533F\u540D\u5185\u90E8\u7C7B\u65B9\u5F0F
      <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         \u91CD\u5199run
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    h<span class="token punctuation">.</span>\u7EBF\u7A0B\u5B89\u5168<span class="token punctuation">(</span>\u7EBF\u7A0B\u540C\u6B65<span class="token punctuation">)</span><span class="token operator">-&gt;</span>\u540C\u6B65\u4EE3\u7801\u5757
      <span class="token keyword">synchronized</span><span class="token punctuation">(</span>\u4EFB\u610F\u5BF9\u8C61<span class="token punctuation">)</span><span class="token punctuation">{</span>
         \u53EF\u80FD\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u7684\u4EE3\u7801
      <span class="token punctuation">}</span>
      \u9501\u5FC5\u987B\u662F\u540C\u4E00\u628A\u9501
    i<span class="token punctuation">.</span>\u7EBF\u7A0B\u5B89\u5168<span class="token punctuation">(</span>\u7EBF\u7A0B\u540C\u6B65<span class="token punctuation">)</span><span class="token operator">-&gt;</span>\u540C\u6B65\u65B9\u6CD5
      \u666E\u901A<span class="token operator">:</span>\u9ED8\u8BA4\u9501<span class="token operator">-&gt;</span><span class="token keyword">this</span>
        <span class="token keyword">public</span> <span class="token keyword">synchronized</span> \u8FD4\u56DE\u503C\u7C7B\u578B \u65B9\u6CD5\u540D<span class="token punctuation">(</span>\u53C2\u6570<span class="token punctuation">)</span><span class="token punctuation">{</span>
           \u65B9\u6CD5\u4F53
           <span class="token keyword">return</span> \u7ED3\u679C
        <span class="token punctuation">}</span>

      \u9759\u6001<span class="token operator">:</span>\u9ED8\u8BA4\u9501<span class="token operator">-&gt;</span>\u5F53\u524D\u7C7B<span class="token punctuation">.</span><span class="token keyword">class</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> \u8FD4\u56DE\u503C\u7C7B\u578B \u65B9\u6CD5\u540D<span class="token punctuation">(</span>\u53C2\u6570<span class="token punctuation">)</span><span class="token punctuation">{</span>
           \u65B9\u6CD5\u4F53
           <span class="token keyword">return</span> \u7ED3\u679C
        <span class="token punctuation">}</span>

       
\u4ECA\u65E5\u91CD\u70B9<span class="token operator">:</span>
   <span class="token number">1.</span>wait\u548Csleep\u7684\u533A\u522B
   <span class="token number">2.</span>\u77E5\u9053lock\u539F\u7406\u548C\u4F7F\u7528
   <span class="token number">3.</span>\u77E5\u9053lock\u9501\u548C\u540C\u6B65\u9501\u533A\u522B
   <span class="token number">4.</span>\u4F1A\u4F7F\u7528\u7EBF\u7A0B\u6C60   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E00\u7AE0-\u7EBF\u7A0B\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E00\u7AE0-\u7EBF\u7A0B\u72B6\u6001" aria-hidden="true">#</a> \u7B2C\u4E00\u7AE0.\u7EBF\u7A0B\u72B6\u6001</h1><h2 id="_1-\u7EBF\u7A0B\u72B6\u6001\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#_1-\u7EBF\u7A0B\u72B6\u6001\u4ECB\u7ECD" aria-hidden="true">#</a> 1.\u7EBF\u7A0B\u72B6\u6001\u4ECB\u7ECD</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  \u5F53\u7EBF\u7A0B\u88AB\u521B\u5EFA\u5E76\u542F\u52A8\u4EE5\u540E\uFF0C\u5B83\u65E2\u4E0D\u662F\u4E00\u542F\u52A8\u5C31\u8FDB\u5165\u4E86\u6267\u884C\u72B6\u6001\uFF0C\u4E5F\u4E0D\u662F\u4E00\u76F4\u5904\u4E8E\u6267\u884C\u72B6\u6001\u3002\u5728\u7EBF\u7A0B\u7684\u751F\u547D\u5468\u671F\u4E2D\uFF0C\u6709\u51E0\u79CD\u72B6\u6001\u5462\uFF1F\u5728API\u4E2D<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span>\u8FD9\u4E2A\u679A\u4E3E\u4E2D\u7ED9\u51FA\u4E86\u516D\u79CD\u7EBF\u7A0B\u72B6\u6001\uFF1A
  \u8FD9\u91CC\u5148\u5217\u51FA\u5404\u4E2A\u7EBF\u7A0B\u72B6\u6001\u53D1\u751F\u7684\u6761\u4EF6\uFF0C\u4E0B\u9762\u5C06\u4F1A\u5BF9\u6BCF\u79CD\u72B6\u6001\u8FDB\u884C\u8BE6\u7EC6\u89E3\u6790\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>\u7EBF\u7A0B\u72B6\u6001</th><th>\u5BFC\u81F4\u72B6\u6001\u53D1\u751F\u6761\u4EF6</th></tr></thead><tbody><tr><td>NEW(\u65B0\u5EFA)</td><td>\u7EBF\u7A0B\u521A\u88AB\u521B\u5EFA\uFF0C\u4F46\u662F\u5E76\u672A\u542F\u52A8\u3002\u8FD8\u6CA1\u8C03\u7528start\u65B9\u6CD5\u3002</td></tr><tr><td>Runnable(\u53EF\u8FD0\u884C)</td><td>\u7EBF\u7A0B\u53EF\u4EE5\u5728java\u865A\u62DF\u673A\u4E2D\u8FD0\u884C\u7684\u72B6\u6001\uFF0C\u53EF\u80FD\u6B63\u5728\u8FD0\u884C\u81EA\u5DF1\u4EE3\u7801\uFF0C\u4E5F\u53EF\u80FD\u6CA1\u6709\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u5904\u7406\u5668\u3002</td></tr><tr><td>Blocked(\u9501\u963B\u585E)</td><td>\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u8BD5\u56FE\u83B7\u53D6\u4E00\u4E2A\u5BF9\u8C61\u9501\uFF0C\u800C\u8BE5\u5BF9\u8C61\u9501\u88AB\u5176\u4ED6\u7684\u7EBF\u7A0B\u6301\u6709\uFF0C\u5219\u8BE5\u7EBF\u7A0B\u8FDB\u5165Blocked\u72B6\u6001\uFF1B\u5F53\u8BE5\u7EBF\u7A0B\u6301\u6709\u9501\u65F6\uFF0C\u8BE5\u7EBF\u7A0B\u5C06\u53D8\u6210Runnable\u72B6\u6001\u3002</td></tr><tr><td>Waiting(\u65E0\u9650\u7B49\u5F85)</td><td>\u4E00\u4E2A\u7EBF\u7A0B\u5728\u7B49\u5F85\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u6267\u884C\u4E00\u4E2A\uFF08\u5524\u9192\uFF09\u52A8\u4F5C\u65F6\uFF0C\u8BE5\u7EBF\u7A0B\u8FDB\u5165Waiting\u72B6\u6001\u3002\u8FDB\u5165\u8FD9\u4E2A\u72B6\u6001\u540E\u662F\u4E0D\u80FD\u81EA\u52A8\u5524\u9192\u7684\uFF0C\u5FC5\u987B\u7B49\u5F85\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u8C03\u7528notify\u6216\u8005notifyAll\u65B9\u6CD5\u624D\u80FD\u591F\u5524\u9192\u3002</td></tr><tr><td>Timed Waiting(\u8BA1\u65F6\u7B49\u5F85)</td><td>\u540Cwaiting\u72B6\u6001\uFF0C\u6709\u51E0\u4E2A\u65B9\u6CD5\u6709\u8D85\u65F6\u53C2\u6570\uFF0C\u8C03\u7528\u4ED6\u4EEC\u5C06\u8FDB\u5165Timed Waiting\u72B6\u6001\u3002\u8FD9\u4E00\u72B6\u6001\u5C06\u4E00\u76F4\u4FDD\u6301\u5230\u8D85\u65F6\u671F\u6EE1\u6216\u8005\u63A5\u6536\u5230\u5524\u9192\u901A\u77E5\u3002\u5E26\u6709\u8D85\u65F6\u53C2\u6570\u7684\u5E38\u7528\u65B9\u6CD5\u6709Thread.sleep \u3001Object.wait\u3002</td></tr><tr><td>Teminated(\u88AB\u7EC8\u6B62)</td><td>\u56E0\u4E3Arun\u65B9\u6CD5\u6B63\u5E38\u9000\u51FA\u800C\u6B7B\u4EA1\uFF0C\u6216\u8005\u56E0\u4E3A\u6CA1\u6709\u6355\u83B7\u7684\u5F02\u5E38\u7EC8\u6B62\u4E86run\u65B9\u6CD5\u800C\u6B7B\u4EA1\u3002\u6216\u8005\u8C03\u7528\u8FC7\u65F6\u65B9\u6CD5stop()</td></tr></tbody></table><h2 id="_2-\u7EBF\u7A0B\u72B6\u6001\u56FE" tabindex="-1"><a class="header-anchor" href="#_2-\u7EBF\u7A0B\u72B6\u6001\u56FE" aria-hidden="true">#</a> 2.\u7EBF\u7A0B\u72B6\u6001\u56FE</h2><img src="https://photo.sneoo.com/img/202206091239924.png" alt="image-20220304093351646" style="zoom:80%;"><h1 id="\u7B2C\u4E8C\u7AE0-\u7B49\u5F85\u5524\u9192" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E8C\u7AE0-\u7B49\u5F85\u5524\u9192" aria-hidden="true">#</a> \u7B2C\u4E8C\u7AE0.\u7B49\u5F85\u5524\u9192</h1><h2 id="_1-\u7B49\u5F85\u5524\u9192\u6848\u4F8B\u5206\u6790-\u7EBF\u7A0B\u4E4B\u95F4\u7684\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#_1-\u7B49\u5F85\u5524\u9192\u6848\u4F8B\u5206\u6790-\u7EBF\u7A0B\u4E4B\u95F4\u7684\u901A\u4FE1" aria-hidden="true">#</a> 1.\u7B49\u5F85\u5524\u9192\u6848\u4F8B\u5206\u6790(\u7EBF\u7A0B\u4E4B\u95F4\u7684\u901A\u4FE1)</h2><img src="https://photo.sneoo.com/img/202206091239319.png" alt="image-20220304101531751" style="zoom:80%;"><h2 id="_2-\u7B49\u5F85\u5524\u9192\u6848\u4F8B\u5B9E\u73B0" tabindex="-1"><a class="header-anchor" href="#_2-\u7B49\u5F85\u5524\u9192\u6848\u4F8B\u5B9E\u73B0" aria-hidden="true">#</a> 2.\u7B49\u5F85\u5524\u9192\u6848\u4F8B\u5B9E\u73B0</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5305\u5B50\u94FA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaoZiPu</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49count,\u4EE3\u8868\u5305\u5B50\u4E2A\u6570</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>
    <span class="token comment">//\u5B9A\u4E49flag,\u4EE3\u8868\u662F\u5426\u6709\u5305\u5B50</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/*
      \u6539\u9020get\u65B9\u6CD5 ,\u6B64\u65B9\u6CD5\u7ED9\u6D88\u8D39\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u6D88\u8D39\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u4E86......\u7B2C&quot;</span><span class="token operator">+</span>count<span class="token operator">+</span><span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
      \u6539\u9020set\u65B9\u6CD5,\u6B64\u65B9\u6CD5\u7ED9\u751F\u4EA7\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u751F\u4EA7\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u751F\u4EA7\u4E86..\u7B2C&quot;</span><span class="token operator">+</span>count<span class="token operator">+</span><span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>baoZiPu<span class="token punctuation">.</span><span class="token function">isFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        baoZiPu<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token comment">//\u751F\u4EA7\u5305\u5B50</span>
                baoZiPu<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Atrue,\u8BC1\u660E\u6709\u5305\u5B50\u4E86</span>
                baoZiPu<span class="token punctuation">.</span><span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u5524\u9192\u6D88\u8D39\u7EBF\u7A0B</span>
                baoZiPu<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6D88\u8D39\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>baoZiPu<span class="token punctuation">.</span><span class="token function">isFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        baoZiPu<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token comment">//\u6D88\u8D39\u5305\u5B50</span>
                baoZiPu<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Afalse,\u8BC1\u660E\u6CA1\u6709\u5305\u5B50\u4E86</span>
                baoZiPu<span class="token punctuation">.</span><span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//\u5524\u9192\u751F\u4EA7\u7EBF\u7A0B</span>
                baoZiPu<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BaoZiPu</span> baoZiPu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Consumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://photo.sneoo.com/img/202206091239503.png" alt="image-20220304103323349" style="zoom:80%;"><p><img src="https://photo.sneoo.com/img/202206091239967.png" alt="image-20220304105020240"></p><h2 id="_3-\u7528\u540C\u6B65\u65B9\u6CD5\u6539\u9020\u7B49\u5F85\u5524\u9192\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3-\u7528\u540C\u6B65\u65B9\u6CD5\u6539\u9020\u7B49\u5F85\u5524\u9192\u6848\u4F8B" aria-hidden="true">#</a> 3.\u7528\u540C\u6B65\u65B9\u6CD5\u6539\u9020\u7B49\u5F85\u5524\u9192\u6848\u4F8B</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5305\u5B50\u94FA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaoZiPu</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49count,\u4EE3\u8868\u5305\u5B50\u4E2A\u6570</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>
    <span class="token comment">//\u5B9A\u4E49flag,\u4EE3\u8868\u662F\u5426\u6709\u5305\u5B50</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/*
      \u6539\u9020get\u65B9\u6CD5 ,\u6B64\u65B9\u6CD5\u7ED9\u6D88\u8D39\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u6D88\u8D39\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u6D88\u8D39\u5305\u5B50</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u4E86......\u7B2C&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Afalse,\u8BC1\u660E\u6CA1\u6709\u5305\u5B50\u4E86</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5524\u9192\u751F\u4EA7\u7EBF\u7A0B</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
      \u6539\u9020set\u65B9\u6CD5,\u6B64\u65B9\u6CD5\u7ED9\u751F\u4EA7\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u751F\u4EA7\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u751F\u4EA7\u5305\u5B50</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u751F\u4EA7\u4E86..\u7B2C&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Atrue,\u8BC1\u660E\u6709\u5305\u5B50\u4E86</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5524\u9192\u6D88\u8D39\u7EBF\u7A0B</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u751F\u4EA7\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            baoZiPu<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6D88\u8D39\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            baoZiPu<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BaoZiPu</span> baoZiPu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Consumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E09\u7AE0-\u591A\u7B49\u5F85\u591A\u5524\u9192" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E09\u7AE0-\u591A\u7B49\u5F85\u591A\u5524\u9192" aria-hidden="true">#</a> \u7B2C\u4E09\u7AE0.\u591A\u7B49\u5F85\u591A\u5524\u9192</h1><h2 id="_1-\u89E3\u51B3\u591A\u751F\u4EA7\u591A\u6D88\u8D39\u95EE\u9898-if\u6539\u4E3Awhile-\u5C06notify\u6539\u4E3Anotifyall" tabindex="-1"><a class="header-anchor" href="#_1-\u89E3\u51B3\u591A\u751F\u4EA7\u591A\u6D88\u8D39\u95EE\u9898-if\u6539\u4E3Awhile-\u5C06notify\u6539\u4E3Anotifyall" aria-hidden="true">#</a> 1.\u89E3\u51B3\u591A\u751F\u4EA7\u591A\u6D88\u8D39\u95EE\u9898(if\u6539\u4E3Awhile,\u5C06notify\u6539\u4E3AnotifyAll)</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u5305\u5B50\u94FA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaoZiPu</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49count,\u4EE3\u8868\u5305\u5B50\u4E2A\u6570</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>
    <span class="token comment">//\u5B9A\u4E49flag,\u4EE3\u8868\u662F\u5426\u6709\u5305\u5B50</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/*
      \u6539\u9020get\u65B9\u6CD5 ,\u6B64\u65B9\u6CD5\u7ED9\u6D88\u8D39\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u6D88\u8D39\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u6D88\u8D39\u5305\u5B50</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u4E86......\u7B2C&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Afalse,\u8BC1\u660E\u6CA1\u6709\u5305\u5B50\u4E86</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
      \u6539\u9020set\u65B9\u6CD5,\u6B64\u65B9\u6CD5\u7ED9\u751F\u4EA7\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u751F\u4EA7\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u751F\u4EA7\u5305\u5B50</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u751F\u4EA7\u4E86..\u7B2C&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Atrue,\u8BC1\u660E\u6709\u5305\u5B50\u4E86</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u751F\u4EA7\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            baoZiPu<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6D88\u8D39\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            baoZiPu<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BaoZiPu</span> baoZiPu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Consumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u56DB\u7AE0-lock\u9501" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u56DB\u7AE0-lock\u9501" aria-hidden="true">#</a> \u7B2C\u56DB\u7AE0.Lock\u9501</h1><h2 id="_1-lock\u5BF9\u8C61\u7684\u4ECB\u7ECD\u548C\u57FA\u672C\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_1-lock\u5BF9\u8C61\u7684\u4ECB\u7ECD\u548C\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a> 1.Lock\u5BF9\u8C61\u7684\u4ECB\u7ECD\u548C\u57FA\u672C\u4F7F\u7528</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u6982\u8FF0<span class="token operator">:</span><span class="token class-name">Lock</span>\u662F\u4E00\u4E2A\u63A5\u53E3
<span class="token number">2.</span>\u5B9E\u73B0\u7C7B<span class="token operator">:</span>
  <span class="token class-name">ReentrantLock</span>
<span class="token number">3.</span>\u65B9\u6CD5<span class="token operator">:</span>
  <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  \u83B7\u53D6\u9501
  <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  \u91CA\u653E\u9501    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTicket</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49100\u5F20\u7968</span>
    <span class="token keyword">int</span> ticket <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token comment">//\u521B\u5EFALock\u9501\u5BF9\u8C61</span>
    <span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u83B7\u53D6\u9501</span>
                lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>ticket <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u4E70\u4E86\u7B2C&quot;</span> <span class="token operator">+</span> ticket <span class="token operator">+</span> <span class="token string">&quot;\u5F20\u7968&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    ticket<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u91CA\u653E\u9501</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyTicket</span> myTicket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myTicket<span class="token punctuation">,</span> <span class="token string">&quot;\u8C22\u5E7F\u5764&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myTicket<span class="token punctuation">,</span> <span class="token string">&quot;\u8D75\u56DB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myTicket<span class="token punctuation">,</span> <span class="token string">&quot;\u5218\u80FD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5F00\u542F\u7EBF\u7A0B</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t3<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-lock\u548Csynchronized\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_2-lock\u548Csynchronized\u533A\u522B" aria-hidden="true">#</a> 2.Lock\u548Csynchronized\u533A\u522B</h2><h3 id="_2-1-lock" tabindex="-1"><a class="header-anchor" href="#_2-1-lock" aria-hidden="true">#</a> 2.1.Lock</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u5E95\u5C42\u5B9E\u73B0\u539F\u7406<span class="token operator">:</span> \u4E50\u89C2\u9501
<span class="token number">2.</span>\u4E50\u89C2\u9501\u6267\u884C\u539F\u7406<span class="token operator">:</span>  CAS\u673A\u5236  <span class="token class-name">Compare</span> <span class="token class-name">And</span> <span class="token class-name">Swap</span>  <span class="token punctuation">(</span>\u6BD4\u8F83\u5E76\u4EA4\u6362<span class="token punctuation">)</span>        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://photo.sneoo.com/img/202206091239019.png" alt="image-20220304143012312" style="zoom:80%;"><h3 id="_2-2-synchronized" tabindex="-1"><a class="header-anchor" href="#_2-2-synchronized" aria-hidden="true">#</a> 2.2.synchronized</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u5C5E\u4E8E\u60B2\u89C2\u9501<span class="token punctuation">,</span>\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u62FF\u5230\u9501\u5BF9\u8C61\u4E4B\u540E<span class="token punctuation">,</span>\u5176\u4ED6\u7EBF\u7A0B\u62FF\u4E0D\u5230<span class="token punctuation">,</span>\u6267\u884C\u4E0D\u4E86<span class="token punctuation">,</span>\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u505A\u64CD\u4F5C\u7684\u65F6\u5019<span class="token punctuation">,</span>\u5176\u4ED6\u7EBF\u7A0B\u64CD\u4F5C\u4E0D\u4E86
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-3-lock\u548Csynchronized\u533A\u522B-\u60B2\u89C2\u9501\u548C\u4E50\u89C2\u9501\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_2-3-lock\u548Csynchronized\u533A\u522B-\u60B2\u89C2\u9501\u548C\u4E50\u89C2\u9501\u7684\u533A\u522B" aria-hidden="true">#</a> 2.3.Lock\u548Csynchronized\u533A\u522B(\u60B2\u89C2\u9501\u548C\u4E50\u89C2\u9501\u7684\u533A\u522B)</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">a<span class="token punctuation">.</span></span> Lock</span>\u5C5E\u4E8E\u4E50\u89C2\u9501<span class="token punctuation">,</span>\u4F7F\u7528\u591A\u4E2A\u7EBF\u7A0B\u64CD\u4F5C\u7684\u662F\u540C\u4E00\u4E2A\u53D8\u91CF
   <span class="token keyword">synchronized</span>\u5C5E\u4E8E\u60B2\u89C2\u9501<span class="token punctuation">,</span>\u4F7F\u7528\u591A\u4E2A\u7EBF\u7A0B\u64CD\u4F5C\u4E00\u6BB5\u4EE3\u7801
b<span class="token punctuation">.</span>
   \u4E50\u89C2\u9501<span class="token operator">:</span>\u7EBF\u7A0B<span class="token class-name">A</span>\u5728\u64CD\u4F5C\u53D8\u91CF\u65F6<span class="token punctuation">,</span>\u5141\u8BB8\u7EBF\u7A0B<span class="token class-name">B</span>\u64CD\u4F5C<span class="token punctuation">,</span>\u53EA\u662F\u4F1A\u5148\u5224\u65AD<span class="token punctuation">,</span>\u5982\u679C\u6709\u95EE\u9898<span class="token punctuation">,</span>\u5C31\u653E\u5F03\u672C\u6B21\u64CD\u4F5C<span class="token punctuation">.</span>\u5224\u65AD\u5982\u679C\u6CA1\u6709\u95EE\u9898<span class="token punctuation">,</span>\u5C31\u4F1A\u6B63\u5E38\u64CD\u4F5C
   \u60B2\u89C2\u9501<span class="token operator">:</span>\u5F53\u7EBF\u7A0B<span class="token class-name">A</span>\u6B63\u5728\u64CD\u4F5C\u7684\u65F6\u5019<span class="token punctuation">,</span>\u4E0D\u5141\u8BB8\u7EBF\u7A0B<span class="token class-name">B</span>\u6267\u884C<span class="token punctuation">,</span>\u8981\u7B49<span class="token class-name">A</span>\u51FA\u6765\u4E4B\u540E<span class="token class-name">B</span>\u624D\u6709\u53EF\u80FD\u8FDB\u5165\u6267\u884C

c<span class="token punctuation">.</span>\u76F8\u5BF9\u6765\u8BF4<span class="token punctuation">,</span>\u60B2\u89C2\u9501\u6548\u7387\u6BD4\u8F83\u4F4E<span class="token punctuation">,</span>\u4E50\u89C2\u9501\u6548\u7387\u6BD4\u8F83\u9AD8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5F53\u591A\u7EBF\u7A0B\u64CD\u4F5C\u540C\u4E00\u4E2A\u6570\u636E\u65F6,\u4F1A\u51FA\u73B0\u4E00\u4E0B\u95EE\u9898:</p><p>1.\u53EF\u89C1\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>i<span class="token operator">=</span><span class="token number">9</span>\uFF0C\u53D8\u91CFi\u7684\u521D\u59CB\u503C\u4E3A<span class="token number">9</span>\uFF0C\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u7684\u64CD\u4F5C\u90FD\u662F\u51CF<span class="token number">1</span>\u3002\u4E24\u4E2A\u7EBF\u7A0B<span class="token class-name">A</span>\u4E0E<span class="token class-name">B</span>\u540C\u65F6\u8BBF\u95EE\u53D8\u91CF\uFF0C<span class="token class-name">B</span>\u5148\u6267\u884Ci<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>\u5728\u5C06\u7ED3\u679Ci<span class="token operator">=</span><span class="token number">8</span>\u540C\u6B65\u5230\u5185\u5B58\u4E2D\uFF0C<span class="token class-name">A</span>\u7EBF\u7A0B\u4E5F\u6267\u884Ci<span class="token operator">-</span><span class="token number">1</span>\uFF0C\u8FD9\u65F6i<span class="token operator">=</span><span class="token number">9</span>\u7684\u72B6\u6001\u5C31\u88AB\u6267\u884C\u4E24\u6B21\uFF0C\u51FA\u73B0\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002

\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u4EA7\u751F\u7684\u539F\u56E0\uFF1A\u4E00\u4E2A\u7EBF\u7A0B\u5BF9\u5171\u4EAB\u6570\u636E\u7684\u4FEE\u6539\u4E0D\u80FD\u7ACB\u5373\u4E3A\u5176\u4ED6\u7EBF\u7A0B\u6240\u89C1\u3002

\u89E3\u51B3<span class="token operator">:</span>\u7ED9\u5171\u4EAB\u7684\u53D8\u91CF\u52A0\u4E0A\u5173\u952E\u5B57<span class="token operator">:</span><span class="token keyword">volatile</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.\u6709\u5E8F\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u591A\u884C\u4EE3\u7801\u7684\u7F16\u5199\u987A\u5E8F\u548C\u7F16\u8BD1\u987A\u5E8F\u3002
\u6709\u4E9B\u65F6\u5019\uFF0C\u7F16\u8BD1\u5668\u5728\u7F16\u8BD1\u4EE3\u7801\u65F6\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u6548\u7387\uFF0C\u4F1A\u5BF9\u4EE3\u7801\u201C\u91CD\u6392\u201D\uFF1A

<span class="token punctuation">.</span>java\u6587\u4EF6
<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>		<span class="token comment">//\u7B2C\u4E00\u884C</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>		<span class="token comment">//\u7B2C\u4E8C\u884C</span>
<span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>	<span class="token comment">//\u7B2C\u4E09\u884C</span>

\u5728\u6267\u884C\u7B2C\u4E09\u884C\u4E4B\u524D\uFF0C\u7531\u4E8E\u7B2C\u4E00\u884C\u548C\u7B2C\u4E8C\u884C\u7684\u5148\u540E\u987A\u5E8F\u65E0\u6240\u8C13\uFF0C\u6240\u4EE5\u7F16\u8BD1\u5668\u53EF\u80FD\u4F1A\u5BF9\u201C\u7B2C\u4E00\u884C\u201D\u548C\u201C\u7B2C\u4E8C\u884C\u201D\u8FDB\u884C\u4EE3\u7801\u91CD\u6392\uFF1A
<span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>

\u4F46\u5728\u591A\u7EBF\u7A0B\u73AF\u5883\u4E0B\uFF0C\u8FD9\u79CD\u91CD\u6392\u53EF\u80FD\u662F\u6211\u4EEC\u4E0D\u5E0C\u671B\u53D1\u751F\u7684\uFF0C\u56E0\u4E3A\uFF1A\u91CD\u6392\uFF0C\u53EF\u80FD\u4F1A\u5F71\u54CD\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u7684\u7ED3\u679C<span class="token punctuation">,</span>\u6240\u4EE5\u6211\u4EEC\u4E0D\u9700\u8981\u4EE3\u7801\u8FDB\u884C\u91CD\u6392

\u89E3\u51B3<span class="token operator">:</span>\u7ED9\u5171\u4EAB\u7684\u53D8\u91CF\u52A0\u4E0A\u5173\u952E\u5B57<span class="token operator">:</span><span class="token keyword">volatile</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.\u539F\u5B50\u6027</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u6307\u7684\u662F\u4E00\u4E2A\u64CD\u4F5C\u4E0D\u53EF\u4E2D\u65AD\uFF0C\u5373\u5728\u591A\u7EBF\u7A0B\u5E76\u53D1\u7684\u73AF\u5883\u4E0B\uFF0C\u4E00\u4E2A\u64CD\u4F5C\u4E00\u65E6\u5F00\u59CB\uFF0C\u5C31\u4F1A\u5728\u540C\u4E00\u4E2ACPU\u65F6\u95F4\u7247\u5185\u6267\u884C\u5B8C\u6BD5

<span class="token keyword">volatile</span>\u89E3\u51B3\u4E0D\u4E86\u539F\u5B50\u6027\u95EE\u9898<span class="token punctuation">,</span>\u6240\u4EE5\u4E3A\u4E86\u591A\u7EBF\u7A0B\u64CD\u4F5C\u540C\u4E00\u4E2A\u6570\u636E\u51FA\u73B0\u7684\u539F\u5B50\u6027\u95EE\u9898<span class="token punctuation">,</span>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u539F\u5B50\u7C7B

<span class="token class-name">Atomicxxx</span>\u7C7B<span class="token operator">-&gt;</span>xxx\u4EE3\u8868\u5177\u4F53\u6570\u636E\u7C7B\u578B  <span class="token operator">-&gt;</span>  \u539F\u5B50\u7C7B\u7684\u5B9E\u73B0\u539F\u7406\u5C31\u662F\u4E50\u89C2\u9501
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test02</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u539F\u5B50\u7C7B</span>
        <span class="token class-name">AtomicInteger</span> i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//int i = 0</span>
        <span class="token comment">/*int addAndGet(int delta)\u4EE5\u539F\u5B50\u65B9\u5F0F\u5C06\u7ED9\u5B9A\u503C\u4E0E\u5F53\u524D\u503C\u76F8\u52A0\u3002*/</span>
        <span class="token keyword">int</span> i1 <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">addAndGet</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h1 id="\u7B2C\u4E94\u7AE0-condition-\u963B\u585E\u961F\u5217" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E94\u7AE0-condition-\u963B\u585E\u961F\u5217" aria-hidden="true">#</a> \u7B2C\u4E94\u7AE0.Condition(\u963B\u585E\u961F\u5217)</h1><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u4E3A\u4EC0\u4E48\u8981\u5B66<span class="token class-name">Condition</span>
  wait\u548Cnotify<span class="token punctuation">,</span>\u90FD\u662F\u672C\u5730\u65B9\u6CD5<span class="token punctuation">,</span>\u5982\u679C\u5728\u9AD8\u5E76\u53D1\u7684\u60C5\u51B5\u4E0B\u9891\u7E41\u64CD\u4F5Cwait\u548Cnotify<span class="token punctuation">,</span>\u6BD4\u8F83\u6D88\u8017\u7CFB\u7EDF\u8D44\u6E90
<span class="token number">2.</span>Condition<span class="token operator">:</span>\u63A5\u53E3
<span class="token number">3.</span>\u83B7\u53D6<span class="token operator">:</span>\u9700\u8981\u7528\u5230<span class="token class-name">Lock</span>\u5BF9\u8C61\u4E2D\u7684\u65B9\u6CD5
      <span class="token class-name">Condition</span> <span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">4.</span>\u65B9\u6CD5<span class="token operator">:</span>
  <span class="token keyword">void</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  \u7B49\u5F85
  <span class="token keyword">void</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> \u5524\u9192
<span class="token number">5.</span>\u6CE8\u610F<span class="token operator">:</span>
  <span class="token class-name">Condition</span>\u5FC5\u987B\u914D\u5408<span class="token class-name">Lock</span>\u5BF9\u8C61\u4F7F\u7528
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">Condition</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">Lock</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">ReentrantLock</span></span><span class="token punctuation">;</span>

<span class="token comment">//\u5305\u5B50\u94FA</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaoZiPu</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49count,\u4EE3\u8868\u5305\u5B50\u4E2A\u6570</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>
    <span class="token comment">//\u5B9A\u4E49flag,\u4EE3\u8868\u662F\u5426\u6709\u5305\u5B50</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>

    <span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u751F\u4EA7\u8005\u7684\u961F\u5217,\u88C5\u751F\u4EA7\u8005\u7B49\u5F85\u7684\u7EBF\u7A0B</span>
    <span class="token class-name">Condition</span> productCondition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u521B\u5EFA\u4E00\u4E2A\u6D88\u8D39\u8005\u7684\u961F\u5217,\u88C5\u6D88\u8D39\u8005\u7B49\u5F85\u7684\u7EBF\u7A0B</span>
    <span class="token class-name">Condition</span> consumerCondition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/*
      \u6539\u9020get\u65B9\u6CD5 ,\u6B64\u65B9\u6CD5\u7ED9\u6D88\u8D39\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u6D88\u8D39\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u9501</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                consumerCondition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u6D88\u8D39\u5305\u5B50</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6D88\u8D39\u4E86......\u7B2C&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Afalse,\u8BC1\u660E\u6CA1\u6709\u5305\u5B50\u4E86</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        productCondition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u91CA\u653E\u9501</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
      \u6539\u9020set\u65B9\u6CD5,\u6B64\u65B9\u6CD5\u7ED9\u751F\u4EA7\u7EBF\u7A0B\u7528
      \u4F5C\u4E3A\u751F\u4EA7\u5305\u5B50\u65B9\u6CD5
     */</span>
    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//\u83B7\u53D6\u9501</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                productCondition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u751F\u4EA7\u5305\u5B50</span>
        count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u751F\u4EA7\u4E86..\u7B2C&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">&quot;\u4E2A\u5305\u5B50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6539\u53D8flag\u72B6\u6001,\u4E3Atrue,\u8BC1\u660E\u6709\u5305\u5B50\u4E86</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        consumerCondition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u91CA\u653E\u9501</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">=</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6D88\u8D39\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            baoZiPu<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u751F\u4EA7\u8005</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u521B\u5EFA\u5305\u5B50\u94FA\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token class-name">BaoZiPu</span> baoZiPu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>baoZiPu <span class="token operator">=</span> baoZiPu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            baoZiPu<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BaoZiPu</span> baoZiPu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BaoZiPu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Consumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>baoZiPu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u516D\u7AE0-\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u516D\u7AE0-\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> \u7B2C\u516D\u7AE0.\u7EBF\u7A0B\u6C60</h1><img src="https://photo.sneoo.com/img/202206091240391.png" alt="image-20220304154338528" style="zoom:80%;"><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u4E3A\u4EC0\u4E48\u8981\u5B66\u7EBF\u7A0B\u6C60<span class="token operator">:</span>
  \u4E4B\u524D\u5982\u679C\u8981\u662F\u6709\u7EBF\u7A0B\u4EFB\u52A1\u4E86<span class="token punctuation">,</span>\u6211\u4EEC\u5C31\u8981\u5F00\u7EBF\u7A0B<span class="token punctuation">,</span>\u7528\u5B8C\u8FD8\u8981\u9500\u6BC1\u7EBF\u7A0B<span class="token punctuation">,</span>\u6240\u4EE5\u5982\u679C\u9891\u7E41\u7684\u5F00\u542F\u7EBF\u7A0B<span class="token punctuation">,</span>\u9500\u6BC1\u7EBF\u7A0B\u5F88\u8017\u8D39\u5185\u5B58\u8D44\u6E90
  \u6240\u4EE5\u6211\u4EEC\u60F3\u8981\u521B\u5EFA\u7EBF\u7A0B<span class="token punctuation">,</span>\u6B64\u7EBF\u7A0B\u53EF\u4EE5\u5FAA\u73AF\u5229\u7528
  \u5C06\u521B\u5EFA\u51FA\u6765\u7684\u7EBF\u7A0B\u653E\u5230\u4E00\u4E2A\u5BB9\u5668\u4E2D<span class="token punctuation">,</span>\u6709\u7EBF\u7A0B\u4EFB\u52A1\u4E86<span class="token punctuation">,</span>\u4ECE\u5BB9\u5668\u4E2D\u83B7\u53D6\u7EBF\u7A0B\u53BB\u6267\u884C<span class="token punctuation">;</span>\u7528\u5B8C\u8FD8\u56DE\u53BB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u7EBF\u7A0B\u6C60<span class="token operator">:</span><span class="token class-name">Executors</span>
<span class="token number">2.</span>\u521B\u5EFA\u7EBF\u7A0B\u6C60<span class="token punctuation">,</span>\u6307\u5B9A\u6700\u591A\u80FD\u521B\u5EFA\u591A\u5C11\u4E2A\u7EBF\u7A0B<span class="token operator">-&gt;</span><span class="token class-name">Executors</span>\u4E2D\u7684\u65B9\u6CD5
  <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> <span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token keyword">int</span> nThreads<span class="token punctuation">)</span> 
                                            nThreads<span class="token operator">:</span>\u4EE3\u8868\u7684\u662F\u7EBF\u7A0B\u6C60\u4E2D\u6700\u591A\u80FD\u521B\u5EFA\u591A\u5C11\u6761\u7EBF\u7A0B\u5BF9\u8C61
<span class="token number">3.</span>ExecutorService<span class="token operator">:</span>\u7528\u6765\u7BA1\u7406\u7EBF\u7A0B\u6C60\u4E2D\u7684\u7EBF\u7A0B\u7684

<span class="token number">4.</span>ExecutorService\u4E2D\u7684\u65B9\u6CD5<span class="token operator">:</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> task<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> \u63D0\u4EA4\u7EBF\u7A0B\u4EFB\u52A1 
      
<span class="token number">5.F</span>uture<span class="token operator">-&gt;</span>\u63A5\u53E3 
  a<span class="token punctuation">.</span>\u4F5C\u7528<span class="token operator">:</span>\u7528\u6765\u63A5\u6536\u7EBF\u7A0B\u4EFB\u52A1<span class="token punctuation">(</span>run\u65B9\u6CD5<span class="token punctuation">)</span>\u7684\u8FD4\u56DE\u503C\u7684
  b<span class="token punctuation">.</span>\u6CE8\u610F<span class="token operator">:</span>run\u65B9\u6CD5\u6CA1\u6709\u8FD4\u56DE\u503C<span class="token punctuation">,</span>\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u4E0D\u7528<span class="token class-name">Future</span>\u53BB\u63A5\u6536    
      
<span class="token number">6.</span>ExecutorService\u4E2D\u7684\u65B9\u6CD5<span class="token operator">:</span>
  <span class="token keyword">void</span> <span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span> \u5173\u95ED\u7EBF\u7A0B\u6C60
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u7EBF\u7A0B\u6C60,\u6307\u5B9A\u7EBF\u7A0B\u6C60\u4E2D\u6700\u591A\u80FD\u521B\u5EFA\u591A\u5C11\u6761\u7EBF\u7A0B</span>
        <span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u63D0\u4EA4\u7EBF\u7A0B\u4EFB\u52A1</span>
        es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        es<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;...\u6267\u884C\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E03\u7AE0-callable\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E03\u7AE0-callable\u63A5\u53E3" aria-hidden="true">#</a> \u7B2C\u4E03\u7AE0.Callable\u63A5\u53E3</h1><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>ExecutorService\u4E2D\u7684\u65B9\u6CD5<span class="token operator">:</span>
  <span class="token class-name">Future</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> task<span class="token punctuation">)</span>  
      
<span class="token number">2.</span>Callable<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>\u63A5\u53E3<span class="token operator">:</span>\u7C7B\u4F3C\u4E8E<span class="token class-name">Runnable</span>
  <span class="token class-name">V</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>\u8BBE\u7F6E\u7EBF\u7A0B\u4EFB\u52A1\u7684<span class="token punctuation">,</span>\u7C7B\u4F3C\u4E8E<span class="token class-name">Runnable</span>\u4E2D\u7684run\u65B9\u6CD5
    
<span class="token number">3.</span>call\u65B9\u6CD5\u548Crun\u65B9\u6CD5\u533A\u522B<span class="token operator">:</span>
  a<span class="token punctuation">.</span>\u76F8\u540C\u70B9<span class="token operator">:</span>
    call\u65B9\u6CD5\u548Crun\u65B9\u6CD5\u90FD\u662F\u8BBE\u7F6E\u7EBF\u7A0B\u4EFB\u52A1\u7684
  b<span class="token punctuation">.</span>\u4E0D\u540C\u70B9<span class="token operator">:</span>
    run\u65B9\u6CD5<span class="token operator">:</span>\u6CA1\u6709\u8FD4\u56DE\u503C<span class="token punctuation">,</span>\u800C\u4E14\u4E0D\u80FD\u5728run\u65B9\u6CD5\u4E0A<span class="token keyword">throws</span>\u5F02\u5E38
    call\u65B9\u6CD5<span class="token operator">:</span>\u6709\u8FD4\u56DE\u503C\u7684<span class="token punctuation">,</span>\u800C\u4E14\u80FD\u5728call\u65B9\u6CD5\u4E0A<span class="token keyword">throws</span>\u5F02\u5E38
        
<span class="token number">4.</span>call\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u662F\u4EC0\u4E48\u7C7B\u578B\u5462<span class="token operator">?</span>
  <span class="token class-name">Callable</span>\u4E2D<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>\u662F\u5565\u7C7B\u578B<span class="token punctuation">,</span>call\u8FD4\u56DE\u503C\u5C31\u662F\u4EC0\u4E48\u7C7B\u578B
        
  <span class="token generics"><span class="token punctuation">&lt;</span>v<span class="token punctuation">&gt;</span></span>\u5C16\u62EC\u53F7\u4E2D\u7684\u7C7B\u578B\u53EA\u80FD\u662F\u5F15\u7528\u6570\u636E\u7C7B\u578B
     <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token operator">-&gt;</span>\u4E0D\u884C
     <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token operator">-&gt;</span>\u884C

<span class="token number">5.F</span>uture<span class="token operator">:</span>
  <span class="token class-name"><span class="token namespace">a<span class="token punctuation">.</span></span>Future</span>\u662F\u4E00\u4E2A\u63A5\u53E3
  b<span class="token punctuation">.</span>\u4F5C\u7528<span class="token operator">:</span>\u7528\u6765\u63A5\u6536run\u65B9\u6CD5\u6216\u8005call\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u7684
        run\u65B9\u6CD5\u6CA1\u6709\u8FD4\u56DE\u503C<span class="token punctuation">,</span>\u6240\u4EE5\u65E0\u9700\u7528<span class="token class-name">Future</span>\u63A5\u6536
        call\u65B9\u6CD5\u6709\u8FD4\u56DE\u503C<span class="token punctuation">,</span>\u6240\u4EE5\u9700\u8981\u7528<span class="token class-name">Future</span>\u63A5\u6536
      
  <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span></span>Future</span>\u4E2D\u7684\u65B9\u6CD5<span class="token operator">:</span>
    <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>\u83B7\u53D6<span class="token class-name">Future</span>\u63A5\u6536\u5230\u7684\u8FD4\u56DE\u503C\u7ED3\u679C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u521B\u5EFA\u7EBF\u7A0B\u6C60</span>
        <span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u67F3\u5CA9\u548C\u6D9B\u54E5\u7684....\u6545\u4E8B&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-callable\u7EC3\u4E60" tabindex="-1"><a class="header-anchor" href="#_1-callable\u7EC3\u4E60" aria-hidden="true">#</a> 1.Callable\u7EC3\u4E60</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u9700\u6C42<span class="token operator">:</span>\u521B\u5EFA\u4E24\u4E2A\u7EBF\u7A0B\u4EFB\u52A1<span class="token punctuation">,</span>\u4E00\u4E2A\u7EBF\u7A0B\u4EFB\u52A1\u5B8C\u6210<span class="token number">1</span><span class="token operator">-</span><span class="token number">100</span>\u7684\u548C<span class="token punctuation">,</span>\u4E00\u4E2A\u7EBF\u7A0B\u4EFB\u52A1\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> f1 <span class="token operator">=</span> es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MySum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f2 <span class="token operator">=</span> es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u6C42\u548C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySum</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sum<span class="token operator">+=</span>i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyString</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u5218\u5907\u8BF4:\u98DE\u98DE,\u4E0D\u8981\u8FD9\u6837,\u54E5\u54E5\u7ED9\u4F60\u54ED\u4E00\u4E2A&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u516B\u7AE0-\u5B9A\u65F6\u5668-timer" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u516B\u7AE0-\u5B9A\u65F6\u5668-timer" aria-hidden="true">#</a> \u7B2C\u516B\u7AE0.\u5B9A\u65F6\u5668_Timer</h1><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u6982\u8FF0<span class="token operator">:</span><span class="token class-name">Timer</span><span class="token punctuation">,</span>\u5B9A\u65F6\u5668
<span class="token number">2.</span>\u4F5C\u7528<span class="token operator">:</span>\u8BA9\u4E00\u4E2A\u7EBF\u7A0B\u4EFB\u52A1<span class="token punctuation">,</span>\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u5C31\u6267\u884C\u4E00\u6B21<span class="token punctuation">,</span>\u6B64\u65F6\u95F4\u4F7F\u6211\u4EEC\u81EA\u5DF1\u6307\u5B9A\u7684
<span class="token number">3.</span>\u4F7F\u7528<span class="token operator">:</span>
  a<span class="token punctuation">.</span>\u521B\u5EFA<span class="token class-name">Timer</span>\u5BF9\u8C61
  b<span class="token punctuation">.</span>\u8C03\u7528\u65B9\u6CD5
    <span class="token keyword">void</span> <span class="token function">schedule</span><span class="token punctuation">(</span><span class="token class-name">TimerTask</span> task<span class="token punctuation">,</span> <span class="token class-name">Date</span> firstTime<span class="token punctuation">,</span> <span class="token keyword">long</span> period<span class="token punctuation">)</span>  
                  <span class="token class-name">TimerTask</span><span class="token operator">:</span>\u62BD\u8C61\u7C7B<span class="token punctuation">,</span>\u5B9E\u73B0\u4E86<span class="token class-name">Runnable</span>\u63A5\u53E3<span class="token punctuation">,</span>\u8BBE\u7F6E\u7EBF\u7A0B\u4EFB\u52A1
                  firstTime<span class="token operator">:</span>\u4ECE\u54EA\u4E2A\u65F6\u95F4\u5F00\u59CB\u7B97\u8D77
                  period<span class="token operator">:</span>\u6BCF\u9694\u591A\u957F\u65F6\u95F4\u7EBF\u7A0B\u4EFB\u52A1\u6267\u884C\u4E00\u6B21<span class="token punctuation">,</span>\u4F20\u9012\u6BEB\u79D2\u503C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Timer</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimerTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u67F3\u5CA9\u8BF4:\u6D9B\u54E5,\u8D77\u5E8A\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2000L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,66),c=[e];function o(l,i){return s(),a("div",null,c)}var k=n(t,[["render",o],["__file","day15. \u591A\u7EBF\u7A0B.html.vue"]]);export{k as default};
