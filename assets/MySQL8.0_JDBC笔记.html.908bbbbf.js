import{_ as p,r as e,o as c,c as o,b as n,d as l,a as s,e as a}from"./app.a3ab45a4.js";const i={},u=s(`<h1 id="\u7B2C\u4E00\u7AE0-jdbc\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E00\u7AE0-jdbc\u6982\u8FF0" aria-hidden="true">#</a> \u7B2C\u4E00\u7AE0 JDBC\u6982\u8FF0</h1><p>\u4E4B\u524D\u6211\u4EEC\u5B66\u4E60\u4E86JavaSE\uFF0C\u7F16\u5199\u4E86Java\u7A0B\u5E8F\uFF0C\u6570\u636E\u4FDD\u5B58\u5728\u53D8\u91CF\u3001\u6570\u7EC4\u3001\u96C6\u5408\u7B49\u4E2D\uFF0C\u65E0\u6CD5\u6301\u4E45\u5316\uFF0C\u540E\u6765\u5B66\u4E60\u4E86IO\u6D41\u53EF\u4EE5\u5C06\u6570\u636E\u5199\u5165\u6587\u4EF6\uFF0C\u4F46\u4E0D\u65B9\u4FBF\u7BA1\u7406\u6570\u636E\u4EE5\u53CA\u7EF4\u62A4\u6570\u636E\u7684\u5173\u7CFB\uFF1B</p><p>\u540E\u6765\u6211\u4EEC\u5B66\u4E60\u4E86\u6570\u636E\u5E93\u7BA1\u7406\u8F6F\u4EF6MySQL\uFF0C\u53EF\u4EE5\u65B9\u4FBF\u7684\u7BA1\u7406\u6570\u636E\u3002</p><p>\u90A3\u4E48\u5982\u4F55\u5C06\u5B83\u4FE9\u7ED3\u5408\u8D77\u6765\u5462\uFF1F\u5373Java\u7A0B\u5E8F&lt;==&gt;MySQL\uFF0C\u5B9E\u73B0\u6570\u636E\u7684\u5B58\u50A8\u548C\u5904\u7406\u3002</p><p>\u7B54\u6848\uFF1A\u4F7F\u7528JDBC\u6280\u672F\uFF0C\u540E\u671F\u53EF\u4EE5\u4F7F\u7528MyBatis\u7B49\u6301\u4E45\u5C42\u6846\u67B6\uFF08\u5E95\u5C42\u4ECD\u7136\u4F7F\u7528\u4E86JDBC\uFF09\u3002</p><h2 id="_1-1-jdbc\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-1-jdbc\u6982\u8FF0" aria-hidden="true">#</a> 1.1 JDBC\u6982\u8FF0</h2><p>JDBC\uFF1AJava Database Connectivity\uFF0C\u5B83\u662F\u4EE3\u8868\u4E00\u7EC4\u72EC\u7ACB\u4E8E\u4EFB\u4F55\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF08DBMS\uFF09\u7684API\uFF0C\u58F0\u660E\u5728java.sql\u4E0Ejavax.sql\u5305\u4E2D\uFF0C\u662FSUN(\u73B0\u5728Oracle)\u63D0\u4F9B\u7684\u4E00\u7EC4\u63A5\u53E3\u89C4\u8303\u3002\u7531\u5404\u4E2A\u6570\u636E\u5E93\u5382\u5546\u6765\u63D0\u4F9B\u5B9E\u73B0\u7C7B\uFF0C\u8FD9\u4E9B\u5B9E\u73B0\u7C7B\u7684\u96C6\u5408\u6784\u6210\u4E86\u6570\u636E\u5E93\u9A71\u52A8jar\u3002</p><p><img src="https://photo.sneoo.com/spring5/202207031643533.png" alt="image-20210905174807576"></p><p>\u5373JDBC\u6280\u672F\u5305\u542B\u4E24\u4E2A\u90E8\u5206\uFF1A</p><p>\uFF081\uFF09java.sql\u5305\u548Cjavax.sql\u5305\u4E2D\u7684API</p><blockquote><p>\u56E0\u4E3A\u4E3A\u4E86\u9879\u76EE\u4EE3\u7801\u7684\u53EF\u79FB\u690D\u6027\uFF0C\u53EF\u7EF4\u62A4\u6027\uFF0CSUN\u516C\u53F8\u4ECE\u6700\u521D\u5C31\u5236\u5B9A\u4E86Java\u7A0B\u5E8F\u8FDE\u63A5\u5404\u79CD\u6570\u636E\u5E93\u7684\u7EDF\u4E00\u63A5\u53E3\u89C4\u8303\u3002\u8FD9\u6837\u7684\u8BDD\uFF0C\u4E0D\u7BA1\u662F\u8FDE\u63A5\u54EA\u4E00\u79CDDBMS\u8F6F\u4EF6\uFF0CJava\u4EE3\u7801\u53EF\u4EE5\u4FDD\u6301\u4E00\u81F4\u6027\u3002</p></blockquote><p>\uFF082\uFF09\u5404\u4E2A\u6570\u636E\u5E93\u5382\u5546\u63D0\u4F9B\u7684jar</p><blockquote><p>\u56E0\u4E3A\u5404\u4E2A\u6570\u636E\u5E93\u5382\u5546\u7684DBMS\u8F6F\u4EF6\u5404\u6709\u4E0D\u540C\uFF0C\u90A3\u4E48\u5185\u90E8\u5982\u4F55\u901A\u8FC7sql\u5B9E\u73B0\u589E\u3001\u5220\u3001\u6539\u3001\u67E5\u7B49\u7BA1\u7406\u6570\u636E\uFF0C\u53EA\u6709\u8FD9\u4E2A\u6570\u636E\u5E93\u5382\u5546\u81EA\u5DF1\u66F4\u6E05\u695A\uFF0C\u56E0\u6B64\u628A\u63A5\u53E3\u89C4\u8303\u7684\u5B9E\u73B0\u4EA4\u7ED9\u5404\u4E2A\u6570\u636E\u5E93\u5382\u5546\u81EA\u5DF1\u5B9E\u73B0\u3002</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span>

<span class="token comment">/*
\u4E00\u3001JDBC\u7684\u6982\u8FF0
1\u3001\u4E4B\u524D\u5B66\u4E60\u4E86Java\uFF0C\u53C8\u5B66\u4E60\u4E86MySQL\u6570\u636E\u5E93
JDBC \u628A  Java\u7A0B\u5E8F \u548C MySQL\u6570\u636E\u5E93\u8FDE\u8D77\u6765\uFF0CJava\u7A0B\u5E8F\u662F\u8D1F\u8D23\u6570\u636E\u7684\u8F93\u5165\uFF0C\u4E1A\u52A1\u7684\u5904\u7406\uFF0C\u6570\u636E\u7684\u663E\u793A\uFF0CMySQL\u8D1F\u8D23\u6570\u636E\u7684\u5B58\u50A8\u548C\u7BA1\u7406\u3002

2\u3001JDBC\uFF1AJava Database Connectivity
JDBC = JDK\u6838\u5FC3\u7C7B\u5E93\u4E2D\u7684\u4E00\u5957API\uFF08\u63A5\u53E3+\u90E8\u5206\u5DE5\u5177\u7C7B\uFF09 + \u6570\u636E\u5E93\u5382\u5546\u63D0\u4F9B\u7684\u9A71\u52A8jar


Java\u7A0B\u5E8F\u4E0D\u4EC5\u4EC5\u80FD\u591F\u8FDE\u63A5MySQL\u6570\u636E\u5E93\uFF0C\u53EF\u4EE5\u8FDE\u63A5\u5F88\u591A\u6570\u636E\u5E93\uFF08Oracle\uFF0CSQL Server\uFF0CDB2\uFF0C...\uFF09\u3002
\u8FD9\u5C31\u6709\u4E00\u4E2A\u95EE\u9898\uFF1F
    \u6570\u636E\u5E93\u4E0D\u540C\uFF0C\u5B83\u4EEC\u7684\u64CD\u4F5C\u65B9\u5F0F\u4F1A\u6709\u6240\u4E0D\u540C\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u7684\u5E95\u5C42\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u5B9E\u73B0\u7684\u8BED\u8A00\u7B49\u90FD\u662F\u4E0D\u540C\u7684\u3002
    \u90A3\u4E48Java\u53BB\u8FDE\u63A5\u4E0D\u540C\u7684\u6570\u636E\u5E93\u65F6\uFF0C\u5C31\u4F1A\u6709\u4E0D\u540C\u7684API\u3002\u8FD9\u6837\u7684\u8BDD\uFF0C\u5C31\u4F1A\u5BFC\u81F4\uFF1A
    \uFF081\uFF09\u7A0B\u5E8F\u5458\u7684\u5B66\u4E60\u6210\u672C\u589E\u52A0
    \uFF082\uFF09\u5982\u679C\u53D1\u751F\u6570\u636E\u5E93\u8FC1\u79FB\uFF0CJava\u4EE3\u7801\u5C31\u9700\u8981\u201C\u91CD\u5199\u201D
    \u5982\u679C\u662F\u8FD9\u6837\u7684\u8BDD\uFF0C\u5C31\u975E\u5E38\u9EBB\u70E6\uFF0C\u53EF\u79FB\u690D\u6027\u3001\u53EF\u7EF4\u62A4\u6027\u7B49\u975E\u5E38\u5DEE\u3002

SUN\u516C\u53F8\uFF08\u73B0\u5728Oracle\uFF09\u5C31\u8BF4\uFF0C\u5FC5\u987B\u7EDF\u4E00\u4E00\u5957API\uFF0C\u53EF\u4EE5\u64CD\u4F5C\u5404\u79CD\u6570\u636E\u5E93\u3002\u4F46\u662FSUN\u516C\u53F8\u53C8\u4E0D\u540C\u77E5\u9053\u6240\u6709\u6570\u636E\u5E93\u5185\u90E8\u662F\u5982\u4F55\u5B9E\u73B0\u7684\uFF0C
\u4E5F\u65E0\u6CD5\u8981\u6C42\u6240\u6709\u7684\u6570\u636E\u5E93\u5382\u5546\u6309\u7167\u7EDF\u4E00\u7684\u6807\u51C6\u6765\u5F00\u53D1\u4ED6\u4EEC\u7684\u6570\u636E\u5E93\u8F6F\u4EF6\u3002
SUN\u516C\u53F8\uFF08\u73B0\u5728Oracle\uFF09\u5C31\u8BBE\u8BA1\u4E86\u4E00\u5957\u63A5\u53E3 + \u90E8\u5206\u7C7B\u3002\u7136\u540E\u5404\u4E2A\u6570\u636E\u5E93\u5382\u5546\uFF0C\u6765\u63D0\u4F9B\u8FD9\u4E9B\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\u3002

==&gt;Java\u7A0B\u5E8F\u4E2D\u9762\u5411\u63A5\u53E3\u7F16\u7A0B\uFF0C\u5728\u7A0B\u5E8F\u8FD0\u884C\u65F6\uFF0C\u53C8\u9700\u8981\u5F15\u5165\u8FD9\u4E9B\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\uFF0C\u8FD9\u4E9B\u5B9E\u73B0\u7C7B\u5C31\u662F\u6570\u636E\u5E93\u9A71\u52A8jar\u3002



 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-2-java\u7A0B\u5E8F\u8FDE\u63A5mysql\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-2-java\u7A0B\u5E8F\u8FDE\u63A5mysql\u6570\u636E\u5E93" aria-hidden="true">#</a> 1.2 Java\u7A0B\u5E8F\u8FDE\u63A5MySQL\u6570\u636E\u5E93</h2><h3 id="_1-2-1-\u5F15\u5165mysql\u9A71\u52A8jar" tabindex="-1"><a class="header-anchor" href="#_1-2-1-\u5F15\u5165mysql\u9A71\u52A8jar" aria-hidden="true">#</a> 1.2.1 \u5F15\u5165mysql\u9A71\u52A8jar</h3><h4 id="\u65B9\u5F0F\u4E00-\u5355\u72EC\u67D0\u4E2A\u6A21\u5757\u4F7F\u7528mysql\u9A71\u52A8" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E00-\u5355\u72EC\u67D0\u4E2A\u6A21\u5757\u4F7F\u7528mysql\u9A71\u52A8" aria-hidden="true">#</a> \u65B9\u5F0F\u4E00\uFF1A\u5355\u72EC\u67D0\u4E2A\u6A21\u5757\u4F7F\u7528mysql\u9A71\u52A8</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\uFF081\uFF09\u5728\u6A21\u5757\u8DEF\u5F84\u4E0B\u5EFA\u4E00\u4E2A\u6587\u4EF6\u5939\u201Cjdbclibs\u201D\uFF0C\u628Amysql\u7684\u9A71\u52A8jar\u653E\u5230\u91CC\u9762
MySQL5.7\uFF1Amysql-connector-java-5.1.36-bin.jar
MySQL8.0\uFF1Amysql-connector-java-8.0.19.jar
\uFF082\uFF09\u5728jdbclibs\u6587\u4EF6\u5939\u4E0A\u53F3\u952E--&gt;Add as Library...
\uFF083\uFF09\u586B\u5199\u5E93\u540D\u79F0\u3001\u9009\u62E9\u8FD9\u4E2A\u5E93\u5E94\u7528\u8303\u56F4\uFF08\u6A21\u5757\uFF09--&gt;\u9009\u62E9\u4F7F\u7528\u7684\u5177\u4F53\u6A21\u5757
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://photo.sneoo.com/spring5/202207031643534.png" alt="image-20211202092540371"></p><p><img src="https://photo.sneoo.com/spring5/202207031643535.png" alt="image-20211202092647348"></p><p><img src="https://photo.sneoo.com/spring5/202207031643536.png" alt="image-20211202092753686"></p><p><img src="https://photo.sneoo.com/spring5/202207031643537.png" alt="image-20211202093214587"></p><h4 id="\u65B9\u5F0F\u4E8C-\u9879\u76EE\u4E0B\u591A\u4E2A\u6A21\u5757\u4F7F\u7528mysql\u9A71\u52A8" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E8C-\u9879\u76EE\u4E0B\u591A\u4E2A\u6A21\u5757\u4F7F\u7528mysql\u9A71\u52A8" aria-hidden="true">#</a> \u65B9\u5F0F\u4E8C\uFF1A\u9879\u76EE\u4E0B\u591A\u4E2A\u6A21\u5757\u4F7F\u7528mysql\u9A71\u52A8</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\uFF081\uFF09\u5728\u9879\u76EE\u8DEF\u5F84\u4E0B\u5EFA\u4E00\u4E2A\u6587\u4EF6\u5939\u201Cjdbclibrary\u201D\uFF0C\u628Amysql\u7684\u9A71\u52A8jar\u653E\u5230\u91CC\u9762
mysql-connector-java-5.1.36-bin.jar
MySQL8.0\uFF1Amysql-connector-java-8.0.19.jar
\uFF082\uFF09\u9879\u76EE\u8BBE\u7F6E--&gt;libraries--&gt; + -&gt;java--&gt;\u6587\u4EF6\u5939\u201Cjdbclibs\u201D
\uFF083\uFF09\u9009\u62E9\u9700\u8981\u8FD9\u4E2Ajar\u7684\u6A21\u5757
\u9879\u76EE\u8BBE\u7F6E--&gt;modules--&gt;\u6A21\u5757\u540D--&gt;dependencies--&gt; + - &gt;library-&gt;Java -&gt; \u5E93
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://photo.sneoo.com/spring5/202207031643538.png" alt="image-20211202093347997"></p><p><img src="https://photo.sneoo.com/spring5/202207031643539.png" alt="image-20211202093617691"></p><p><img src="https://photo.sneoo.com/spring5/202207031643540.png" alt="image-20211202093701544"></p><p><img src="https://photo.sneoo.com/spring5/202207031643541.png" alt="image-20211202093805579"></p><p><img src="https://photo.sneoo.com/spring5/202207031643542.png" alt="image-20211202093956500"></p><p><img src="https://photo.sneoo.com/spring5/202207031643543.png" alt="image-20211202093928392"></p><p>\u540E\u671F\u5176\u4ED6\u6A21\u5757\u4E5F\u8981\u4F7F\u7528mysql\u9A71\u52A8\uFF0C\u53EF\u4EE5\u76F4\u63A5\u6DFB\u52A0\u9879\u76EE\u7684jdbclibrary\u5E93\u5373\u53EF\uFF1A</p><p><img src="https://photo.sneoo.com/spring5/202207031643544.png" alt="image-20211202094105115"></p><p><img src="https://photo.sneoo.com/spring5/202207031643545.png" alt="image-20211202094128771"></p><p><img src="https://photo.sneoo.com/spring5/202207031643546.png" alt="image-20211202094156051"></p><h4 id="\u65B9\u5F0F\u4E09-\u4F7F\u7528maven\u4ED3\u5E93-\u540E\u671F\u5927\u5BB6\u5B66\u4E60" tabindex="-1"><a class="header-anchor" href="#\u65B9\u5F0F\u4E09-\u4F7F\u7528maven\u4ED3\u5E93-\u540E\u671F\u5927\u5BB6\u5B66\u4E60" aria-hidden="true">#</a> \u65B9\u5F0F\u4E09\uFF1A\u4F7F\u7528Maven\u4ED3\u5E93\uFF08\u540E\u671F\u5927\u5BB6\u5B66\u4E60\uFF09</h4><h3 id="_12-2-2-java\u4EE3\u7801\u8FDE\u63A5mysql\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_12-2-2-java\u4EE3\u7801\u8FDE\u63A5mysql\u6570\u636E\u5E93" aria-hidden="true">#</a> 12.2.2 Java\u4EE3\u7801\u8FDE\u63A5MySQL\u6570\u636E\u5E93</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*\u6B65\u9AA4\uFF1A
1\u3001\u6A21\u5757\u6DFB\u52A0\u4E86\u4F9D\u8D56\u7684mysql\u9A71\u52A8\u76F8\u5173\u5E93

2\u3001\u5728\u5185\u5B58\u4E2D\u52A0\u8F7D\u9A71\u52A8\u7C7B\uFF08\u53EF\u9009\uFF09
        \u66F4\u65E9\u7248\u672Cmysql\u9A71\u52A8\u7C7B\uFF1Aorg.gjt.mm.mysql.Driver
        \u6700\u8FD1\u7248\u672C\uFF1Acom.mysql.jdbc.Driver
        MySQL8.0\u7248\u672C\uFF1Acom.mysql.cj.jdbc.Driver
 
  //\u65B0\u7248\u7684mysql\u9A71\u52A8jar\u53EF\u4EE5\u7701\u7565\u8FD9\u6B65\uFF0C\u65E7\u7248\u7684mysql\u9A71\u52A8jar\u5FC5\u987B\u52A0\u8FD9\u4E00\u6B65\u3002
  // \u56E0\u4E3A\u65B0\u7248mysql\u9A71\u52A8jar\u5305\u4E0B\u6709\u4E00\u4E2AMETA-INF/services/java.sql.Driver\u6587\u4EF6
  //\u91CC\u9762\u6709\u586B\u5199mysql\u9A71\u52A8\u7C7B\u7684\u5168\u540D\u79F0\uFF0CDriverManager\u4F1A\u81EA\u52A8\u8BFB\u53D6\u8FD9\u4E2A\u6587\u4EF6\uFF0C\u5E76\u52A0\u8F7D\u5BF9\u5E94\u7684\u9A71\u52A8\u7C7B
  //\u540E\u671F\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C\u6216\u8005MyBatis\u7B49\u6846\u67B6\u65F6\uFF0C\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u52A0\u8FD9\u4E2A\u9A71\u52A8\u7C7B\u7684\u914D\u7F6E\u5373\u53EF
 Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); 

3\u3001\u8FDE\u63A5\u6570\u636E\u5E93\uFF1A\u901A\u8FC7DriverManager\u5DE5\u5177\u7C7B\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5Connection\u7684\u5BF9\u8C61\u3002
\u6B64\u65F6\u7684Java\u7A0B\u5E8F\u662FMySQL\u7684\u4E00\u4E2A\u5BA2\u6237\u7AEF
\u8FDE\u63A5\u6570\u636E\u5E93\uFF1A
     MySQL\u670D\u52A1\u5668\u4E3B\u673A\u7684IP\u5730\u5740\uFF1A
     \u7AEF\u53E3\u53F7
     \u7528\u6237\u540D
     \u5BC6\u7801
\u7F51\u5740\uFF1Ahttp://www.atguigu.com

    String url = &quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;;
    Connection conn = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;);
    
    MySQL8\u4F7F\u7528\u65F6\uFF0Curl\u9700\u8981\u52A0\u53C2\u6570\uFF1AserverTimezone=UTC\uFF0C\u5426\u5219\u4F1A\u62A5\u9519\uFF1A
    Exception in thread &quot;main&quot; java.sql.SQLException: The server time zone value &#39;\uFFFD\u0439\uFFFD\uFFFD\uFFFD\u05FC\u02B1\uFFFD\uFFFD&#39; is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the &#39;serverTimezone&#39; configuration property) to use a more specifc time zone value if you want to utilize time zone support.


4\u3001\u65AD\u5F00\u8FDE\u63A5\uFF1A\u4F7F\u7528close\u65B9\u6CD5\u3002
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://photo.sneoo.com/spring5/202207031643547.png" alt="image-20211202095222692"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>jdbc</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJDBC</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span>  <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;conn = &quot;</span> <span class="token operator">+</span> conn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-3-\u5B9E\u73B0\u589E\u5220\u6539\u67E5" tabindex="-1"><a class="header-anchor" href="#_1-3-\u5B9E\u73B0\u589E\u5220\u6539\u67E5" aria-hidden="true">#</a> 1.3 \u5B9E\u73B0\u589E\u5220\u6539\u67E5</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*\u6B65\u9AA4\uFF1A
1\u3001\u6A21\u5757\u6DFB\u52A0\u4E86\u4F9D\u8D56\u7684mysql\u9A71\u52A8\u76F8\u5173\u5E93

2\u3001\u5728\u5185\u5B58\u4E2D\u52A0\u8F7D\u9A71\u52A8\u7C7B\uFF08\u53EF\u9009\uFF09
 Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); 

3\u3001\u8FDE\u63A5\u6570\u636E\u5E93
\u901A\u8FC7DriverManager\u5DE5\u5177\u7C7B\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5Connection\u7684\u5BF9\u8C61\u3002
    String url = &quot;jdbc:mysql://localhost:3306/test?serverTimezone=UTC&quot;;
    Connection conn = DriverManager.getConnection(url, &quot;root&quot;, &quot;123456&quot;);

 4\u3001\u64CD\u4F5C\u6570\u636E\u5E93
\uFF081\uFF09\u901A\u8FC7Connection\u5BF9\u8C61\u83B7\u53D6Statement\u6216PreparedStatement\u5BF9\u8C61
\uFF082\uFF09\u901A\u8FC7Statement\u6216PreparedStatement\u5BF9\u8C61\u6267\u884Csql
\u6267\u884C\u589E\u3001\u5220\u3001\u6539\uFF1Aint executeUpate()
\u6267\u884C\u67E5\u8BE2\uFF1AResultSet executeQuery()
\uFF083\uFF09\u5982\u679C\u670D\u52A1\u5668\u6709\u67E5\u8BE2\u7ED3\u679C\u8FD4\u56DE\uFF0C\u9700\u8981\u7528ResultSet\u63A5\u6536
\u904D\u5386\u7ED3\u679C\u96C6\u7684\u65B9\u6CD5\uFF1A
boolean next()\uFF1A\u5224\u65AD\u662F\u5426\u8FD8\u6709\u4E0B\u4E00\u884C
getString(\u5B57\u6BB5\u540D\u6216\u5E8F\u53F7),getInt(\u5B57\u6BB5\u540D\u6216\u5E8F\u53F7),getObject(\u5B57\u6BB5\u540D\u6216\u5E8F\u53F7)

5\u3001\u91CA\u653E\u8D44\u6E90\uFF08close\uFF09
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-1-\u6DFB\u52A0\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_1-3-1-\u6DFB\u52A0\u6570\u636E" aria-hidden="true">#</a> 1.3.1 \u6DFB\u52A0\u6570\u636E</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u7528JDBC\u5B9E\u73B0\u6DFB\u52A0\u4E00\u6761\u8BB0\u5F55\u5230atguigu\u6570\u636E\u5E93\u7684t_department\u8868\u4E2D\u3002

mysql&gt; desc t_department;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| did         | int          | NO   | PRI | NULL    | auto_increment |
| dname       | varchar(20)  | NO   | UNI | NULL    |                |
| description | varchar(200) | YES  |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+
3 rows in set (0.01 sec)


mysql&gt; select * from t_department;
+-----+--------+------------------+
| did | dname  | description      |
+-----+--------+------------------+
|   1 | \u7814\u53D1\u90E8 | \u8D1F\u8D23\u7814\u53D1\u5DE5\u4F5C     |
|   2 | \u4EBA\u4E8B\u90E8 | \u8D1F\u8D23\u4EBA\u4E8B\u7BA1\u7406\u5DE5\u4F5C |
|   3 | \u5E02\u573A\u90E8 | \u8D1F\u8D23\u5E02\u573A\u63A8\u5E7F\u5DE5\u4F5C |
|   4 | \u8D22\u52A1\u90E8 | \u8D1F\u8D23\u8D22\u52A1\u7BA1\u7406\u5DE5\u4F5C |
|   5 | \u540E\u52E4\u90E8 | \u8D1F\u8D23\u540E\u52E4\u4FDD\u969C\u5DE5\u4F5C |
|   6 | \u6D4B\u8BD5\u90E8 | \u8D1F\u8D23\u6D4B\u8BD5\u5DE5\u4F5C     |
+-----+--------+------------------+
6 rows in set (0.00 sec)

\u6B65\u9AA4\uFF1A
1\u3001\u4E00\u4E2A\u9879\u76EE\u5F15\u5165\u4E00\u6B21\u6570\u636E\u5E93\u9A71\u52A8jar\u5C31\u53EF\u4EE5
2\u3001\u5EFA\u7ACB\u6570\u636E\u5E93\u8FDE\u63A5
\uFF081\uFF09\u52A0\u8F7D\u9A71\u52A8\u7C7B\uFF1A\u901A\u8FC7Class\u7C7B\u7684forName\u65B9\u6CD5\u6CE8\u518C\u9A71\u52A8
\uFF082\uFF09\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5
\u901A\u8FC7DriverManager\u7C7B\u7684\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61
3\u3001\u901A\u8FC7\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u83B7\u53D6Statement\u6216PreparedStatement\u5BF9\u8C61\uFF0C\u7528\u6765\u6267\u884Csql
4\u3001\u901A\u8FC7Statement\u6216PreparedStatement\u5BF9\u8C61\u8C03\u7528
\uFF081\uFF09int executeUpdate()\uFF1A\u6267\u884Cinsert,update,delete\u7B49\u66F4\u65B0\u6570\u636E\u5E93\u6570\u636E\u7684sql

5\u3001\u5173\u95ED\uFF0C\u91CA\u653E\u5404\u79CD\u8D44\u6E90
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestInsert</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,&#39;\u6D4B\u8BD5\u6570\u636E\u90E8\u95E8&#39;,&#39;\u6D4B\u8BD5\u6570\u636E\u90E8\u95E8\u7B80\u4ECB&#39;)&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u53D1\u7ED9\u670D\u52A1\u5668\u7684sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO\u6D41  \u7F51\u7EDC\u7F16\u7A0B\u7684socket.getOutputStream()\u53D1\u751F\u6570\u636E\u7528\u7684</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DEsql\u5F71\u54CD\u7684\u8BB0\u5F55\u6570</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u6DFB\u52A0\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DFB\u52A0\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
mysql&gt; select * from t_department;
+-----+--------------+------------------+
| did | dname        | description      |
+-----+--------------+------------------+
|   1 | \u7814\u53D1\u90E8       | \u8D1F\u8D23\u7814\u53D1\u5DE5\u4F5C     |
|   2 | \u4EBA\u4E8B\u90E8       | \u8D1F\u8D23\u4EBA\u4E8B\u7BA1\u7406\u5DE5\u4F5C |
|   3 | \u5E02\u573A\u90E8       | \u8D1F\u8D23\u5E02\u573A\u63A8\u5E7F\u5DE5\u4F5C |
|   4 | \u8D22\u52A1\u90E8       | \u8D1F\u8D23\u8D22\u52A1\u7BA1\u7406\u5DE5\u4F5C |
|   5 | \u540E\u52E4\u90E8       | \u8D1F\u8D23\u540E\u52E4\u4FDD\u969C\u5DE5\u4F5C |
|   6 | \u6D4B\u8BD5\u90E8       | \u8D1F\u8D23\u6D4B\u8BD5\u5DE5\u4F5C     |
|   7 | \u6D4B\u8BD5\u6570\u636E\u90E8\u95E8 | \u6D4B\u8BD5\u6570\u636E\u90E8\u95E8\u7B80\u4ECB |
+-----+--------------+------------------+
7 rows in set (0.00 sec)
         */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-2-\u4FEE\u6539\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_1-3-2-\u4FEE\u6539\u6570\u636E" aria-hidden="true">#</a> 1.3.2 \u4FEE\u6539\u6570\u636E</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUpdate</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = &#39;xx&#39; where did = 7&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u53D1\u7ED9\u670D\u52A1\u5668\u7684sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO\u6D41  \u7F51\u7EDC\u7F16\u7A0B\u7684socket.getOutputStream()\u53D1\u751F\u6570\u636E\u7528\u7684</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DEsql\u5F71\u54CD\u7684\u8BB0\u5F55\u6570</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u4FEE\u6539\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4FEE\u6539\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
mysql&gt; select * from t_department;
+-----+--------------+------------------+
| did | dname        | description      |
+-----+--------------+------------------+
|   1 | \u7814\u53D1\u90E8       | \u8D1F\u8D23\u7814\u53D1\u5DE5\u4F5C     |
|   2 | \u4EBA\u4E8B\u90E8       | \u8D1F\u8D23\u4EBA\u4E8B\u7BA1\u7406\u5DE5\u4F5C |
|   3 | \u5E02\u573A\u90E8       | \u8D1F\u8D23\u5E02\u573A\u63A8\u5E7F\u5DE5\u4F5C |
|   4 | \u8D22\u52A1\u90E8       | \u8D1F\u8D23\u8D22\u52A1\u7BA1\u7406\u5DE5\u4F5C |
|   5 | \u540E\u52E4\u90E8       | \u8D1F\u8D23\u540E\u52E4\u4FDD\u969C\u5DE5\u4F5C |
|   6 | \u6D4B\u8BD5\u90E8       | \u8D1F\u8D23\u6D4B\u8BD5\u5DE5\u4F5C     |
|   7 | \u6D4B\u8BD5\u6570\u636E\u90E8\u95E8 | xx               |
+-----+--------------+------------------+
7 rows in set (0.00 sec)
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-3-\u5220\u9664\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_1-3-3-\u5220\u9664\u6570\u636E" aria-hidden="true">#</a> 1.3.3 \u5220\u9664\u6570\u636E</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDelete</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_department where did = 7&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u53D1\u7ED9\u670D\u52A1\u5668\u7684sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO\u6D41  \u7F51\u7EDC\u7F16\u7A0B\u7684socket.getOutputStream()\u53D1\u751F\u6570\u636E\u7528\u7684</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD4\u56DEsql\u5F71\u54CD\u7684\u8BB0\u5F55\u6570</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u5220\u9664\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5220\u9664\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
mysql&gt; select * from t_department;
+-----+--------+------------------+
| did | dname  | description      |
+-----+--------+------------------+
|   1 | \u7814\u53D1\u90E8 | \u8D1F\u8D23\u7814\u53D1\u5DE5\u4F5C     |
|   2 | \u4EBA\u4E8B\u90E8 | \u8D1F\u8D23\u4EBA\u4E8B\u7BA1\u7406\u5DE5\u4F5C |
|   3 | \u5E02\u573A\u90E8 | \u8D1F\u8D23\u5E02\u573A\u63A8\u5E7F\u5DE5\u4F5C |
|   4 | \u8D22\u52A1\u90E8 | \u8D1F\u8D23\u8D22\u52A1\u7BA1\u7406\u5DE5\u4F5C |
|   5 | \u540E\u52E4\u90E8 | \u8D1F\u8D23\u540E\u52E4\u4FDD\u969C\u5DE5\u4F5C |
|   6 | \u6D4B\u8BD5\u90E8 | \u8D1F\u8D23\u6D4B\u8BD5\u5DE5\u4F5C     |
+-----+--------+------------------+
6 rows in set (0.00 sec)
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-4-\u67E5\u8BE2\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_1-3-4-\u67E5\u8BE2\u6570\u636E" aria-hidden="true">#</a> 1.3.4 \u67E5\u8BE2\u6570\u636E</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>crud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u6B65\u9AA4\uFF1A
1\u3001\u4E00\u4E2A\u9879\u76EE\u5F15\u5165\u4E00\u6B21\u6570\u636E\u5E93\u9A71\u52A8jar\u5C31\u53EF\u4EE5
2\u3001\u5EFA\u7ACB\u6570\u636E\u5E93\u8FDE\u63A5
\uFF081\uFF09\u52A0\u8F7D\u9A71\u52A8\u7C7B\uFF1A\u901A\u8FC7Class\u7C7B\u7684forName\u65B9\u6CD5\u6CE8\u518C\u9A71\u52A8
\uFF082\uFF09\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5
\u901A\u8FC7DriverManager\u7C7B\u7684\u9759\u6001\u65B9\u6CD5\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61
3\u3001\u901A\u8FC7\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u83B7\u53D6Statement\u6216PreparedStatement\u5BF9\u8C61\uFF0C\u7528\u6765\u6267\u884Csql
4\u3001\u901A\u8FC7Statement\u6216PreparedStatement\u5BF9\u8C61\u8C03\u7528
\uFF081\uFF09int executeUpdate()\uFF1A\u6267\u884Cinsert,update,delete\u7B49\u66F4\u65B0\u6570\u636E\u5E93\u6570\u636E\u7684sql
\uFF082\uFF09ResultSet executeQuery()\uFF1A\u6267\u884Cselect\u67E5\u8BE2\u7684sql\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u7ED3\u679C\u96C6
\uFF083\uFF09boolean execute()\uFF1A\u53EF\u4EE5\u7528\u6765\u6267\u884CDDL\u8BED\u53E5


\u904D\u5386\u7ED3\u679C\u96C6ResultSet\u7684\u65B9\u6CD5\uFF1A
boolean next()\uFF1A\u5224\u65AD\u662F\u5426\u8FD8\u6709\u4E0B\u4E00\u884C
getString(\u5B57\u6BB5\u540D\u6216\u5E8F\u53F7),getInt(\u5B57\u6BB5\u540D\u6216\u5E8F\u53F7),getObject(\u5B57\u6BB5\u540D\u6216\u5E8F\u53F7)

5\u3001\u5173\u95ED\uFF0C\u91CA\u653E\u5404\u79CD\u8D44\u6E90
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSelect</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_department&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u53D1\u7ED9\u670D\u52A1\u5668\u7684sql</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//PreparedStatement ==&gt; IO\u6D41  \u7F51\u7EDC\u7F16\u7A0B\u7684socket.getOutputStream()\u53D1\u751F\u6570\u636E\u7528\u7684</span>

        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//==&gt;IO\u6D41  \u8F93\u5165\u6D41\uFF0C\u53C8\u50CF\u662F\u96C6\u5408\u548C\u8FED\u4EE3\u5668\u7684\u96C6\u6210</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//while\u5FAA\u73AF\u4E00\u6B21\uFF0C\u8FED\u4EE3\u4E00\u884C\uFF0C\u904D\u5386\u4E00\u884C</span>
            <span class="token keyword">int</span> did <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;did&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//get\u4E00\u6B21\u5F97\u5230\u4E00\u4E2A\u5355\u5143\u683C\u7684\u6570\u636E</span>
            <span class="token class-name">String</span> dname <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;dname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> decription <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;description&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>did <span class="token operator">+</span><span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> dname <span class="token operator">+</span><span class="token string">&quot;\\t&quot;</span> <span class="token operator">+</span> decription<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E8C\u7AE0-\u8F7B\u677E\u5904\u7406\u5404\u79CD\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E8C\u7AE0-\u8F7B\u677E\u5904\u7406\u5404\u79CD\u95EE\u9898" aria-hidden="true">#</a> \u7B2C\u4E8C\u7AE0 \u8F7B\u677E\u5904\u7406\u5404\u79CD\u95EE\u9898</h1><h2 id="_2-1-\u907F\u514Dsql\u62FC\u63A5\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_2-1-\u907F\u514Dsql\u62FC\u63A5\u95EE\u9898" aria-hidden="true">#</a> 2.1 \u907F\u514Dsql\u62FC\u63A5\u95EE\u9898</h2><h3 id="\u51C6\u5907\u4EE3\u7801\u548Csql" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u4EE3\u7801\u548Csql" aria-hidden="true">#</a> \u51C6\u5907\u4EE3\u7801\u548Csql</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>        Scanner input = new Scanner(System.in);
        System.out.print(&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;);
        String ename = input.next();//\u674E\u56DB

        System.out.print(&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;);
        double salary = input.nextDouble();//15000

        System.out.print(&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;);
        String birthday = input.next();//1990-1-1

        System.out.print(&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;);
        char gender = input.next().charAt(0);//\u7537

        System.out.print(&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;);
        String tel = input.next();//13578595685

        System.out.print(&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;);
        String email = input.next();//zhangsan@atguigu.com
        
        input.close();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(\u503C\u5217\u8868);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u6F14\u793A\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6F14\u793A\u4EE3\u7801" aria-hidden="true">#</a> \u95EE\u9898\u6F14\u793A\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u907F\u514Dsql\u62FC\u63A5\u95EE\u9898

\u6F14\u793A\uFF1A\u4ECE\u952E\u76D8\u8F93\u5165\u6570\u636E\uFF0C\u5B58\u50A8\u5230atguigu\u6570\u636E\u5E93\u7684t_employee\u8868\u4E2D\u3002

mysql&gt; desc t_employee;
+----------------+----------------------------------+------+-----+---------+----------------+
| Field          | Type                             | Null | Key | Default | Extra          |
+----------------+----------------------------------+------+-----+---------+----------------+
| eid            | int                              | NO   | PRI | NULL    | auto_increment |
| ename          | varchar(20)                      | NO   |     | NULL    |                |
| salary         | double                           | NO   |     | NULL    |                |
| commission_pct | decimal(3,2)                     | YES  |     | NULL    |                |
| birthday       | date                             | NO   |     | NULL    |                |
| gender         | enum(&#39;\u7537&#39;,&#39;\u5973&#39;)                  | NO   |     | \u7537      |                |
| tel            | char(11)                         | NO   |     | NULL    |                |
| email          | varchar(32)                      | NO   |     | NULL    |                |
| address        | varchar(150)                     | YES  |     | NULL    |                |
| work_place     | set(&#39;\u5317\u4EAC&#39;,&#39;\u6DF1\u5733&#39;,&#39;\u4E0A\u6D77&#39;,&#39;\u6B66\u6C49&#39;) | NO   |     | \u5317\u4EAC    |                |
| hiredate       | date                             | NO   |     | NULL    |                |
| job_id         | int                              | YES  | MUL | NULL    |                |
| mid            | int                              | YES  | MUL | NULL    |                |
| did            | int                              | YES  | MUL | NULL    |                |
+----------------+----------------------------------+------+-----+---------+----------------+
14 rows in set (0.00 sec)


PreparedStatement\u63A5\u53E3\u662FStatement\u63A5\u53E3\u7684\u5B50\u63A5\u53E3\u7684\u3002
Statement\u63A5\u53E3\u662F\u4E0D\u652F\u6301 \uFF1F \u5F62\u5F0F\u7684sql\uFF0C\u53EA\u80FD\u62FC\u63A5\u3002
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSQLConcat</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7537</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token comment">//\u7ED9t_employee\u8868\u4E2D\u7684\u6709\u975E\u7A7A\u7EA6\u675F\u7684\u5B57\u6BB5\u8D4B\u503C\uFF0C\u56E0\u4E3Awork_place\u6709\u9ED8\u8BA4\u503C\uFF0C\u8FD9\u91CC\u5C31\u6CA1\u6709\u7BA1\u5B83</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;&#39;&quot;</span> <span class="token operator">+</span> ename <span class="token operator">+</span><span class="token string">&quot;&#39;,&quot;</span> <span class="token operator">+</span> <span class="token comment">//\u8FD9\u91CC\u7684&#39;\uFF0C\u662Fmysql\u4E2D\u8868\u793A\u5B57\u7B26\u4E32\u548C\u65E5\u671F\u7684\u5355\u5F15\u53F7</span>
                salary <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;&#39;&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span><span class="token string">&quot;&#39;,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;&#39;&quot;</span> <span class="token operator">+</span> gender <span class="token operator">+</span><span class="token string">&quot;&#39;,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;&#39;&quot;</span> <span class="token operator">+</span> tel <span class="token operator">+</span><span class="token string">&quot;&#39;,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;&#39;&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span><span class="token string">&quot;&#39;,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;curdate()&quot;</span> <span class="token operator">+</span>   <span class="token comment">//mysql\u4E2D\u65E5\u671F\u51FD\u6570\uFF0C\u83B7\u53D6\u5F53\u524D\u7CFB\u7EDF\u65F6\u95F4</span>
                <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//C\uFF1A\u901A\u8FC7\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u83B7\u53D6PreparedStatement\u5BF9\u8C61</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//D\uFF1A\u6267\u884Csql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u6DFB\u52A0\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DFB\u52A0\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//E\uFF1A\u91CA\u653E\u8FDE\u63A5\u7B49\u8D44\u6E90</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7537</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token comment">//\u7ED9t_employee\u8868\u4E2D\u7684\u6709\u975E\u7A7A\u7EA6\u675F\u7684\u5B57\u6BB5\u8D4B\u503C\uFF0C\u56E0\u4E3Awork_place\u6709\u9ED8\u8BA4\u503C\uFF0C\u8FD9\u91CC\u5C31\u6CA1\u6709\u7BA1\u5B83</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD9\u91CC\u7684\uFF1F\u5C31\u50CF\u5360\u4F4D\u7B26\uFF0C\u8868\u793A\u8981\u7ED9\u51E0\u4E2A\u5B57\u6BB5\u8D4B\u503C</span>
        <span class="token comment">//C\uFF1A\u901A\u8FC7\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u83B7\u53D6PreparedStatement\u5BF9\u8C61</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6B64\u65F6\u5BF9sql\u8FDB\u884C\u9884\u7F16\u8BD1\uFF0C\u91CC\u9762\u662F\u5E26\uFF1F\u7684</span>

        <span class="token comment">//\u8981\u7ED9\u6BCF\u4E00\u4E2A\uFF1F\u6307\u5B9A\u5177\u4F53\u7684\u503C</span>
        <span class="token comment">/*
        PreparedStatement\u652F\u6301\u7ED9\u6BCF\u4E00\u4E2A\u5B57\u6BB5\u6307\u5B9A\u503C\u65F6\uFF0C\u786E\u5B9A\u6570\u636E\u7C7B\u578B\uFF0C\u4F8B\u5982\uFF1A
        pst.setString(1,ename);
        pst.setDouble(2,salary);
        ...
        \u4F46\u662F\u8FD9\u6837\u6709\u70B9\u9EBB\u70E6\uFF0C\u8FD8\u8981\u4E00\u4E00\u53BB\u786E\u5B9A\u6570\u636E\u7C7B\u578B
        PreparedStatement\u652F\u6301\u7528Object\u7EDF\u4E00\u5904\u7406
        pst.setObject(1,ename);
        pst.setObject(2,salary);
         */</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76841\uFF0C\u8868\u793A\u7B2C1\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76842\uFF0C\u8868\u793A\u7B2C2\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76843\uFF0C\u8868\u793A\u7B2C3\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76844\uFF0C\u8868\u793A\u7B2C4\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76845\uFF0C\u8868\u793A\u7B2C5\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76846\uFF0C\u8868\u793A\u7B2C6\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">&quot;curdate()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76847\uFF0C\u8868\u793A\u7B2C7\u4E2A\uFF1F</span>
        <span class="token comment">//\u6BCF\u4E00\u4E2A\uFF1F\u4E0E\u4F60\u8981\u8D4B\u503C\u7684\u5B57\u6BB5\u5BF9\u5E94\uFF0C\u4E0D\u80FD\u5BF9\u9519\u4E86</span>

        <span class="token comment">//D\uFF1A\u6267\u884Csql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u6DFB\u52A0\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DFB\u52A0\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        (1)\u4E0A\u9762\u7684\u4EE3\u7801\u6267\u884C\u51FA\u9519\u4E86\uFF1Ajava.sql.SQLException: Data truncated for column &#39;gender&#39; at row 1
        \u539F\u56E0\uFF1A pst.setObject(4,gender); \u628Agender\u81EA\u52A8\u5305\u88C5\u4E3ACharacter\u5BF9\u8C61
        \u89E3\u51B3\u65B9\u6848\uFF1A\u628Achar\u7C7B\u578B\u7528String\u7C7B\u578B\u8868\u793A\u3002

        (2)com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Incorrect date value: &#39;curdate()&#39; for column &#39;hiredate&#39; at row 1
         pst.setObject(7,&quot;curdate()&quot;);  &quot;curdate()&quot;\u4EE3\u8868\u5B57\u7B26\u4E32\uFF0CsetObject\u628Acurdate()\u8BC6\u522B\u4E3A\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u800C\u4E0D\u662Fmysql\u51FD\u6570\uFF0C \u8FD9\u53E5\u4EE3\u7801\u7ED9hiredate\u5B57\u6BB5\u8D4B\u503C\u7684\u662F\u4E00\u4E2AString
        hiredate\u9700\u8981\u7684\u662F\u4E00\u4E2A\u65E5\u671F\u3002

        \u89E3\u51B3\u65B9\u6848\uFF1Apst.setObject(7, new Date());
         */</span>

        <span class="token comment">//E\uFF1A\u91CA\u653E\u8FDE\u63A5\u7B49\u8D44\u6E90</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        char gender = input.next().charAt(0);//\u7537</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7537</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token comment">//\u7ED9t_employee\u8868\u4E2D\u7684\u6709\u975E\u7A7A\u7EA6\u675F\u7684\u5B57\u6BB5\u8D4B\u503C\uFF0C\u56E0\u4E3Awork_place\u6709\u9ED8\u8BA4\u503C\uFF0C\u8FD9\u91CC\u5C31\u6CA1\u6709\u7BA1\u5B83</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD9\u91CC\u7684\uFF1F\u5C31\u50CF\u5360\u4F4D\u7B26\uFF0C\u8868\u793A\u8981\u7ED9\u51E0\u4E2A\u5B57\u6BB5\u8D4B\u503C</span>
        <span class="token comment">//C\uFF1A\u901A\u8FC7\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u83B7\u53D6PreparedStatement\u5BF9\u8C61</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6B64\u65F6\u5BF9sql\u8FDB\u884C\u9884\u7F16\u8BD1\uFF0C\u91CC\u9762\u662F\u5E26\uFF1F\u7684</span>

        <span class="token comment">//\u8981\u7ED9\u6BCF\u4E00\u4E2A\uFF1F\u6307\u5B9A\u5177\u4F53\u7684\u503C</span>
        <span class="token comment">/*
        PreparedStatement\u652F\u6301\u7ED9\u6BCF\u4E00\u4E2A\u5B57\u6BB5\u6307\u5B9A\u503C\u65F6\uFF0C\u786E\u5B9A\u6570\u636E\u7C7B\u578B\uFF0C\u4F8B\u5982\uFF1A
        pst.setString(1,ename);
        pst.setDouble(2,salary);
        ...
        \u4F46\u662F\u8FD9\u6837\u6709\u70B9\u9EBB\u70E6\uFF0C\u8FD8\u8981\u4E00\u4E00\u53BB\u786E\u5B9A\u6570\u636E\u7C7B\u578B
        PreparedStatement\u652F\u6301\u7528Object\u7EDF\u4E00\u5904\u7406
        pst.setObject(1,ename);
        pst.setObject(2,salary);
         */</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76841\uFF0C\u8868\u793A\u7B2C1\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76842\uFF0C\u8868\u793A\u7B2C2\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76843\uFF0C\u8868\u793A\u7B2C3\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76844\uFF0C\u8868\u793A\u7B2C4\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76845\uFF0C\u8868\u793A\u7B2C5\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76846\uFF0C\u8868\u793A\u7B2C6\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76847\uFF0C\u8868\u793A\u7B2C7\u4E2A\uFF1F</span>
        <span class="token comment">//\u6BCF\u4E00\u4E2A\uFF1F\u4E0E\u4F60\u8981\u8D4B\u503C\u7684\u5B57\u6BB5\u5BF9\u5E94\uFF0C\u4E0D\u80FD\u5BF9\u9519\u4E86</span>

        <span class="token comment">//D\uFF1A\u6267\u884Csql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u6DFB\u52A0\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DFB\u52A0\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        \u4E0A\u9762\u7684\u4EE3\u7801\u6267\u884C\u51FA\u9519\u4E86\uFF1Ajava.sql.SQLException: Data truncated for column &#39;gender&#39; at row 1
        \u539F\u56E0\uFF1A pst.setObject(4,gender); \u628Agender\u81EA\u52A8\u5305\u88C5\u4E3ACharacter\u5BF9\u8C61
        \u89E3\u51B3\u65B9\u6848\uFF1A\u628Achar\u7C7B\u578B\u7528String\u7C7B\u578B\u8868\u793A\u3002
         */</span>

        <span class="token comment">//E\uFF1A\u91CA\u653E\u8FDE\u63A5\u7B49\u8D44\u6E90</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-2-\u907F\u514Dsql\u6CE8\u5165\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_2-2-\u907F\u514Dsql\u6CE8\u5165\u95EE\u9898" aria-hidden="true">#</a> 2.2 \u907F\u514Dsql\u6CE8\u5165\u95EE\u9898</h2><h3 id="\u51C6\u5907\u4EE3\u7801\u548Csql-1" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u4EE3\u7801\u548Csql-1" aria-hidden="true">#</a> \u51C6\u5907\u4EE3\u7801\u548Csql</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u4F60\u8981\u67E5\u8BE2\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> id <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from t_employee where eid = \u503C;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u6F14\u793A\u4EE3\u7801-1" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6F14\u793A\u4EE3\u7801-1" aria-hidden="true">#</a> \u95EE\u9898\u6F14\u793A\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u907F\u514Dsql\u6CE8\u5165\u95EE\u9898

\u6F14\u793A\uFF1A\u4ECE\u952E\u76D8\u8F93\u5165\u5458\u5DE5\u7F16\u53F7\uFF0C\u67E5\u8BE2\u5458\u5DE5\u4FE1\u606F\u3002\u6BCF\u4E00\u4E2A\u5458\u5DE5\u90FD\u53EF\u4EE5\u8F93\u5165\u81EA\u5DF1\u7684\u7F16\u53F7\uFF0C\u67E5\u770B\u81EA\u5DF1\u7684\u4FE1\u606F\u3002
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSQLInject</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u4F60\u8981\u67E5\u8BE2\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u7B2C\u4E00\u79CD\u6B63\u5E38\u8F93\u5165\uFF1A1</span>
        <span class="token comment">// \u7B2C\u4E8C\u79CD\u6076\u610F\u8F93\u5165\uFF1A1 or 1=1  \u7B2C\u4E00\u4E2A1\u8868\u793A\u5458\u5DE5\u7F16\u53F7\uFF0C \u540E\u9762 or 1= 1\u8868\u793A\u6761\u4EF6\uFF0C\u800C1=1\u662F\u6C38\u8FDC\u6210\u7ACB\uFF0C\u5176\u4ED6\u6761\u4EF6\u5168\u90E8\u5931\u6548</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_employee where eid = &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sql = &quot;</span> <span class="token operator">+</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//select * from t_employee where eid = 1 or 1=1</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        ResultSet\u63A5\u53E3\u63D0\u4F9B\u4E86
        (1)boolean next()\uFF1A\u5224\u65AD\u662F\u5426\u6709\u4E0B\u4E00\u6761\u8BB0\u5F55
        (2)\u83B7\u53D6\u67D0\u4E2A\u5355\u5143\u683C\u7684\u6570\u636E
        String getString(\u5B57\u6BB5\u540D)
        int getInt(\u5B57\u6BB5\u540D)
        double getDouble(\u5B57\u6BB5\u540D)
        ...

        \u6709\u70B9\u9EBB\u70E6\uFF0C\u9700\u8981\u4E00\u4E00\u53BB\u5BF9\u5E94\u5B57\u6BB5\u540D
        Object getObject(\u5B57\u6BB5\u540D)
        Object getObject(\u5B57\u6BB5\u7684\u5E8F\u53F7)  \u4ECE1\u5F00\u59CB\u3002
         */</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//while\u5FAA\u73AF\u4E00\u6B21\uFF0C\u4EE3\u8868\u4E00\u884C</span>
            <span class="token comment">//t_employee\u670914\u4E2A\u5B57\u6BB5</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">14</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//for\u5FAA\u73AF\u4E00\u6B21\uFF0C\u4EE3\u8868\u4E00\u884C\u4E2D\u7684\u4E00\u4E2A\u5355\u5143\u683C</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
\u7528\u6237\u8F93\u5165 1 or 1=1\uFF0C\u76D7\u53D6\u4E86\u8868\u4E2D\u7684\u6240\u6709\u6570\u636E\u3002
1	\u5B59\u6D2A\u4EAE	28000.0	0.65	1980-10-08	\u7537	13789098765	shl@atguigu.com	\u767D\u5E99\u6751\u897F\u8857	\u5317\u4EAC,\u6DF1\u5733	2011-07-28	1	1	1
2	\u4F55\u8FDB	7001.0	0.10	1984-08-03	\u7537	13456732145	hj@atguigu.com	\u534A\u622A\u5854\u5B58	\u6DF1\u5733,\u4E0A\u6D77	2015-07-03	2	1	1
3	\u9093\u8D85\u8FDC	8000.0	null	1985-04-09	\u7537	18678973456	dcy666@atguigu.com	\u5B8F\u798F\u82D1	\u5317\u4EAC,\u6DF1\u5733,\u4E0A\u6D77,\u6B66\u6C49	2014-07-01	3	7	1
4	\u9EC4\u7199\u840C	9456.0	null	1986-09-07	\u5973	13609876789	hxm@atguigu.com	\u767D\u5E99\u6751\u4E1C\u8857	\u6DF1\u5733,\u4E0A\u6D77,\u6B66\u6C49	2015-08-08	8	22	3
5	\u9648\u6D69	8567.0	null	1978-08-02	\u7537	13409876545	ch888@atguigu.com	\u56DE\u9F99\u89C2	\u5317\u4EAC,\u6DF1\u5733,\u4E0A\u6D77	2015-01-01	3	7	1
6	\u97E9\u5E9A\u5E74	12000.0	null	1985-04-03	\u7537	18945678986	hgn@atguigu.com	\u9F99\u6CFD	\u6DF1\u5733,\u4E0A\u6D77	2015-02-02	3	2	1
7	\u8D3E\u5B9D\u7389	15700.0	0.24	1982-08-02	\u7537	15490876789	jby@atguigu.com	\u970D\u8425	\u5317\u4EAC,\u6B66\u6C49	2015-03-03	2	1	1
8	\u674E\u6668\u7199	9000.0	0.40	1983-03-02	\u5973	13587689098	lc@atguigu.com	\u4E1C\u4E09\u65D7	\u6DF1\u5733,\u4E0A\u6D77,\u6B66\u6C49	2015-01-06	4	1	1
9	\u674E\u6613\u5CF0	7897.0	null	1984-09-01	\u7537	13467676789	lyf@atguigu.com	\u897F\u5C71\u65D7	\u6B66\u6C49	2015-04-01	3	7	1
10	\u9646\u98CE	8789.0	null	1989-04-02	\u7537	13689876789	lf@atguigu.com	\u5929\u901A\u82D1\u4E00\u533A	\u5317\u4EAC	2014-09-03	2	1	1
11	\u9EC4\u51B0\u8339	15678.0	null	1983-05-07	\u5973	13787876565	hbr@atguigu.com	\u7ACB\u6C34\u6865	\u6DF1\u5733	2014-04-04	4	1	1
12	\u5B59\u7EA2\u6885	9000.0	null	1986-04-02	\u5973	13576234554	shm@atguigu.com	\u7ACB\u57CE\u82D1	\u4E0A\u6D77	2014-02-08	3	7	1
13	\u674E\u51B0\u51B0	18760.0	null	1987-04-09	\u5973	13790909887	lbb@atguigu.com	\u738B\u5E9C\u6E29\u99A8\u516C\u5BD3	\u5317\u4EAC	2015-06-07	3	2	1
14	\u8C22\u5409\u5A1C	18978.0	0.25	1990-01-01	\u5973	13234543245	xjn@atguigu.com	\u56ED\u4E2D\u56ED	\u4E0A\u6D77,\u6B66\u6C49	2015-09-05	5	14	2
15	\u8463\u5409\u7965	8978.0	null	1987-05-05	\u7537	13876544333	djx@atguigu.com	\u5C0F\u8F9B\u5E84	\u5317\u4EAC,\u4E0A\u6D77	2015-08-04	6	14	2
16	\u5F6D\u8D85\u8D8A	9878.0	null	1988-03-06	\u7537	18264578930	pcy@atguigu.com	\u897F\u4E8C\u65D7	\u6DF1\u5733,\u6B66\u6C49	2015-03-06	8	22	3
17	\u674E\u8BD7\u96E8	9000.0	null	1990-08-09	\u5973	18567899098	lsy@atguigu.com	\u6E05\u6CB3	\u5317\u4EAC,\u6DF1\u5733,\u6B66\u6C49	2013-06-09	8	22	3
18	\u8212\u6DC7\u683C	16788.0	0.10	1978-09-04	\u5973	18654565634	sqg@atguigu.com	\u540D\u6D41\u82B1\u56ED	\u5317\u4EAC,\u6DF1\u5733,\u6B66\u6C49	2013-04-05	9	18	4
19	\u5468\u65ED\u98DE	7876.0	null	1988-06-13	\u5973	13589893434	sxf@atguigu.com	\u5C0F\u6C64\u5C71	\u5317\u4EAC,\u6DF1\u5733	2014-04-07	10	18	4
20	\u7AE0\u5609\u6021	15099.0	0.10	1989-12-11	\u5973	15634238979	zjy@atguigu.com	\u671B\u90FD\u5BB6\u56ED	\u5317\u4EAC	2015-08-04	11	20	5
21	\u767D\u9732	9787.0	null	1989-09-04	\u5973	18909876789	bl@atguigu.com	\u897F\u6E56\u65B0\u6751	\u4E0A\u6D77	2014-06-05	12	20	5
22	\u5218\u70E8	13099.0	0.32	1990-11-09	\u7537	18890980989	ly@atguigu.com	\u591A\u5F69\u516C\u5BD3	\u5317\u4EAC,\u4E0A\u6D77	2016-08-09	7	22	3
23	\u9648\u7EB2	13090.0	null	1990-02-04	\u7537	18712345632	cg@atguigu.com	\u5929\u901A\u82D1\u4E8C\u533A	\u6DF1\u5733	2016-05-09	3	2	1
24	\u5409\u65E5\u683C\u52D2	10289.0	null	1990-04-01	\u7537	17290876543	jrgl@163.com	\u5317\u82D1	\u5317\u4EAC	2017-02-06	12	20	5
25	\u989D\u65E5\u53E4\u90A3	9087.0	null	1989-08-01	\u5973	18709675645	ergn@atguigu.com	\u671B\u4EAC	\u5317\u4EAC,\u4E0A\u6D77	2017-09-01	3	2	1
26	\u674E\u7EA2	5000.0	null	1995-02-15	\u5973	15985759663	lihong@atguigu.com	\u51A0\u96C5\u82D1	\u5317\u4EAC	2021-09-01	null	null	null
27	\u5468\u6D32	8000.0	null	1990-01-01	\u7537	13574528569	zhouzhou@atguigu.com	\u51A0\u534E\u82D1	\u5317\u4EAC,\u6DF1\u5733	2020-08-15	3	2	null
28	\u5F20\u4E09	15000.0	null	1999-05-05	\u7537	10086	zhangsan@atguigu.com	null	\u5317\u4EAC	2021-12-03	null	null	null
29	\u674E\u56DB	14000.0	null	2000-09-09	\u5973	10010	lisi@atguigu.com	null	\u5317\u4EAC	2021-12-03	null	null	null

 */</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u4F60\u8981\u67E5\u8BE2\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u7B2C\u4E00\u79CD\u6B63\u5E38\u8F93\u5165\uFF1A1</span>
        <span class="token comment">// \u7B2C\u4E8C\u79CD\u6076\u610F\u8F93\u5165\uFF1A1 or 1=1  \u7B2C\u4E00\u4E2A1\u8868\u793A\u5458\u5DE5\u7F16\u53F7\uFF0C \u540E\u9762 or 1= 1\u8868\u793A\u6761\u4EF6\uFF0C\u800C1=1\u662F\u6C38\u8FDC\u6210\u7ACB\uFF0C\u5176\u4ED6\u6761\u4EF6\u5168\u90E8\u5931\u6548</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_employee where eid = ? &quot;</span><span class="token punctuation">;</span><span class="token comment">//\u4E0D\u7528\u62FC\u63A5\u4E86</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u7ED9\uFF1F\u6307\u5B9A\u503C</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u56E0\u4E3A\u8FD9\u91CC\u628A &quot;2 or 1=1&quot;\u5F53\u6210\u4E00\u4E2A\u6574\u4F53\u8D4B\u503C\u7ED9eid</span>
        <span class="token comment">//select * from t_employee where eid = &#39;2 or 1=1&#39;;</span>
        <span class="token comment">/*
        eid\u5B57\u6BB5\u662Fint\u7C7B\u578B\uFF0Cmysql\u5728\u89E3\u6790\u65F6\uFF0C\u53D1\u73B0\u7ED9eid\u8D4B\u503C\u4E86\u5B57\u7B26\u4E32\uFF0C\u4F1A\u628A\u5B57\u7B26\u4E32\u5C3D\u91CF\u8F6C\u4E3Aint\u7C7B\u578B\u7684\u503C\u3002
        SELECT &#39;2 or 1=1&#39;+0;  \u5F97\u5230\u7ED3\u679C\u662F2\u3002
        select * from t_employee where eid = &#39;2 or 1=1&#39;;
        \u7B49\u4EF7\u4E8E
        select * from t_employee where eid = 2;
         */</span>

        <span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        ResultSet\u63A5\u53E3\u63D0\u4F9B\u4E86
        (1)boolean next()\uFF1A\u5224\u65AD\u662F\u5426\u6709\u4E0B\u4E00\u6761\u8BB0\u5F55
        (2)\u83B7\u53D6\u67D0\u4E2A\u5355\u5143\u683C\u7684\u6570\u636E
        String getString(\u5B57\u6BB5\u540D)
        int getInt(\u5B57\u6BB5\u540D)
        double getDouble(\u5B57\u6BB5\u540D)
        ...

        \u6709\u70B9\u9EBB\u70E6\uFF0C\u9700\u8981\u4E00\u4E00\u53BB\u5BF9\u5E94\u5B57\u6BB5\u540D
        Object getObject(\u5B57\u6BB5\u540D)
        Object getObject(\u5B57\u6BB5\u7684\u5E8F\u53F7)  \u4ECE1\u5F00\u59CB\u3002
         */</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//while\u5FAA\u73AF\u4E00\u6B21\uFF0C\u4EE3\u8868\u4E00\u884C</span>
            <span class="token comment">//t_employee\u670914\u4E2A\u5B57\u6BB5</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">14</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//for\u5FAA\u73AF\u4E00\u6B21\uFF0C\u4EE3\u8868\u4E00\u884C\u4E2D\u7684\u4E00\u4E2A\u5355\u5143\u683C</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-3-\u4F7F\u7528\u5B57\u8282io\u6D41\u8BFB\u53D6\u56FE\u7247\u7B49\u7ED9blob\u7B49\u4E8C\u8FDB\u5236\u7C7B\u578B\u6570\u636E\u8D4B\u503C" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4F7F\u7528\u5B57\u8282io\u6D41\u8BFB\u53D6\u56FE\u7247\u7B49\u7ED9blob\u7B49\u4E8C\u8FDB\u5236\u7C7B\u578B\u6570\u636E\u8D4B\u503C" aria-hidden="true">#</a> 2.3 \u4F7F\u7528\u5B57\u8282IO\u6D41\u8BFB\u53D6\u56FE\u7247\u7B49\u7ED9blob\u7B49\u4E8C\u8FDB\u5236\u7C7B\u578B\u6570\u636E\u8D4B\u503C</h2><h3 id="\u51C6\u5907\u4EE3\u7801\u548Csql-2" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u4EE3\u7801\u548Csql-2" aria-hidden="true">#</a> \u51C6\u5907\u4EE3\u7801\u548Csql</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u5BC6\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u9009\u62E9\u7167\u7247\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD9\u91CC\u6CA1\u6709\u56FE\u5F62\u5316\u754C\u9762\uFF0C\u53EA\u80FD\u8F93\u5165\u8DEF\u5F84\uFF0C\u901A\u8FC7IO\u6D41\u8BFB\u53D6\u56FE\u7247\u7684\u5185\u5BB9</span>
        
		input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE \`t_user\` (
  \`id\` int(11) NOT NULL AUTO_INCREMENT,
  \`username\` varchar(20) NOT NULL,
  \`password\` varchar(50) NOT NULL,
  \`photo\` blob,
  PRIMARY KEY (\`id\`)
);

\u6DFB\u52A0\u8BB0\u5F55\uFF1Ainsert into t_user values(null,?,?,?);

\u4FEE\u6539\u8868\u7ED3\u6784\uFF1AALTER TABLE t_user MODIFY photo MEDIUMBLOB;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u6F14\u793A\u4EE3\u7801-2" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6F14\u793A\u4EE3\u7801-2" aria-hidden="true">#</a> \u95EE\u9898\u6F14\u793A\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
CREATE TABLE \`t_user\` (
  \`id\` int(11) NOT NULL AUTO_INCREMENT,
  \`username\` varchar(20) NOT NULL,
  \`password\` varchar(50) NOT NULL,
  \`photo\` blob,
  PRIMARY KEY (\`id\`)
);

mysql&gt; desc t_user;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| id       | int         | NO   | PRI | NULL    | auto_increment |
| username | varchar(20) | NO   |     | NULL    |                |
| password | varchar(50) | NO   |     | NULL    |                |
| photo    | blob        | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
4 rows in set (0.00 sec)
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestBlob</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u5BC6\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u9009\u62E9\u7167\u7247\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD9\u91CC\u6CA1\u6709\u56FE\u5F62\u5316\u754C\u9762\uFF0C\u53EA\u80FD\u8F93\u5165\u8DEF\u5F84\uFF0C\u901A\u8FC7IO\u6D41\u8BFB\u53D6\u56FE\u7247\u7684\u5185\u5BB9</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user values(null,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8BBE\u7F6E\uFF1F\u7684\u503C</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        pst.setObject(3, path);//\u4E0D\u5BF9\uFF0C\u56E0\u4E3Apath\u662F\u4E00\u4E2A\u8DEF\u5F84</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u7528\u5B57\u8282IO\u6D41\u6765\u8868\u793A\u4E8C\u8FDB\u5236\u6570\u636E</span>

        <span class="token comment">//\u6267\u884Csql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len <span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u6DFB\u52A0\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DFB\u52A0\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
\u5F53\u5B58\u50A8\u7684\u56FE\u7247\u7279\u522B\u5927\u65F6\uFF1A
\uFF081\uFF09com.mysql.cj.jdbc.exceptions.PacketTooBigException: Packet for query is too large (6,638,795 &gt; 4,194,304).
You can change this value on the server by setting the &#39;max_allowed_packet&#39; variable.
\u89E3\u51B3\u65B9\u6848\uFF1A\u4FEE\u6539my.ini\u914D\u7F6E\u6587\u4EF6      max_allowed_packet\u53D8\u91CF\u7684\u503C
\u5148\u505C\u6B62\u670D\u52A1\uFF0C\u7136\u540E\u4FEE\u6539my.ini\u6587\u4EF6\uFF0C\u518D\u91CD\u542F\u670D\u52A1

\uFF082\uFF09com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column &#39;photo&#39; at row 1
\u95EE\u9898\u662F\uFF1Ablob\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u5B58\u4E0D\u4E0B\u8FD9\u4E48\u5927\u7684\u56FE\u7247
\u89E3\u51B3\u65B9\u6848\uFF1A\u4FEE\u6539\u5B57\u6BB5\u7684\u6570\u636E\u7C7B\u578B

alter table t_user modify photo mediumblob;

mysql&gt; alter table t_user modify photo mediumblob;
ERROR 2013 (HY000): Lost connection to MySQL server during query
No connection. Trying to reconnect...
Connection id:    9
Current database: atguigu

Query OK, 1 row affected (0.08 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; desc t_user;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| id       | int         | NO   | PRI | NULL    | auto_increment |
| username | varchar(20) | NO   |     | NULL    |                |
| password | varchar(50) | NO   |     | NULL    |                |
| photo    | mediumblob  | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
4 rows in set (0.01 sec)
 */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://photo.sneoo.com/spring5/202207031643548.png" alt="image-20211203112609141"></p><p><img src="https://photo.sneoo.com/spring5/202207031643549.png" alt="image-20211203112629195"></p><p><img src="https://photo.sneoo.com/spring5/202207031643550.png" alt="image-20211203112805124"></p><h2 id="_2-4-\u83B7\u53D6\u81EA\u589E\u957F\u952E\u503C" tabindex="-1"><a class="header-anchor" href="#_2-4-\u83B7\u53D6\u81EA\u589E\u957F\u952E\u503C" aria-hidden="true">#</a> 2.4 \u83B7\u53D6\u81EA\u589E\u957F\u952E\u503C</h2><h3 id="\u51C6\u5907\u4EE3\u7801\u548Csql-3" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u4EE3\u7801\u548Csql-3" aria-hidden="true">#</a> \u51C6\u5907\u4EE3\u7801\u548Csql</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>		<span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7537  mysql\u7684gender\u662F\u679A\u4E3E\u7C7B\u578B\uFF0C\u8FD9\u91CC\u7528String\u5904\u7406</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

		input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u6F14\u793A\u4EE3\u7801-3" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6F14\u793A\u4EE3\u7801-3" aria-hidden="true">#</a> \u95EE\u9898\u6F14\u793A\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u83B7\u53D6\u81EA\u589E\u957F\u952E\u503C\uFF1A
mysql\u4E2D\u5F88\u591A\u8868\u90FD\u662F\u6709\u81EA\u589E\u957F\u5B57\u6BB5\uFF0C\u7279\u522B\u662Fid\u3002
\u5F53\u6211\u4EEC\u6DFB\u52A0\u4E86\u4E00\u4E2A\u5458\u5DE5\u3001\u90E8\u95E8\uFF0C\u6DFB\u52A0\u6210\u529F\u540E\uFF0C\u9700\u8981\u7ACB\u523B\u8FD4\u56DE\u8BE5\u5458\u5DE5\u3001\u90E8\u95E8\u7684\u81EA\u589E\u957F\u7684id\u503C\u3002

\uFF081\uFF09\u5728\u7528Connection\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u83B7\u53D6PreparedStatement\u5BF9\u8C61\u65F6\uFF0C\u8981\u52A0\u4E00\u4E2A\u53C2\u6570
PreparedStatement pst = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
\u8FD9\u91CCStatement.RETURN_GENERATED_KEYS\u8868\u793A\uFF0C\u6267\u884Csql\u540E\uFF0C\u8FD4\u56DE\u81EA\u589E\u957F\u952E\u503C

\uFF082\uFF09\u6267\u884C\u5B8C\u6210\u4E4B\u540E\uFF0C\u9700\u8981\u4ECEPreparedStatement\u5BF9\u8C61\u4E2D\u83B7\u53D6\u81EA\u589E\u957F\u952E\u503C
 ResultSet rs = pst.getGeneratedKeys(); //\u65B9\u6CD5\u522B\u8C03\u9519
if(rs.next()){ //\u56E0\u4E3A\u53EA\u6709\u4E00\u6761\u8BB0\u5F55\uFF0C\u6240\u4EE5\u53EA\u6709\u4E00\u4E2A\u81EA\u589E\u957F\u952E\u503C\uFF0C\u7528if\u5373\u53EF
    System.out.println(&quot;\u65B0\u5458\u5DE5\u7F16\u53F7\u662F\uFF1A&quot; + rs.getObject(1));//\u56E0\u4E3A\u81EA\u589E\u957F\u952E\u503C\u53EA\u6709\u4E00\u4E2A\uFF0C\u6240\u4EE5\u8FD9\u91CC\u76F4\u63A5getObject(1)\u5373\u53EF
}
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestGenerateKey</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u7537  mysql\u7684gender\u662F\u679A\u4E3E\u7C7B\u578B\uFF0C\u8FD9\u91CC\u7528String\u5904\u7406</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token comment">//A:\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token comment">//\u7ED9t_employee\u8868\u4E2D\u7684\u6709\u975E\u7A7A\u7EA6\u675F\u7684\u5B57\u6BB5\u8D4B\u503C\uFF0C\u56E0\u4E3Awork_place\u6709\u9ED8\u8BA4\u503C\uFF0C\u8FD9\u91CC\u5C31\u6CA1\u6709\u7BA1\u5B83</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO t_employee(ename,salary,birthday,gender,tel,email,hiredate)VALUES(?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD9\u91CC\u7684\uFF1F\u5C31\u50CF\u5360\u4F4D\u7B26\uFF0C\u8868\u793A\u8981\u7ED9\u51E0\u4E2A\u5B57\u6BB5\u8D4B\u503C</span>
        <span class="token comment">//C\uFF1A\u901A\u8FC7\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u83B7\u53D6PreparedStatement\u5BF9\u8C61</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">Statement</span><span class="token punctuation">.</span>RETURN_GENERATED_KEYS<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6B64\u65F6\u5BF9sql\u8FDB\u884C\u9884\u7F16\u8BD1\uFF0C\u91CC\u9762\u662F\u5E26\uFF1F\u7684</span>
        <span class="token comment">//Statement.RETURN_GENERATED_KEYS\u8868\u793A\uFF0C\u6267\u884Csql\u540E\uFF0C\u8FD4\u56DE\u81EA\u589E\u957F\u952E\u503C</span>

        <span class="token comment">//\u8981\u7ED9\u6BCF\u4E00\u4E2A\uFF1F\u6307\u5B9A\u5177\u4F53\u7684\u503C</span>
        <span class="token comment">/*
        PreparedStatement\u652F\u6301\u7ED9\u6BCF\u4E00\u4E2A\u5B57\u6BB5\u6307\u5B9A\u503C\u65F6\uFF0C\u786E\u5B9A\u6570\u636E\u7C7B\u578B\uFF0C\u4F8B\u5982\uFF1A
        pst.setString(1,ename);
        pst.setDouble(2,salary);
        ...
        \u4F46\u662F\u8FD9\u6837\u6709\u70B9\u9EBB\u70E6\uFF0C\u8FD8\u8981\u4E00\u4E00\u53BB\u786E\u5B9A\u6570\u636E\u7C7B\u578B
        PreparedStatement\u652F\u6301\u7528Object\u7EDF\u4E00\u5904\u7406
        pst.setObject(1,ename);
        pst.setObject(2,salary);
         */</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76841\uFF0C\u8868\u793A\u7B2C1\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76842\uFF0C\u8868\u793A\u7B2C2\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>birthday<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76843\uFF0C\u8868\u793A\u7B2C3\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>gender<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76844\uFF0C\u8868\u793A\u7B2C4\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76845\uFF0C\u8868\u793A\u7B2C5\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76846\uFF0C\u8868\u793A\u7B2C6\u4E2A\uFF1F</span>
        pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u8FD9\u91CC\u76847\uFF0C\u8868\u793A\u7B2C7\u4E2A\uFF1F</span>
        <span class="token comment">//\u6BCF\u4E00\u4E2A\uFF1F\u4E0E\u4F60\u8981\u8D4B\u503C\u7684\u5B57\u6BB5\u5BF9\u5E94\uFF0C\u4E0D\u80FD\u5BF9\u9519\u4E86</span>

        <span class="token comment">//D\uFF1A\u6267\u884Csql</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;\u6DFB\u52A0\u6210\u529F&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DFB\u52A0\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">getGeneratedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B0\u5458\u5DE5\u7F16\u53F7\u662F\uFF1A&quot;</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u56E0\u4E3A\u81EA\u589E\u957F\u952E\u503C\u53EA\u6709\u4E00\u4E2A\uFF0C\u6240\u4EE5\u8FD9\u91CC\u76F4\u63A5getObject(1)\u5373\u53EF</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//E\uFF1A\u91CA\u653E\u8FDE\u63A5\u7B49\u8D44\u6E90</span>
        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-5-\u6279\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_2-5-\u6279\u5904\u7406" aria-hidden="true">#</a> 2.5 \u6279\u5904\u7406</h2><h3 id="\u51C6\u5907\u4EE3\u7801\u548Csql-4" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u4EE3\u7801\u548Csql-4" aria-hidden="true">#</a> \u51C6\u5907\u4EE3\u7801\u548Csql</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>insert into t_department values(null,?,?)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u6F14\u793A\u4EE3\u7801-4" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6F14\u793A\u4EE3\u7801-4" aria-hidden="true">#</a> \u95EE\u9898\u6F14\u793A\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u6279\u5904\u7406\uFF1A
    \u6279\u91CF\u6267\u884C\u4E00\u7EC4sql\u3002\u5927\u591A\u6570\u60C5\u51B5\u4E0B\u90FD\u662F\u6279\u91CF\u6267\u884Cinsert\u8BED\u53E5\u3002

    \u6F14\u793A\uFF1A\u7ED9\u90E8\u95E8\u8868\u6279\u91CF\u6DFB\u52A01000\u6761\u90E8\u95E8\u6D4B\u8BD5\u4FE1\u606F\u3002

MySQL\u670D\u52A1\u5668\u7AEF\uFF0C\u9ED8\u8BA4\u6279\u5904\u7406\u529F\u80FD\u6CA1\u6709\u5F00\u542F\u3002\u9700\u8981\u901A\u8FC7\u53C2\u6570\u544A\u77E5mysql\u670D\u52A1\u5668\uFF0C\u5F00\u542F\u6279\u5904\u7406\u529F\u80FD\u3002
\u5728url\u540E\u9762\u518D\u52A0\u4E00\u4E2A\u53C2\u6570 rewriteBatchedStatements=true

url\u7684\u683C\u5F0F\uFF1A
    jdbc:mysql://localhost:3306/atguigu
    \u5982\u679C\u8981\u52A0\u53C2\u6570\uFF0C\u9700\u8981\u7528\u4E00\u4E2A?\uFF0C\u8868\u793A\u540E\u9762\u662F\u53C2\u6570

    jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC

    \u5982\u679C\u6709\u591A\u4E2A\u53C2\u6570\uFF0C\u53C2\u6570\u4E4B\u95F4\u4F7F\u7528&amp;\u8FDE\u63A5\uFF0C
    \u6BCF\u4E00\u4E2A\u53C2\u6570\u90FD\u662Fkey=value\u7684\u683C\u5F0F\u3002

 jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true

 \u5982\u4F55\u5B9E\u73B0\u6279\u5904\u7406\uFF1F
 \uFF081\uFF09url\u4E2D\u52A0rewriteBatchedStatements=true
jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true

\uFF082\uFF09PreparedStatement\u5BF9\u8C61\u8C03\u7528
A\uFF1AaddBatch()
B\uFF1AexecuteBatch()

\uFF083\uFF09\u4E0D\u8981\u628Avalues\u5199\u9519value\uFF08\u5B66\u751F\u95EE\u9898\uFF09
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestBatch</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4E0A\u9762\u7684sql\u662F\u91CD\u590D\u4F7F\u7528\u7684\uFF0CPreparedStatement\u5BF9\u8C61\u4E5F\u91CD\u590D\u4F7F\u7528\uFF0C\u4E0D\u7528new1000\u4E2A\u5BF9\u8C61\u3002</span>
        <span class="token comment">//mysql\u670D\u52A1\u5668\u7AEF\u4E5F\u53EF\u4EE5\u4F18\u5316\uFF0C\u63D0\u9AD8\u6027\u80FD</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u8BBE\u7F6E1000\u6B21\uFF1F\u7684\u503C</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5\u7B80\u4ECB&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

            pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD9\u91CC\u5C31\u4E0D\u63A5\u6536\u8FD4\u56DE\u503C\u4E86</span>
            <span class="token comment">//\u9010\u6761\u6DFB\u52A0\uFF0C\u6BCF\u8BBE\u7F6E\u4E00\u6B21\uFF1F\uFF0C\u5C31\u7ACB\u523B\u6DFB\u52A0\u4E00\u6761</span>
            <span class="token comment">//\u8BBE\u7F6E\u5B8C\uFF1F\u662F\u5728\u5185\u5B58\u4E2D\uFF0C\u6DFB\u52A0\u5230\u8868\u4E2D\uFF0C\u662F\u8981\u7528IO\u6D41\u5199\u5230\u6587\u4EF6\u4E2D\uFF0C</span>
            <span class="token comment">// \u6DFB\u52A01000\u6761\u610F\u5473\u7740\u8981\u7528IO\u6D41\u4E0E\u6587\u4EF6\u901A\u4FE11000\u6B21</span>
        <span class="token punctuation">}</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8017\u65F6\uFF1A4700</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4E0A\u9762\u7684sql\u662F\u91CD\u590D\u4F7F\u7528\u7684\uFF0CPreparedStatement\u5BF9\u8C61\u4E5F\u91CD\u590D\u4F7F\u7528\uFF0C\u4E0D\u7528new1000\u4E2A\u5BF9\u8C61\u3002</span>
        <span class="token comment">//mysql\u670D\u52A1\u5668\u7AEF\u4E5F\u53EF\u4EE5\u4F18\u5316\uFF0C\u63D0\u9AD8\u6027\u80FD</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">2000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u8BBE\u7F6E1000\u6B21\uFF1F\u7684\u503C</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5\u7B80\u4ECB&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//            pst.executeUpdate();//\u4E0D\u7528\u8BBE\u7F6E\u4E00\u6B21\uFF1F\uFF0C\u5C31\u6267\u884C\u4E00\u6B21</span>
            pst<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5148\u6512\u7740\u8FD9\u4E9B\u6570\u636E\uFF0C\u8BBE\u7F6E\u5B8C\uFF1F\uFF0Csql\u4F1A\u91CD\u65B0\u7F16\u8BD1\u4E00\u4E0B\uFF0C\u751F\u6210\u4E00\u6761\u65B0\u7684\u5B8C\u6574\u7684sql</span>
        <span class="token punctuation">}</span>
        pst<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6700\u540E\u4E00\u53E3\u6C14\u6267\u884C</span>

<span class="token comment">//        \u8FD9\u91CC\u867D\u7136\u8C03\u7528\u4E86\u6279\u5904\u7406\u6267\u884Csql\u7684\u65B9\u6CD5\uFF0C\u4F46\u662Furl\u4E2D\u6CA1\u6709\u544A\u8BC9mysql\u5F00\u542F\u6279\u5904\u7406\u7684\u529F\u80FD\uFF0C\u4ECD\u7136\u662F\u4E00\u6761\u4E00\u6761\u6DFB\u52A0\u7684</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8017\u65F6\uFF1A4714</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4E0A\u9762\u7684sql\u662F\u91CD\u590D\u4F7F\u7528\u7684\uFF0CPreparedStatement\u5BF9\u8C61\u4E5F\u91CD\u590D\u4F7F\u7528\uFF0C\u4E0D\u7528new1000\u4E2A\u5BF9\u8C61\u3002</span>
        <span class="token comment">//mysql\u670D\u52A1\u5668\u7AEF\u4E5F\u53EF\u4EE5\u4F18\u5316\uFF0C\u63D0\u9AD8\u6027\u80FD</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2001</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">3000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u8BBE\u7F6E1000\u6B21\uFF1F\u7684\u503C</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5\u7B80\u4ECB&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//            pst.executeUpdate();//\u4E0D\u7528\u8BBE\u7F6E\u4E00\u6B21\uFF1F\uFF0C\u5C31\u6267\u884C\u4E00\u6B21</span>
            pst<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5148\u6512\u7740\u8FD9\u4E9B\u6570\u636E\uFF0C\u8BBE\u7F6E\u5B8C\uFF1F\uFF0Csql\u4F1A\u91CD\u65B0\u7F16\u8BD1\u4E00\u4E0B\uFF0C\u751F\u6210\u4E00\u6761\u65B0\u7684\u5B8C\u6574\u7684sql</span>
        <span class="token punctuation">}</span>
        pst<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6700\u540E\u4E00\u53E3\u6C14\u6267\u884C</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8017\u65F6\uFF1A1625</span>
    <span class="token punctuation">}</span>
    
        <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u5982\u679C\u628Avalues\u5199\u9519value\uFF0C\u6279\u5904\u7406\u4E0D\u8D77\u4F5C\u7528</span>
        <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4E0A\u9762\u7684sql\u662F\u91CD\u590D\u4F7F\u7528\u7684\uFF0CPreparedStatement\u5BF9\u8C61\u4E5F\u91CD\u590D\u4F7F\u7528\uFF0C\u4E0D\u7528new1000\u4E2A\u5BF9\u8C61\u3002</span>
        <span class="token comment">//mysql\u670D\u52A1\u5668\u7AEF\u4E5F\u53EF\u4EE5\u4F18\u5316\uFF0C\u63D0\u9AD8\u6027\u80FD</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">2001</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">3000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u8BBE\u7F6E1000\u6B21\uFF1F\u7684\u503C</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5\u7B80\u4ECB&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//            pst.executeUpdate();//\u4E0D\u7528\u8BBE\u7F6E\u4E00\u6B21\uFF1F\uFF0C\u5C31\u6267\u884C\u4E00\u6B21</span>
            pst<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5148\u6512\u7740\u8FD9\u4E9B\u6570\u636E\uFF0C\u8BBE\u7F6E\u5B8C\uFF1F\uFF0Csql\u4F1A\u91CD\u65B0\u7F16\u8BD1\u4E00\u4E0B\uFF0C\u751F\u6210\u4E00\u6761\u65B0\u7684\u5B8C\u6574\u7684sql</span>
        <span class="token punctuation">}</span>
        pst<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6700\u540E\u4E00\u53E3\u6C14\u6267\u884C</span>

        pst<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8017\u65F6\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8017\u65F6\uFF1A4625</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-6-\u4E8B\u52A1\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_2-6-\u4E8B\u52A1\u5904\u7406" aria-hidden="true">#</a> 2.6 \u4E8B\u52A1\u5904\u7406</h2><h3 id="\u51C6\u5907\u4EE3\u7801\u548Csql-5" tabindex="-1"><a class="header-anchor" href="#\u51C6\u5907\u4EE3\u7801\u548Csql-5" aria-hidden="true">#</a> \u51C6\u5907\u4EE3\u7801\u548Csql</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>\u6F14\u793A\uFF1A
	update t_department set description = &#39;xx&#39; where did = 2;
	update t_department set description = &#39;yy&#39; where did = 3;

	\u6545\u610F\u628A\u5176\u4E2D\u4E00\u6761sql\u8BED\u53E5\u5199\u9519\u3002

    update t_department set description = &#39;xx&#39; where did = 2;
	update t_department set description = &#39;yy&#39; what did = 3;  #what\u662F\u9519\u8BEF\u7684
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u6F14\u793A\u4EE3\u7801-5" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u6F14\u793A\u4EE3\u7801-5" aria-hidden="true">#</a> \u95EE\u9898\u6F14\u793A\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>problem</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u5982\u679C\u591A\u6761sql\u8981\u7EC4\u6210\u4E00\u4E2A\u4E8B\u52A1\uFF0C\u8981\u4E48\u4E00\u8D77\u6210\u529F\uFF0C\u8981\u4E48\u4E00\u8D77\u5931\u8D25\u3002
\u4F8B\u5982\uFF1A\u8BA2\u5355
    \uFF081\uFF09\u4FEE\u6539\u5546\u54C1\u8868\u7684\u5546\u54C1\u5E93\u5B58\u548C\u9500\u91CF
    \uFF082\uFF09\u8BA2\u5355\u8868\u65B0\u5EFA\u8BA2\u5355\u6570\u636E
    \uFF083\uFF09\u8BA2\u5355\u660E\u7EC6\u8868\u65B0\u5EFA\u8BA2\u5355\u660E\u7EC6\u8BB0\u5F55\uFF08\u591A\u6761\uFF09
    ....
    \u8FD9\u4E9Bsql\u8981\u4E48\u4E00\u8D77\u6210\u529F\uFF0C\u8981\u4E48\u90FD\u8FD8\u539F\u5230\u6700\u521D\u3002

\u6F14\u793A\uFF1A
	update t_department set description = &#39;xx&#39; where did = 2;
	update t_department set description = &#39;yy&#39; where did = 3;

	\u6545\u610F\u628A\u5176\u4E2D\u4E00\u6761sql\u8BED\u53E5\u5199\u9519\u3002

    update t_department set description = &#39;xx&#39; where did = 2;
	update t_department set description = &#39;yy&#39; what did = 3;  #what\u662F\u9519\u8BEF\u7684\uFF0C\u6545\u610F\u5236\u9020\u9519\u8BEF

JDBC\u5982\u4F55\u7BA1\u7406\u4E8B\u52A1\uFF1F
\uFF081\uFF09mysql\u9ED8\u8BA4\u662F\u81EA\u52A8\u63D0\u4EA4\u4E8B\u52A1\uFF0C\u6BCF\u6267\u884C\u4E00\u6761\u8BED\u53E5\u6210\u529F\u540E\uFF0C\u81EA\u52A8\u63D0\u4EA4\u3002
\u9700\u8981\u5F00\u542F\u624B\u52A8\u63D0\u4EA4\u6A21\u5F0F\u3002

Connection\u8FDE\u63A5\u5BF9\u8C61.setAutoCommit(false);//\u53D6\u6D88\u81EA\u52A8\u63D0\u4EA4\u6A21\u5F0F\uFF0C\u5F00\u59CB\u624B\u52A8\u63D0\u4EA4\u6A21\u5F0F

(2)sql\u6267\u884C\u6210\u529F\uFF0C\u522B\u5FD8\u4E86\u63D0\u4EA4\u4E8B\u52A1
Connection\u8FDE\u63A5\u5BF9\u8C61.commit();

\uFF083\uFF09sql\u6267\u884C\u5931\u8D25\uFF0C\u56DE\u6EDA\u4E8B\u52A1
Connection\u8FDE\u63A5\u5BF9\u8C61.rollback();
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTransaction</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u628A\u9A71\u52A8\u7C7B\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//B\uFF1A\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Connection   ==&gt; \u7F51\u7EDC\u7F16\u7A0B\u7684Socket</span>

        connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u53D6\u6D88\u81EA\u52A8\u63D0\u4EA4\u6A21\u5F0F\uFF0C\u5F00\u59CB\u624B\u52A8\u63D0\u4EA4\u6A21\u5F0F</span>

        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = &#39;xx&#39; where did = 2&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token string">&quot;update t_department set description = &#39;yy&#39; what did = 3&quot;</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> p1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">PreparedStatement</span> p2 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            p1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            p2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E24\u6761\u66F4\u65B0\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u63D0\u4EA4\u4E8B\u52A1</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u56DE\u6EDA\u4E8B\u52A1</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E09\u7AE0-\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E09\u7AE0-\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" aria-hidden="true">#</a> \u7B2C\u4E09\u7AE0 \u6570\u636E\u5E93\u8FDE\u63A5\u6C60</h1><h2 id="_1\u3001\u4EC0\u4E48\u662F\u6570\u636E\u5E93\u8FDE\u6C60" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u4EC0\u4E48\u662F\u6570\u636E\u5E93\u8FDE\u6C60" aria-hidden="true">#</a> 1\u3001\u4EC0\u4E48\u662F\u6570\u636E\u5E93\u8FDE\u6C60</h2><p>\u8FDE\u63A5\u5BF9\u8C61\u7684\u7F13\u51B2\u533A\u3002\u8D1F\u8D23\u7533\u8BF7\uFF0C\u5206\u914D\u7BA1\u7406\uFF0C\u91CA\u653E\u8FDE\u63A5\u7684\u64CD\u4F5C\u3002</p><h2 id="_2\u3001\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" aria-hidden="true">#</a> 2\u3001\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60</h2><p>\uFF081\uFF09\u4E0D\u4F7F\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C\u6BCF\u6B21\u90FD\u901A\u8FC7DriverManager\u83B7\u53D6\u65B0\u8FDE\u63A5\uFF0C\u7528\u5B8C\u76F4\u63A5\u629B\u5F03\u65AD\u5F00\uFF0C\u8FDE\u63A5\u7684\u5229\u7528\u7387\u592A\u4F4E\uFF0C\u592A\u6D6A\u8D39\u3002 \uFF082\uFF09\u5BF9\u4E8E\u6570\u636E\u5E93\u670D\u52A1\u5668\u6765\u8BF4\uFF0C\u538B\u529B\u592A\u5927\u4E86\u3002\u6211\u4EEC\u6570\u636E\u5E93\u670D\u52A1\u5668\u548CJava\u7A0B\u5E8F\u5BF9\u8FDE\u63A5\u6570\u4E5F\u65E0\u6CD5\u63A7\u5236\uFF0C\u5F88\u5BB9\u6613\u5BFC\u81F4\u6570\u636E\u5E93\u670D\u52A1\u5668\u5D29\u6E83\u3002</p><p>\u6211\u4EEC\u5C31\u5E0C\u671B\u80FD\u7BA1\u7406\u8FDE\u63A5\u3002</p><ul><li>\u6211\u4EEC\u53EF\u4EE5\u5EFA\u7ACB\u4E00\u4E2A\u8FDE\u63A5\u6C60\uFF0C\u8FD9\u4E2A\u6C60\u4E2D\u53EF\u4EE5\u5BB9\u7EB3\u4E00\u5B9A\u6570\u91CF\u7684\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u4E00\u5F00\u59CB\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5148\u66FF\u7528\u6237\u5148\u521B\u5EFA\u597D\u4E00\u4E9B\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u7B49\u7528\u6237\u8981\u62FF\u8FDE\u63A5\u5BF9\u8C61\u65F6\uFF0C\u5C31\u76F4\u63A5\u4ECE\u6C60\u4E2D\u62FF\uFF0C\u4E0D\u7528\u65B0\u5EFA\u4E86\uFF0C\u8FD9\u6837\u4E5F\u53EF\u4EE5\u8282\u7701\u65F6\u95F4\u3002\u7136\u540E\u7528\u6237\u7528\u5B8C\u540E\uFF0C\u653E\u56DE\u53BB\uFF0C\u522B\u4EBA\u53EF\u4EE5\u63A5\u7740\u7528\u3002</li><li>\u53EF\u4EE5\u63D0\u9AD8\u8FDE\u63A5\u7684\u4F7F\u7528\u7387\u3002\u5F53\u6C60\u4E2D\u7684\u73B0\u6709\u7684\u8FDE\u63A5\u90FD\u7528\u5B8C\u4E86\uFF0C\u90A3\u4E48\u8FDE\u63A5\u6C60\u53EF\u4EE5\u5411\u670D\u52A1\u5668\u7533\u8BF7\u65B0\u7684\u8FDE\u63A5\u653E\u5230\u6C60\u4E2D\u3002 \u76F4\u5230\u6C60\u4E2D\u7684\u8FDE\u63A5\u8FBE\u5230\u201C\u6700\u5927\u8FDE\u63A5\u6570\u201D\uFF0C\u5C31\u4E0D\u80FD\u5728\u7533\u8BF7\u65B0\u7684\u8FDE\u63A5\u4E86\uFF0C\u5982\u679C\u6CA1\u6709\u62FF\u5230\u8FDE\u63A5\u7684\u7528\u6237\u53EA\u80FD\u7B49\u5F85\u3002</li></ul><h2 id="_3\u3001\u5E02\u9762\u4E0A\u6709\u5F88\u591A\u73B0\u6210\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u6280\u672F" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5E02\u9762\u4E0A\u6709\u5F88\u591A\u73B0\u6210\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u6280\u672F" aria-hidden="true">#</a> 3\u3001\u5E02\u9762\u4E0A\u6709\u5F88\u591A\u73B0\u6210\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u6280\u672F</h2><ul><li>JDBC \u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4F7F\u7528 javax.sql.DataSource \u6765\u8868\u793A\uFF0CDataSource \u53EA\u662F\u4E00\u4E2A\u63A5\u53E3\uFF08\u901A\u5E38\u88AB\u79F0\u4E3A\u6570\u636E\u6E90\uFF09\uFF0C\u8BE5\u63A5\u53E3\u901A\u5E38\u7531\u670D\u52A1\u5668(Weblogic, WebSphere, Tomcat)\u63D0\u4F9B\u5B9E\u73B0\uFF0C\u4E5F\u6709\u4E00\u4E9B\u5F00\u6E90\u7EC4\u7EC7\u63D0\u4F9B\u5B9E\u73B0\uFF1A <ul><li><strong>DBCP</strong> \u662FApache\u63D0\u4F9B\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C<strong>\u901F\u5EA6\u76F8\u5BF9c3p0\u8F83\u5FEB</strong>\uFF0C\u4F46\u56E0\u81EA\u8EAB\u5B58\u5728BUG\uFF0CHibernate3\u5DF2\u4E0D\u518D\u63D0\u4F9B\u652F\u6301</li><li><strong>C3P0</strong> \u662F\u4E00\u4E2A\u5F00\u6E90\u7EC4\u7EC7\u63D0\u4F9B\u7684\u4E00\u4E2A\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C<strong>\u901F\u5EA6\u76F8\u5BF9\u8F83\u6162\uFF0C\u7A33\u5B9A\u6027\u8FD8\u53EF\u4EE5</strong></li><li><strong>Proxool</strong> \u662Fsourceforge\u4E0B\u7684\u4E00\u4E2A\u5F00\u6E90\u9879\u76EE\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C\u6709\u76D1\u63A7\u8FDE\u63A5\u6C60\u72B6\u6001\u7684\u529F\u80FD\uFF0C<strong>\u7A33\u5B9A\u6027\u8F83c3p0\u5DEE\u4E00\u70B9</strong></li><li><strong>BoneCP</strong> \u662F\u4E00\u4E2A\u5F00\u6E90\u7EC4\u7EC7\u63D0\u4F9B\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C\u901F\u5EA6\u5FEB</li><li><strong>Druid</strong> \u662F\u963F\u91CC\u63D0\u4F9B\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C\u636E\u8BF4\u662F\u96C6DBCP \u3001C3P0 \u3001Proxool \u4F18\u70B9\u4E8E\u4E00\u8EAB\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60</li></ul></li></ul><h2 id="_4\u3001\u5982\u4F55\u4F7F\u7528\u5FB7\u9C81\u4F0A\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u5982\u4F55\u4F7F\u7528\u5FB7\u9C81\u4F0A\u6570\u636E\u5E93\u8FDE\u63A5\u6C60" aria-hidden="true">#</a> 4\u3001\u5982\u4F55\u4F7F\u7528\u5FB7\u9C81\u4F0A\u6570\u636E\u5E93\u8FDE\u63A5\u6C60</h2><h3 id="_1-\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_1-\u6B65\u9AA4" aria-hidden="true">#</a> \uFF081\uFF09\u6B65\u9AA4</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\u5F15\u5165jar\u5305
    \u548C\u5F15\u5165mysql\u9A71\u52A8jar\u65B9\u5F0F\u4E00\u6837
\uFF08<span class="token number">2</span>\uFF09\u7F16\u5199\u914D\u7F6E\u6587\u4EF6
    src\u4E0B\u52A0\u4E00\u4E2Adruid<span class="token punctuation">.</span>properties\u6587\u4EF6
\uFF08<span class="token number">3</span>\uFF09\u521B\u5EFA\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u5BF9\u8C61
\uFF08<span class="token number">4</span>\uFF09\u83B7\u53D6\u8FDE\u63A5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://photo.sneoo.com/spring5/202207031643551.png" alt="image-20211202114429807"></p><h3 id="_2-druid-properties\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-druid-properties\u6587\u4EF6" aria-hidden="true">#</a> \uFF082\uFF09druid.properties\u6587\u4EF6</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>#key<span class="token operator">=</span>value
driverClassName<span class="token operator">=</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>
url<span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>atguigu<span class="token operator">?</span>serverTimezone<span class="token operator">=</span>UTC<span class="token operator">&amp;</span>rewriteBatchedStatements<span class="token operator">=</span><span class="token boolean">true</span>
username<span class="token operator">=</span>root
password<span class="token operator">=</span><span class="token number">123456</span>
initialSize<span class="token operator">=</span><span class="token number">5</span>
maxActive<span class="token operator">=</span><span class="token number">10</span>
maxWait<span class="token operator">=</span><span class="token number">1000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,102),k=n("thead",null,[n("tr",null,[n("th",null,"\u914D\u7F6E"),n("th",null,[n("strong",null,"\u7F3A\u7701")]),n("th",null,[n("strong",null,"\u8BF4\u660E")])])],-1),r=n("tr",null,[n("td",null,"name"),n("td"),n("td",null,"\u914D\u7F6E\u8FD9\u4E2A\u5C5E\u6027\u7684\u610F\u4E49\u5728\u4E8E\uFF0C\u5982\u679C\u5B58\u5728\u591A\u4E2A\u6570\u636E\u6E90\uFF0C\u76D1\u63A7\u7684\u65F6\u5019\u53EF\u4EE5\u901A\u8FC7\u540D\u5B57\u6765\u533A\u5206\u5F00\u6765\u3002 \u5982\u679C\u6CA1\u6709\u914D\u7F6E\uFF0C\u5C06\u4F1A\u751F\u6210\u4E00\u4E2A\u540D\u5B57\uFF0C\u683C\u5F0F\u662F\uFF1A\u201DDataSource-\u201D + System.identityHashCode(this)")],-1),d=n("tr",null,[n("td",null,"jdbcUrl"),n("td"),n("td",null,"\u8FDE\u63A5\u6570\u636E\u5E93\u7684url\uFF0C\u4E0D\u540C\u6570\u636E\u5E93\u4E0D\u4E00\u6837\u3002\u4F8B\u5982\uFF1Amysql : jdbc:mysql://10.20.153.104:3306/druid2 oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto")],-1),m=n("tr",null,[n("td",null,"username"),n("td"),n("td",null,"\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u7528\u6237\u540D")],-1),v=n("td",null,"password",-1),b=n("td",null,null,-1),g=a("\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u5BC6\u7801\u3002\u5982\u679C\u4F60\u4E0D\u5E0C\u671B\u5BC6\u7801\u76F4\u63A5\u5199\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528ConfigFilter\u3002\u8BE6\u7EC6\u770B\u8FD9\u91CC\uFF1A"),y={href:"https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter",target:"_blank",rel:"noopener noreferrer"},q=a("https://github.com/alibaba/druid/wiki/\u4F7F\u7528ConfigFilter"),w=n("tr",null,[n("td",null,"driverClassName"),n("td"),n("td",null,"\u6839\u636Eurl\u81EA\u52A8\u8BC6\u522B \u8FD9\u4E00\u9879\u53EF\u914D\u53EF\u4E0D\u914D\uFF0C\u5982\u679C\u4E0D\u914D\u7F6Edruid\u4F1A\u6839\u636Eurl\u81EA\u52A8\u8BC6\u522BdbType\uFF0C\u7136\u540E\u9009\u62E9\u76F8\u5E94\u7684driverClassName(\u5EFA\u8BAE\u914D\u7F6E\u4E0B)")],-1),h=n("tr",null,[n("td",null,"initialSize"),n("td",null,"0"),n("td",null,"\u521D\u59CB\u5316\u65F6\u5EFA\u7ACB\u7269\u7406\u8FDE\u63A5\u7684\u4E2A\u6570\u3002\u521D\u59CB\u5316\u53D1\u751F\u5728\u663E\u793A\u8C03\u7528init\u65B9\u6CD5\uFF0C\u6216\u8005\u7B2C\u4E00\u6B21getConnection\u65F6")],-1),f=n("tr",null,[n("td",null,"maxActive"),n("td",null,"8"),n("td",null,"\u6700\u5927\u8FDE\u63A5\u6C60\u6570\u91CF")],-1),S=n("tr",null,[n("td",null,"maxIdle"),n("td",null,"8"),n("td",null,"\u5DF2\u7ECF\u4E0D\u518D\u4F7F\u7528\uFF0C\u914D\u7F6E\u4E86\u4E5F\u6CA1\u6548\u679C")],-1),j=n("tr",null,[n("td",null,"minIdle"),n("td"),n("td",null,"\u6700\u5C0F\u8FDE\u63A5\u6C60\u6570\u91CF")],-1),D=n("tr",null,[n("td",null,"maxWait"),n("td"),n("td",null,"\u83B7\u53D6\u8FDE\u63A5\u65F6\u6700\u5927\u7B49\u5F85\u65F6\u95F4\uFF0C\u5355\u4F4D\u6BEB\u79D2\u3002\u914D\u7F6E\u4E86maxWait\u4E4B\u540E\uFF0C\u7F3A\u7701\u542F\u7528\u516C\u5E73\u9501\uFF0C\u5E76\u53D1\u6548\u7387\u4F1A\u6709\u6240\u4E0B\u964D\uFF0C\u5982\u679C\u9700\u8981\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6EuseUnfairLock\u5C5E\u6027\u4E3Atrue\u4F7F\u7528\u975E\u516C\u5E73\u9501\u3002")],-1),x=n("tr",null,[n("td",null,"poolPreparedStatements"),n("td",null,"false"),n("td",null,"\u662F\u5426\u7F13\u5B58preparedStatement\uFF0C\u4E5F\u5C31\u662FPSCache\u3002PSCache\u5BF9\u652F\u6301\u6E38\u6807\u7684\u6570\u636E\u5E93\u6027\u80FD\u63D0\u5347\u5DE8\u5927\uFF0C\u6BD4\u5982\u8BF4oracle\u3002\u5728mysql\u4E0B\u5EFA\u8BAE\u5173\u95ED\u3002")],-1),C=n("tr",null,[n("td",null,"maxOpenPreparedStatements"),n("td",null,"-1"),n("td",null,"\u8981\u542F\u7528PSCache\uFF0C\u5FC5\u987B\u914D\u7F6E\u5927\u4E8E0\uFF0C\u5F53\u5927\u4E8E0\u65F6\uFF0CpoolPreparedStatements\u81EA\u52A8\u89E6\u53D1\u4FEE\u6539\u4E3Atrue\u3002\u5728Druid\u4E2D\uFF0C\u4E0D\u4F1A\u5B58\u5728Oracle\u4E0BPSCache\u5360\u7528\u5185\u5B58\u8FC7\u591A\u7684\u95EE\u9898\uFF0C\u53EF\u4EE5\u628A\u8FD9\u4E2A\u6570\u503C\u914D\u7F6E\u5927\u4E00\u4E9B\uFF0C\u6BD4\u5982\u8BF4100")],-1),E=n("tr",null,[n("td",null,"validationQuery"),n("td"),n("td",null,"\u7528\u6765\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548\u7684sql\uFF0C\u8981\u6C42\u662F\u4E00\u4E2A\u67E5\u8BE2\u8BED\u53E5\u3002\u5982\u679CvalidationQuery\u4E3Anull\uFF0CtestOnBorrow\u3001testOnReturn\u3001testWhileIdle\u90FD\u4E0D\u4F1A\u5176\u4F5C\u7528\u3002")],-1),_=n("tr",null,[n("td",null,"testOnBorrow"),n("td",null,"true"),n("td",null,"\u7533\u8BF7\u8FDE\u63A5\u65F6\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548\uFF0C\u505A\u4E86\u8FD9\u4E2A\u914D\u7F6E\u4F1A\u964D\u4F4E\u6027\u80FD\u3002")],-1),T=n("tr",null,[n("td",null,"testOnReturn"),n("td",null,"false"),n("td",null,"\u5F52\u8FD8\u8FDE\u63A5\u65F6\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548\uFF0C\u505A\u4E86\u8FD9\u4E2A\u914D\u7F6E\u4F1A\u964D\u4F4E\u6027\u80FD")],-1),L=n("tr",null,[n("td",null,"testWhileIdle"),n("td",null,"false"),n("td",null,"\u5EFA\u8BAE\u914D\u7F6E\u4E3Atrue\uFF0C\u4E0D\u5F71\u54CD\u6027\u80FD\uFF0C\u5E76\u4E14\u4FDD\u8BC1\u5B89\u5168\u6027\u3002\u7533\u8BF7\u8FDE\u63A5\u7684\u65F6\u5019\u68C0\u6D4B\uFF0C\u5982\u679C\u7A7A\u95F2\u65F6\u95F4\u5927\u4E8EtimeBetweenEvictionRunsMillis\uFF0C\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548\u3002")],-1),O=n("tr",null,[n("td",null,"timeBetweenEvictionRunsMillis"),n("td"),n("td",null,"\u6709\u4E24\u4E2A\u542B\u4E49\uFF1A 1)Destroy\u7EBF\u7A0B\u4F1A\u68C0\u6D4B\u8FDE\u63A5\u7684\u95F4\u9694\u65F6\u95F42)testWhileIdle\u7684\u5224\u65AD\u4F9D\u636E\uFF0C\u8BE6\u7EC6\u770BtestWhileIdle\u5C5E\u6027\u7684\u8BF4\u660E")],-1),I=n("tr",null,[n("td",null,"numTestsPerEvictionRun"),n("td"),n("td",null,"\u4E0D\u518D\u4F7F\u7528\uFF0C\u4E00\u4E2ADruidDataSource\u53EA\u652F\u6301\u4E00\u4E2AEvictionRun")],-1),A=n("tr",null,[n("td",null,"minEvictableIdleTimeMillis"),n("td"),n("td")],-1),P=n("tr",null,[n("td",null,"connectionInitSqls"),n("td"),n("td",null,"\u7269\u7406\u8FDE\u63A5\u521D\u59CB\u5316\u7684\u65F6\u5019\u6267\u884C\u7684sql")],-1),B=n("tr",null,[n("td",null,"exceptionSorter"),n("td"),n("td",null,"\u6839\u636EdbType\u81EA\u52A8\u8BC6\u522B \u5F53\u6570\u636E\u5E93\u629B\u51FA\u4E00\u4E9B\u4E0D\u53EF\u6062\u590D\u7684\u5F02\u5E38\u65F6\uFF0C\u629B\u5F03\u8FDE\u63A5")],-1),N=n("tr",null,[n("td",null,"filters"),n("td"),n("td",null,"\u5C5E\u6027\u7C7B\u578B\u662F\u5B57\u7B26\u4E32\uFF0C\u901A\u8FC7\u522B\u540D\u7684\u65B9\u5F0F\u914D\u7F6E\u6269\u5C55\u63D2\u4EF6\uFF0C\u5E38\u7528\u7684\u63D2\u4EF6\u6709\uFF1A \u76D1\u63A7\u7EDF\u8BA1\u7528\u7684filter:stat\u65E5\u5FD7\u7528\u7684filter:log4j\u9632\u5FA1sql\u6CE8\u5165\u7684filter:wall")],-1),M=n("tr",null,[n("td",null,"proxyFilters"),n("td"),n("td",null,"\u7C7B\u578B\u662FList\uFF0C\u5982\u679C\u540C\u65F6\u914D\u7F6E\u4E86filters\u548CproxyFilters\uFF0C\u662F\u7EC4\u5408\u5173\u7CFB\uFF0C\u5E76\u975E\u66FF\u6362\u5173\u7CFB")],-1),R=s(`<h3 id="_3-\u4F7F\u7528\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_3-\u4F7F\u7528\u4EE3\u7801" aria-hidden="true">#</a> \uFF083\uFF09\u4F7F\u7528\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>pool</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
1\u3001\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF1A
    \u6709\u4E00\u4E2A\u7F13\u51B2\u533A\uFF0C\u5B58\u50A8\u4E00\u5B9A\u91CF\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\uFF0C
    \u8FD9\u4E2A\u7F13\u51B2\u533A\u4F1A\u4E8B\u5148\u51C6\u5907\u597D\u4E00\u4E9B\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u7B49\u7528\u6237\u9700\u8981\u65F6\uFF0C\u5C31\u4ECE\u6C60\u4E2D\u62FF\u4E00\u4E2A\u73B0\u6210\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7ED9\u7528\u6237\u4F7F\u7528\uFF0C
    \u7528\u5B8C\u4E4B\u540E\uFF0C\u8FD4\u56DE\u8FDE\u63A5\u6C60\uFF0C\u5176\u4ED6\u4EBA\u4E0B\u6B21\u4E5F\u53EF\u4EE5\u7528\u3002
    \u5F53\u6C60\u4E2D\u7684\u8FDE\u63A5\u5BF9\u8C61\u90FD\u88AB\u5206\u914D\u51FA\u53BB\u4E86\uFF0C\u4F1A\u7533\u8BF7\u65B0\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u52A0\u5165\uFF0C\u4F46\u662F\u4E5F\u4E0D\u662F\u65E0\u9650\u91CF\u7533\u8BF7\uFF0C
    \u4F1A\u6709\u4E00\u4E2A\u4E0A\u9650\uFF0C\u5982\u679C\u6C60\u4E2D\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7684\u4E2A\u6570\u5230\u8FBE\u4E0A\u9650\uFF0C\u90A3\u4E48\u4E0D\u80FD\u5728\u589E\u52A0\u4E86\uFF0C
    \u5982\u679C\u6B64\u65F6\u6C60\u4E2D\u7684\u8FDE\u63A5\u5BF9\u8C61\u90FD\u88AB\u5206\u914D\u51FA\u53BB\u4E86\uFF0C\u6709\u65B0\u7528\u6237\u8981\u7533\u8BF7\u8FDE\u63A5\u5BF9\u8C61\uFF0C\u53EA\u80FD\u7B49\u5F85\u6216\u8005\u5931\u8D25\u3002
2\u3001\u4E3A\u4EC0\u4E48\u8981\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF1F
\uFF081\uFF09Java\u7A0B\u5E8F \u548C mysql\u670D\u52A1\u5668\u76F8\u5F53\u4E8EC/S\u7ED3\u6784\u7684\u7F51\u7EDC\u5E94\u7528\u7A0B\u5E8F\uFF0C\u800C\u4E14\u662F\u57FA\u4E8ETCP/IP\u534F\u8BAE\u7684\u7F51\u7EDC\u5E94\u7528\u7A0B\u5E8F\uFF0C
\u6BCF\u4E00\u6B21Java\u7A0B\u5E8F\u8981\u4E0Emysql\u670D\u52A1\u5668\u901A\u4FE1\uFF08\u6267\u884Csql\uFF09\uFF0C\u90FD\u9700\u8981\u5148\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u7136\u540E\u624D\u80FD\u901A\u4FE1\u3002
TCP/IP\u534F\u8BAE\uFF08\u9762\u5411\u8FDE\u63A5\u7684\u53EF\u9760\u7684\u57FA\u4E8E\u5B57\u8282\u6D41\u7684\u4F20\u8F93\u63A7\u5236\u534F\u8BAE\uFF09\uFF1A\u8981\u6C42\u5148\u4E09\u6B21\u63E1\u624B\uFF0C\u901A\u8FC7\u540E\u624D\u80FD\u6B63\u5F0F\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u7528\u5B8C\u4E86\uFF0C\u8FD8\u8981\u56DB\u6B21\u6325\u624B\uFF0C\u91CA\u653E\u8FDE\u63A5\u3002

A\uFF1A\u5982\u679C\u8FD9\u6837\u8D39\u52B2\u624D\u5EFA\u7ACB\u7684\u8FDE\u63A5\uFF0C\u6267\u884C\u4E86\u4E00\u4E2Asql\u4E4B\u540E\uFF0C\u5C31\u91CA\u653E\u4E86\uFF0C\u592A\u6D6A\u8D39\u4E86\u3002
B\uFF1A\u6BCF\u4E00\u6B21\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u8FC7\u7A0B\u90FD\u5F88\u9EBB\u70E6\uFF0C\u54CD\u5E94\u5C31\u6BD4\u8F83\u6162
C\uFF1A\u5982\u679C\u670D\u52A1\u5668\u7AEF\u6CA1\u6709\u9650\u5236\uFF0C\u6765\u4E00\u4E2A\u8BF7\u6C42\u5EFA\u7ACB\u8FDE\u63A5\uFF0Cmysql\u670D\u52A1\u5668\u5C31\u54CD\u5E94\uFF0C\u90A3\u4E48mysql\u670D\u52A1\u5668\u4F1A\u56E0\u4E3A\u9700\u8981\u5206\u914D\u592A\u591A\u7684\u8FDE\u63A5\uFF0C\u800C\u5185\u5B58\u6CC4\u6F0F\u3002

\uFF082\uFF09\u5EFA\u7ACB\u8FDE\u63A5\u6C60\u7684\u597D\u5904\uFF1A
A\uFF1A\u4E8B\u5148\u51C6\u5907\u597D\u4E00\u4E9B\u8FDE\u63A5\u7684\u8BDD\uFF0C\u7528\u6237\u6765\u4E86\u5C31\u5206\u914D\u7ED9\u5B83\uFF0C\u4E0D\u7528\u73B0\u5EFA\u7ACB\u8FDE\u63A5\uFF0C\u66F4\u5FEB\u3002
B\uFF1A\u8FDE\u63A5\u7528\u5B8C\uFF0C\u653E\u56DE\u6C60\u4E2D\uFF0C\u53EF\u4EE5\u91CD\u590D\u5229\u7528\uFF0C\u8FDE\u63A5\u7684\u5229\u7528\u7387\u589E\u52A0\u3002
C\uFF1A\u6C60\u53EF\u4EE5\u9650\u5236\u4E0A\u9650\uFF0C\u8FD9\u6837\u670D\u52A1\u5668\u5C31\u4E0D\u4F1A\u8F7B\u6613\u5D29\u6E83\uFF0C\u66F4\u5B89\u5168\u3002

\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u662F\u5728\u5E94\u7528\u7A0B\u5E8F\u670D\u52A1\u5668\u4E2D\uFF0C\u4E0D\u662Fmysql\u670D\u52A1\u5668\u4E2D\u3002

3\u3001\u5E02\u9762\u4E0A\u6709\u5F88\u591A\u73B0\u6210\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u6280\u672F\u3002
JDBC \u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4F7F\u7528 javax.sql.DataSource \u6765\u8868\u793A\uFF0CDataSource \u53EA\u662F\u4E00\u4E2A\u63A5\u53E3\uFF08\u901A\u5E38\u88AB\u79F0\u4E3A\u6570\u636E\u6E90\uFF09\uFF0C
\u8BE5\u63A5\u53E3\u901A\u5E38\u7531\u670D\u52A1\u5668(Weblogic, WebSphere, Tomcat)\u63D0\u4F9B\u5B9E\u73B0\uFF0C\u4E5F\u6709\u4E00\u4E9B\u5F00\u6E90\u7EC4\u7EC7\u63D0\u4F9B\u5B9E\u73B0\u3002

Druid\uFF1A\u662F\u963F\u91CC\u63D0\u4F9B\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\uFF0C\u636E\u8BF4\u662F\u96C6DBCP \u3001C3P0 \u3001Proxool \u4F18\u70B9\u4E8E\u4E00\u8EAB\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u6C60

4\u3001\u5982\u4F55\u4F7F\u7528\u5FB7\u9C81\u4F0A\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u6280\u672F
\uFF081\uFF09\u5F15\u5165jar
A\uFF1A\u628Adruid-1.1.10.jar\u653E\u5230jdbclibs\u76EE\u5F55\u4E0B
B\uFF1A\u9879\u76EE\u8BBE\u7F6E-&gt;modules-&gt;\u5F53\u524D\u6A21\u5757--&gt;dependencies--&gt;\u9009\u62E9\u4E0A\u9762\u5F15\u5165\u8FC7\u7684jdbclibs\u5E93\uFF0C\u53BB\u6389
C\uFF1A\u91CD\u65B0\u9009\u62E9\u6A21\u5757\u4E0Bjdbclibs\u6587\u4EF6\u5939-&gt;\u53F3\u952E-&gt;Add as library...
\uFF082\uFF09\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u914D\u7F6E\u76F8\u5173\u5C5E\u6027\u4FE1\u606F
\u57FA\u672C\uFF1A\u9A71\u52A8\u7C7B\u540D\u3001url\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u3001\u8981\u8FDE\u63A5\u7684\u6570\u636E\u540D\u7B49\uFF0C\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u5C31\u662F\u7528\u6765\u7BA1\u7406\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u90A3\u4E48\u5FC5\u987B\u8981\u6709\u80FD\u591F\u5EFA\u7ACB\u8FDE\u63A5\u7684\u57FA\u672C\u5C5E\u6027
\u5176\u4ED6\uFF1A\u521D\u59CB\u5316\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7684\u6570\u91CF\u3001\u6700\u5927\u7684\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7684\u6570\u91CF\u7B49
\u5728src\u4E0B\u5EFA\u8BAE druid.properties

\u6CE8\u610F\uFF0C\u8FD9\u4E9B\u5C5E\u6027\u53C2\u6570\u7684key\u4E0D\u80FD\u968F\u610F\u547D\u540D\uFF0C\u5FC5\u987B\u548C\u5B83\u8981\u6C42\u7684\u4E00\u6837\u3002
driverClassName=com.mysql.cj.jdbc.Driver
url=jdbc:mysql://localhost:3306/atguigu?serverTimezone=UTC&amp;rewriteBatchedStatements=true
username=root
password=123456
initialSize=5  \u521D\u59CB\u53165\u4E2A\u8FDE\u63A5
maxActive=10   \u6700\u591A10\u4E2A\u8FDE\u63A5
maxWait=1000    \u5982\u679C10\u4E2A\u90FD\u5206\u914D\u51FA\u53BB\u4E86\uFF0C\u65B0\u7528\u6237\u7B49\u5F851000\u6BEB\u79D2\u518D\u770B\u6709\u6CA1\u6709\uFF0C\u5982\u679C\u6709\uFF0C\u83B7\u53D6\uFF0C\u6CA1\u6709\u5C31\u62A5\u5F02\u5E38

\uFF083\uFF09\u521B\u5EFA\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u5BF9\u8C61
\u5DE5\u5382\u6A21\u5F0F\uFF0C\u901A\u8FC7\u5DE5\u5382\u7C7B\u7684\u9759\u6001\u65B9\u6CD5\uFF0C\u521B\u5EFA\u8FDE\u63A5\u6C60\u5BF9\u8C61\u3002

\uFF084\uFF09\u83B7\u53D6\u8FDE\u63A5\u5BF9\u8C61

\u8BB2\u89E3\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7684\u5185\u5BB9\uFF0C\u53EA\u662F\u6539\u53D8\u4E86\uFF0C\u83B7\u53D6\u8FDE\u63A5\u7684\u4F4D\u7F6E\u548C\u65B9\u5F0F\uFF0C\u5176\u4ED6\u4EE3\u7801\u4E0D\u53D8\u3002
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestPool</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD9\u662F\u4E00\u4E2Amap</span>
        <span class="token comment">//\u56E0\u4E3Adruid.properties\u6587\u4EF6\u662F\u5728src\u4E0B\uFF0C\u6700\u540E\u4F1A\u968F\u7740.java\u6587\u4EF6\u4E00\u8D77\u7F16\u8BD1\u5230\u7C7B\u8DEF\u5F84\u4E0B\uFF08class\uFF09</span>
        <span class="token comment">//\u53EF\u4EE5\u901A\u8FC7\u7C7B\u52A0\u8F7D\u5668\u5E2E\u6211\u4EEC\u52A0\u8F7D\u8D44\u6E90\u914D\u7F6E\u6587\u4EF6</span>
        pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">TestPool</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DataSource</span> ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*        Connection connection = ds.getConnection();
        System.out.println(&quot;connection = &quot; + connection);*/</span>

        <span class="token comment">//\u6F14\u793A\u83B7\u53D615\u4E2A\u8FDE\u63A5\u5BF9\u8C61</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">15</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u591A\u7EBF\u7A0B\uFF0C\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u4EE3\u8868\u4E00\u4E2A\u7528\u6237\u6765\u83B7\u53D6\u8FDE\u63A5</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">//......\u589E\u5220\u6539\u67E5\u4EE3\u7801\uFF0C\u7701\u7565</span>

                        <span class="token comment">//\u8FD9\u91CC\u6CA1\u6709close\u65B9\u6CD5\uFF0C\u8BF4\u660E\u6CA1\u6709\u8FD8\u56DE\u53BB</span>
                        <span class="token comment">//\u5982\u679C\u52A0\u4E00\u53E5close</span>
                        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6B64\u65F6\u4E0D\u662F\u65AD\u5F00\u8FDE\u63A5\uFF0C\u662F\u8FD8\u7ED9\u8FDE\u63A5\u6C60</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
\u5982\u679C\u4E0A\u9762\u7EBF\u7A0B\u4E2D\u6CA1\u6709conn.close()\uFF0C\u76F8\u5F53\u4E8E\u6CA1\u6709\u8FD8\u56DE\u53BB\uFF0C10\u4E2A\u5206\u914D\u5B8C\u4E86\uFF0C\u5C31\u6CA1\u6709\u4E86
com.mysql.cj.jdbc.ConnectionImpl@3eed96a1       1
com.mysql.cj.jdbc.ConnectionImpl@15e9413a       2
com.mysql.cj.jdbc.ConnectionImpl@57c61316       3
com.mysql.cj.jdbc.ConnectionImpl@1015657a       4
com.mysql.cj.jdbc.ConnectionImpl@521d5e1e       5
com.mysql.cj.jdbc.ConnectionImpl@58e2511d       6
com.mysql.cj.jdbc.ConnectionImpl@11c7d30        7
com.mysql.cj.jdbc.ConnectionImpl@53791eb8       8
com.mysql.cj.jdbc.ConnectionImpl@48914ff6       9
com.mysql.cj.jdbc.ConnectionImpl@1686f135       10
com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 1015, active 10, maxActive 10, creating 0

 \u7B2C11\u4E2A\u6765\u62FF\u8FDE\u63A5\u62A5\u9519\uFF0C\u540E\u9762\u6CA1\u6709\u7B2C12\u4E2A
 */</span>


<span class="token comment">/*
\u5982\u679C\u4E0A\u9762\u7EBF\u7A0B\u4E2D\u6709conn.close()\uFF0C\u76F8\u5F53\u4E8E\u6709\u8FD8\u56DE\u53BB\uFF0C10\u4E2A\u8FDE\u63A5\u53EF\u4EE5\u91CD\u590D\u4F7F\u7528
com.mysql.cj.jdbc.ConnectionImpl@1accbdbb
com.mysql.cj.jdbc.ConnectionImpl@3b74ade1
com.mysql.cj.jdbc.ConnectionImpl@5901f646
com.mysql.cj.jdbc.ConnectionImpl@15e9413a
com.mysql.cj.jdbc.ConnectionImpl@1015657a
com.mysql.cj.jdbc.ConnectionImpl@5901f646  \u91CD\u590D\u4F7F\u75281\u6B21
com.mysql.cj.jdbc.ConnectionImpl@15e9413a   \u91CD\u590D\u4F7F\u75281\u6B21
com.mysql.cj.jdbc.ConnectionImpl@3b74ade1  \u91CD\u590D\u4F7F\u75281\u6B21
com.mysql.cj.jdbc.ConnectionImpl@1015657a   \u91CD\u590D\u4F7F\u75281\u6B21
com.mysql.cj.jdbc.ConnectionImpl@1accbdbb   \u91CD\u590D\u4F7F\u75281\u6B21
com.mysql.cj.jdbc.ConnectionImpl@5901f646   \u91CD\u590D\u4F7F\u75282\u6B21
com.mysql.cj.jdbc.ConnectionImpl@15e9413a   \u91CD\u590D\u4F7F\u75282\u6B21
com.mysql.cj.jdbc.ConnectionImpl@3b74ade1   \u91CD\u590D\u4F7F\u75282\u6B21
com.mysql.cj.jdbc.ConnectionImpl@1accbdbb   \u91CD\u590D\u4F7F\u75282\u6B21
\u5341\u4E8C\u6708 03, 2021 2:33:47 \u4E0B\u5348 com.alibaba.druid.pool.DruidDataSource info
com.mysql.cj.jdbc.ConnectionImpl@1accbdbb
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u56DB\u7AE0-\u5C01\u88C5dao\u5C42\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u56DB\u7AE0-\u5C01\u88C5dao\u5C42\u4EE3\u7801" aria-hidden="true">#</a> \u7B2C\u56DB\u7AE0 \u5C01\u88C5DAO\u5C42\u4EE3\u7801</h1><h2 id="_4-1-dao" tabindex="-1"><a class="header-anchor" href="#_4-1-dao" aria-hidden="true">#</a> 4.1 DAO</h2><p>Java\u662F\u9762\u5411\u5BF9\u8C61\u8BED\u8A00\uFF0C\u6570\u636E\u5728Java\u4E2D\u901A\u5E38\u4EE5\u5BF9\u8C61\u7684\u5F62\u5F0F\u5B58\u5728\u3002</p><p>\u628A\u6570\u636E\u5E93\u4E2D\u7684\u8BB0\u5F55&lt;----&gt;Java\u7684\u5BF9\u8C61\u5BF9\u5E94\u8D77\u6765\u3002</p><p>\u6211\u4EEC\u628A\u8BBF\u95EE\u6570\u636E\u5E93\u7684\u4EE3\u7801\u5C01\u88C5\u8D77\u6765\uFF0C\u8FD9\u4E9B\u7C7B\u79F0\u4E3ADAO\uFF08Data Access Object\uFF09\u3002\u5B83\u76F8\u5F53\u4E8E\u662F\u4E00\u4E2A\u6570\u636E\u8BBF\u95EE\u63A5\u53E3\uFF0C\u5939\u5728\u4E1A\u52A1\u903B\u8F91\u4E0E\u6570\u636E\u5E93\u8D44\u6E90\u4E2D\u95F4\u3002</p><p><img src="https://photo.sneoo.com/spring5/202207031643552.png" alt="JavaEE\u9879\u76EE\u7684\u4E09\u5C42\u7ED3\u6784"></p><h3 id="_1\u3001\u90E8\u95E8\u7C7B\u548Cdao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u90E8\u95E8\u7C7B\u548Cdao\u63A5\u53E3" aria-hidden="true">#</a> 1\u3001\u90E8\u95E8\u7C7B\u548CDAO\u63A5\u53E3</h3><h4 id="\u90E8\u95E8\u7C7B1-0\u7248-\u6709mysql-java\u7C7B\u578B\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u90E8\u95E8\u7C7B1-0\u7248-\u6709mysql-java\u7C7B\u578B\u95EE\u9898" aria-hidden="true">#</a> \u90E8\u95E8\u7C7B1.0\u7248\uFF08\u6709mysql&lt;--&gt;Java\u7C7B\u578B\u95EE\u9898\uFF09</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> did<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> dname<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">,</span> <span class="token class-name">String</span> dname<span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dname <span class="token operator">=</span> dname<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDname</span><span class="token punctuation">(</span><span class="token class-name">String</span> dname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dname <span class="token operator">=</span> dname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Department{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token string">&quot;, dname=&#39;&quot;</span> <span class="token operator">+</span> dname <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, description=&#39;&quot;</span> <span class="token operator">+</span> description <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u90E8\u95E8\u7C7B2-0\u7248" tabindex="-1"><a class="header-anchor" href="#\u90E8\u95E8\u7C7B2-0\u7248" aria-hidden="true">#</a> \u90E8\u95E8\u7C7B2.0\u7248</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> did<span class="token punctuation">;</span><span class="token comment">//\u628Aint\u4FEE\u6539\u4E3AInteger</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> dname<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token class-name">String</span> dname<span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dname <span class="token operator">=</span> dname<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDname</span><span class="token punctuation">(</span><span class="token class-name">String</span> dname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dname <span class="token operator">=</span> dname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token class-name">String</span> description<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Department{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token string">&quot;, dname=&#39;&quot;</span> <span class="token operator">+</span> dname <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, description=&#39;&quot;</span> <span class="token operator">+</span> description <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u90E8\u95E8dao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u90E8\u95E8dao\u63A5\u53E3" aria-hidden="true">#</a> \u90E8\u95E8DAO\u63A5\u53E3</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DepartmentDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6DFB\u52A0\u4E00\u4E2A\u90E8\u95E8</span>
    <span class="token keyword">boolean</span> <span class="token function">addDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u4FEE\u6539\u90E8\u5206\u4FE1\u606F</span>
    <span class="token keyword">boolean</span> <span class="token function">updateDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6839\u636E\u90E8\u95E8\u7F16\u53F7\uFF0C\u67E5\u8BE2\u4E00\u4E2A\u90E8\u95E8\u5BF9\u8C61</span>
    <span class="token class-name">Department</span> <span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u67E5\u8BE2\u6240\u6709\u90E8\u95E8\u5BF9\u8C61</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6839\u636E\u4E3B\u952Edid\u5220\u9664\u4E00\u4E2A\u90E8\u95E8</span>
    <span class="token keyword">boolean</span> <span class="token function">removeByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5176\u4ED6\u65B9\u6CD5\u7565</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001\u5458\u5DE5\u7C7B\u548Cdao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5458\u5DE5\u7C7B\u548Cdao\u63A5\u53E3" aria-hidden="true">#</a> 2\u3001\u5458\u5DE5\u7C7B\u548CDAO\u63A5\u53E3</h3><h4 id="\u5458\u5DE5\u7C7B1-0\u7248-\u6709mysql-java\u7C7B\u578B\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5458\u5DE5\u7C7B1-0\u7248-\u6709mysql-java\u7C7B\u578B\u95EE\u9898" aria-hidden="true">#</a> \u5458\u5DE5\u7C7B1.0\u7248\uFF08\u6709mysql&lt;--&gt;Java\u7C7B\u578B\u95EE\u9898\uFF09</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> eid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ename<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> commissionPct<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">char</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> workPlace<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> hiredate<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> jobId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> mid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> did<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getEid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eid <span class="token operator">=</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEname</span><span class="token punctuation">(</span><span class="token class-name">String</span> ename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ename <span class="token operator">=</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token keyword">double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommissionPct</span><span class="token punctuation">(</span><span class="token keyword">double</span> commissionPct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>commissionPct <span class="token operator">=</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">Date</span> birthday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">char</span> <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGender</span><span class="token punctuation">(</span><span class="token keyword">char</span> gender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTel</span><span class="token punctuation">(</span><span class="token class-name">String</span> tel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tel <span class="token operator">=</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWorkPlace</span><span class="token punctuation">(</span><span class="token class-name">String</span> workPlace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>workPlace <span class="token operator">=</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHiredate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> hiredate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hiredate <span class="token operator">=</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJobId</span><span class="token punctuation">(</span><span class="token keyword">int</span> jobId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jobId <span class="token operator">=</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMid</span><span class="token punctuation">(</span><span class="token keyword">int</span> mid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mid <span class="token operator">=</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Employee{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;eid=&quot;</span> <span class="token operator">+</span> eid <span class="token operator">+</span>
                <span class="token string">&quot;, ename=&#39;&quot;</span> <span class="token operator">+</span> ename <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, salary=&quot;</span> <span class="token operator">+</span> salary <span class="token operator">+</span>
                <span class="token string">&quot;, commissionPct=&quot;</span> <span class="token operator">+</span> commissionPct <span class="token operator">+</span>
                <span class="token string">&quot;, birthday=&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span>
                <span class="token string">&quot;, gender=&quot;</span> <span class="token operator">+</span> gender <span class="token operator">+</span>
                <span class="token string">&quot;, tel=&#39;&quot;</span> <span class="token operator">+</span> tel <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, email=&#39;&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, address=&#39;&quot;</span> <span class="token operator">+</span> address <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, workPlace=&#39;&quot;</span> <span class="token operator">+</span> workPlace <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, hiredate=&quot;</span> <span class="token operator">+</span> hiredate <span class="token operator">+</span>
                <span class="token string">&quot;, jobId=&quot;</span> <span class="token operator">+</span> jobId <span class="token operator">+</span>
                <span class="token string">&quot;, mid=&quot;</span> <span class="token operator">+</span> mid <span class="token operator">+</span>
                <span class="token string">&quot;, did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5458\u5DE5\u7C7B2-0\u7248" tabindex="-1"><a class="header-anchor" href="#\u5458\u5DE5\u7C7B2-0\u7248" aria-hidden="true">#</a> \u5458\u5DE5\u7C7B2.0\u7248</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> eid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ename<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> commissionPct<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> workPlace<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> hiredate<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> jobId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> mid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> did<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getEid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>eid <span class="token operator">=</span> eid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEname</span><span class="token punctuation">(</span><span class="token class-name">String</span> ename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ename <span class="token operator">=</span> ename<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token class-name">Double</span> salary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>salary <span class="token operator">=</span> salary<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommissionPct</span><span class="token punctuation">(</span><span class="token class-name">BigDecimal</span> commissionPct<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>commissionPct <span class="token operator">=</span> commissionPct<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token class-name">Date</span> birthday<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>birthday <span class="token operator">=</span> birthday<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGender</span><span class="token punctuation">(</span><span class="token class-name">String</span> gender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTel</span><span class="token punctuation">(</span><span class="token class-name">String</span> tel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tel <span class="token operator">=</span> tel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWorkPlace</span><span class="token punctuation">(</span><span class="token class-name">String</span> workPlace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>workPlace <span class="token operator">=</span> workPlace<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHiredate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> hiredate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hiredate <span class="token operator">=</span> hiredate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJobId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> jobId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>jobId <span class="token operator">=</span> jobId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> mid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mid <span class="token operator">=</span> mid<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>did <span class="token operator">=</span> did<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Employee{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;eid=&quot;</span> <span class="token operator">+</span> eid <span class="token operator">+</span>
                <span class="token string">&quot;, ename=&#39;&quot;</span> <span class="token operator">+</span> ename <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, salary=&quot;</span> <span class="token operator">+</span> salary <span class="token operator">+</span>
                <span class="token string">&quot;, commissionPct=&quot;</span> <span class="token operator">+</span> commissionPct <span class="token operator">+</span>
                <span class="token string">&quot;, birthday=&quot;</span> <span class="token operator">+</span> birthday <span class="token operator">+</span>
                <span class="token string">&quot;, gender=&quot;</span> <span class="token operator">+</span> gender <span class="token operator">+</span>
                <span class="token string">&quot;, tel=&#39;&quot;</span> <span class="token operator">+</span> tel <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, email=&#39;&quot;</span> <span class="token operator">+</span> email <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, address=&#39;&quot;</span> <span class="token operator">+</span> address <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, workPlace=&#39;&quot;</span> <span class="token operator">+</span> workPlace <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, hiredate=&quot;</span> <span class="token operator">+</span> hiredate <span class="token operator">+</span>
                <span class="token string">&quot;, jobId=&quot;</span> <span class="token operator">+</span> jobId <span class="token operator">+</span>
                <span class="token string">&quot;, mid=&quot;</span> <span class="token operator">+</span> mid <span class="token operator">+</span>
                <span class="token string">&quot;, did=&quot;</span> <span class="token operator">+</span> did <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5458\u5DE5dao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u5458\u5DE5dao\u63A5\u53E3" aria-hidden="true">#</a> \u5458\u5DE5DAO\u63A5\u53E3</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6DFB\u52A0\u4E00\u4E2A\u5458\u5DE5</span>
    <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6839\u636E\u5458\u5DE5\u7F16\u53F7\u67E5\u8BE2\u4E00\u4E2A\u5458\u5DE5\u5BF9\u8C61</span>
    <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6839\u636E\u5458\u5DE5\u7F16\u53F7\u5220\u9664\u4E00\u4E2A\u5458\u5DE5\u5BF9\u8C61\uFF0C\u5373\u5220\u9664\u4E00\u6761\u8BB0\u5F55</span>
    <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u67E5\u8BE2\u6240\u6709\u7684\u5458\u5DE5\u5BF9\u8C61</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5176\u4ED6\u65B9\u6CD5\u7565</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-2-jdbctools\u5DE5\u5177\u7C7B1-0\u7248" tabindex="-1"><a class="header-anchor" href="#_4-2-jdbctools\u5DE5\u5177\u7C7B1-0\u7248" aria-hidden="true">#</a> 4.2 JDBCTools\u5DE5\u5177\u7C7B1.0\u7248</h2><p>\u53D1\u73B0\u6240\u6709\u5BF9\u6570\u636E\u5E93\u7684\u64CD\u4F5C\uFF08\u589E\u3001\u5220\u3001\u6539\u3001\u67E5\uFF09\u90FD\u8981\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\uFF0C\u6570\u636E\u5E93\u8FDE\u63A5\u53EF\u4EE5\u901A\u8FC7DriverManager\u5DE5\u5177\u7C7B\u83B7\u53D6\uFF0C\u4E5F\u53EF\u4EE5\u4ECE\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4E2D\u83B7\u53D6\u3002</p><p>\u6240\u4EE5\u628A\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7684\u83B7\u53D6\u548C\u91CA\u653E\u5C01\u88C5\u5230JDBCTools\u5DE5\u5177\u7C7B\u4E2D\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u8FD9\u4E2A\u7C7B\u4E13\u95E8\u5C01\u88C5\u83B7\u53D6\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u548C\u91CA\u653E\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7684\u65B9\u6CD5\u3002
\u56E0\u4E3A\u6211\u4EEC\u5DF2\u7ECF\u8BB2\u4E86\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7684\u597D\u5904\uFF0C\u6240\u4EE5\uFF0C\u5C31\u76F4\u63A5\u7528\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7684\u65B9\u5F0F\u6765\u521B\u5EFA\u8FDE\u63A5\u3002
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCTools</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1\u3001\u6570\u636E\u6E90,\u5373\u8FDE\u63A5\u6C60</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>

    <span class="token comment">//\u9759\u6001\u53D8\u91CF\u7684\u521D\u59CB\u5316\uFF0C\u53EF\u4EE5\u4F7F\u7528\u9759\u6001\u4EE3\u7801\u5757</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">freeConnection</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u56E0\u4E3A\u6709\u7684\u7528\u6237\u4F1A\u628A\u6570\u636E\u5E93\u8FDE\u63A5\u8BBE\u7F6E\u4E3A\u624B\u52A8\u63D0\u4EA4\u6A21\u5F0F  conn.setAutoCommit(false)</span>
            <span class="token comment">//\u4E3A\u4E86\u4E0D\u5F71\u54CD\u5176\u4ED6\u7528\u6237\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u5C06 \u4E8B\u52A1\u63D0\u4EA4\u6A21\u5F0F\u8FD8\u539F\u6210\u81EA\u52A8\u63D0\u4EA4\u6A21\u5F0F</span>
            <span class="token comment">//\u56E0\u4E3A\u8FD9\u91CCclose\u662F\u628A\u8FDE\u63A5\u653E\u56DE\u6C60\u4E2D\uFF0C\u5927\u5BB6\u91CD\u590D\u4F7F\u7528</span>
            conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4E8B\u52A1\u63D0\u4EA4\u6A21\u5F0F\u8FD8\u539F\u6210\u81EA\u52A8\u63D0\u4EA4\u6A21\u5F0F</span>
            conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-3-\u53CD\u5C04\u5C01\u88C5basedaoimpl\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-3-\u53CD\u5C04\u5C01\u88C5basedaoimpl\u7C7B" aria-hidden="true">#</a> 4.3 \u53CD\u5C04\u5C01\u88C5BaseDAOImpl\u7C7B</h2><p>\u57FA\u672C\u4E0A\u6BCF\u4E00\u4E2A\u6570\u636E\u8868\u90FD\u5E94\u8BE5\u6709\u4E00\u4E2A\u5BF9\u5E94\u7684DAO\u63A5\u53E3\u53CA\u5176\u5B9E\u73B0\u7C7B\uFF0C\u53D1\u73B0\u5BF9\u6240\u6709\u8868\u7684\u64CD\u4F5C\uFF08\u589E\u3001\u5220\u3001\u6539\u3001\u67E5\uFF09\u4EE3\u7801\u91CD\u590D\u5EA6\u5F88\u9AD8\uFF0C\u6240\u4EE5\u53EF\u4EE5\u62BD\u53D6\u516C\u5171\u4EE3\u7801\uFF0C\u7ED9\u8FD9\u4E9BDAO\u7684\u5B9E\u73B0\u7C7B\u53EF\u4EE5\u62BD\u53D6\u4E00\u4E2A\u516C\u5171\u7684\u7236\u7C7B\uFF0C\u6211\u4EEC\u79F0\u4E3ABaseDAOImpl.</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">JDBCTools</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSetMetaData</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
\u8FD9\u91CC\u62BD\u53D6\u7684\u662F\u6240\u6709DAO\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\u7684\u516C\u5171\u7236\u7C7B\uFF0C\u58F0\u660E\u4E3A\u62BD\u8C61\u7684\uFF0C\u76EE\u7684\u662F\u5E0C\u671B\u7A0B\u5E8F\u5458\u4E0D\u8981\u76F4\u63A5\u521B\u5EFABaseDAOImpl\u7684\u5BF9\u8C61\uFF0C
\u800C\u662F\u521B\u5EFA\u5B83\u7684\u5B50\u7C7B\u5BF9\u8C61\u6765\u4F7F\u7528\u5177\u4F53\u7684\u529F\u80FD\u3002
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDAOImpl</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * \u901A\u7528\u7684\u589E\u5220\u6539\u7684\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">sql</span> String \u8981\u6267\u884C\u7684sql
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> Object... \u5982\u679Csql\u4E2D\u6709\uFF1F\uFF0C\u5C31\u4F20\u5165\u5BF9\u5E94\u4E2A\u6570\u7684\uFF1F\u8981\u8BBE\u7F6E\u503C
     * <span class="token keyword">@return</span> int \u6267\u884C\u7684\u7ED3\u679C
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u8FD9\u4E2Asql\u53EF\u80FD\u5E26\uFF1F</span>
            <span class="token comment">//\u8BBE\u7F6E\u8FD9\u4E9B\uFF1F</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u867D\u7136\uFF1F\u7684\u5E8F\u53F7\u662F\u4ECE1\u5F00\u59CB\uFF0Cargs[i-1]\u56E0\u4E3A\u6570\u7EC4\u7684\u4E0B\u6807\u662F\u4ECE0\u5F00\u59CB</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> pst<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u628A\u7F16\u8BD1\u65F6\u5F02\u5E38\u8F6C\u4E3A\u8FD0\u884C\u65F6\u5F02\u5E38</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u67E5\u8BE2\u5355\u4E2A\u5BF9\u8C61\u7684\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">clazz</span> Class \u8BB0\u5F55\u5BF9\u5E94\u7684\u7C7B\u7C7B\u578B
     * <span class="token keyword">@param</span> <span class="token parameter">sql</span> String \u67E5\u8BE2\u8BED\u53E5
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> Object... \u5982\u679Csql\u4E2D\u6709\uFF1F\uFF0C\u5373\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\uFF1F\u7684\u503C
     * <span class="token keyword">@param</span> \`\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>\`\`\u6CDB\u578B\u65B9\u6CD5\u58F0\u660E\u7684\u6CDB\u578B\u7C7B\u578B
     * <span class="token keyword">@return</span>  T \u4E00\u4E2A\u5BF9\u8C61
     */</span>
    <span class="token keyword">protected</span> \`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`<span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`clazz<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">List</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`list <span class="token operator">=</span> <span class="token function">getList</span><span class="token punctuation">(</span>clazz<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>list <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">getList</span><span class="token punctuation">(</span>clazz<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u901A\u7528\u67E5\u8BE2\u591A\u4E2A\u5BF9\u8C61\u7684\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">clazz</span> Class \u8BB0\u5F55\u5BF9\u5E94\u7684\u7C7B\u7C7B\u578B
     * <span class="token keyword">@param</span> <span class="token parameter">sql</span> String \u67E5\u8BE2\u8BED\u53E5
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> Object... \u5982\u679Csql\u4E2D\u6709\uFF1F\uFF0C\u5373\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\uFF1F\u7684\u503C
     * <span class="token keyword">@param</span> \`\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>\`\`\u6CDB\u578B\u65B9\u6CD5\u58F0\u660E\u7684\u6CDB\u578B\u7C7B\u578B
     * <span class="token keyword">@return</span> List\`\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>\`\`\u628A\u591A\u4E2A\u5BF9\u8C61\u653E\u5230\u4E86List\u96C6\u5408
     */</span>
    <span class="token keyword">protected</span> \`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`<span class="token class-name">List</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`<span class="token function">getList</span><span class="token punctuation">(</span><span class="token class-name">Class</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`clazz<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u8FD9\u4E2Asql\u53EF\u80FD\u5E26\uFF1F</span>
            <span class="token comment">//\u8BBE\u7F6E\u8FD9\u4E9B\uFF1F</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                pst<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u867D\u7136\uFF1F\u7684\u5E8F\u53F7\u662F\u4ECE1\u5F00\u59CB\uFF0Cargs[i-1]\u56E0\u4E3A\u6570\u7EC4\u7684\u4E0B\u6807\u662F\u4ECE0\u5F00\u59CB</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//ResultSet\u7ED3\u679C\u96C6\u4E2D\u4E0D\u4EC5\u4EC5\u6709\u6570\u636E\uFF0C\u8FD8\u6709\u8868\u5934\uFF08\u5B57\u6BB5\u540D\uFF09\u4EE5\u53CA\u5B57\u6BB5\u7684\u6570\u91CF\uFF08\u5C31\u662F\u5C5E\u6027\u7684\u6570\u91CF\uFF09</span>
            <span class="token comment">//\u8868\u548CJavabean\u662F\u5BF9\u5E94\u5173\u7CFB</span>
            <span class="token comment">//t_department\u8868\u548CDepartment\u7C7B\u662F\u5BF9\u5E94\u5173\u7CFB</span>
            <span class="token comment">//t_employee\u8868\u548CEmployee\u7C7B\u662F\u5BF9\u5E94\u5173\u7CFB</span>
            <span class="token class-name">ResultSetMetaData</span> metaData <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5143\u6570\u636E\uFF0C\u5C31\u662F\u8868\u5934\u90A3\u4E9B\u4FE1\u606F</span>

            <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//while\u5FAA\u73AF\u5FAA\u73AF\u4E00\u6B21\uFF0C\u8868\u793A\u6709\u4E00\u884C\u8BB0\u5F55\uFF0C\u5BF9\u5E94\u7684\u662FJava\u7684\u4E00\u4E2A\u5BF9\u8C61</span>
                <span class="token comment">//T t = T.class.newInstance();//\u672A\u77E5\u7C7B\u578BT\uFF0C\u662F\u4E0D\u80FD\u901A\u8FC7T.class\u83B7\u53D6\u5B83\u7684Class\u5BF9\u8C61</span>
                <span class="token class-name">T</span> t <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8981\u6C42\u8FD9\u4E2AJavabean\u7684\u7C7B\u578B\u5FC5\u987B\u6709\u65E0\u53C2\u6784\u9020</span>

                <span class="token comment">//\u65E0\u53C2\u6784\u9020\u521B\u5EFA\u7684\u5BF9\u8C61\uFF0C\u6240\u6709\u5C5E\u6027\u90FD\u662F\u9ED8\u8BA4\u503C</span>
                <span class="token comment">//\u9700\u8981\u4ECE\u7ED3\u679C\u96C6\u4E2D\u628A\u8BB0\u5F55\u4E2D\u5355\u5143\u683C\u7684\u6570\u636E\u53D6\u51FA\u6765\u7ED9\u5BF9\u8C61\u7684\u5C5E\u6027\u8D4B\u503C</span>
<span class="token comment">//                Field field = clazz.getDeclaredField(&quot;\u5C5E\u6027\u540D&quot;);</span>
<span class="token comment">//                field.set(t, &quot;\u5C5E\u6027\u503C&quot;);</span>
                <span class="token keyword">int</span> columnCount <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5217\u7684\u6570\u91CF\uFF0C\u5B57\u6BB5\u7684\u6570\u91CF\uFF0C\u5C5E\u6027\u7684\u6570\u91CF</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//for\u5FAA\u73AF\u5FAA\u73AF\u4E00\u6B21\uFF0C\u662F\u83B7\u53D6\u4E00\u6761\u8BB0\u5F55\u7684\u4E00\u4E2A\u5355\u5143\u683C</span>
                    <span class="token class-name">Object</span> value <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C5E\u6027\u503C</span>

                   <span class="token comment">// String columnName = metaData.getColumnName(i);//\u83B7\u53D6\u7B2Ci\u4E2A\u5355\u5143\u683C\u7684\u6807\u9898\uFF0C\u5B57\u6BB5\u540D\uFF0C\u5C5E\u6027\u540D</span>
                    <span class="token comment">//getColumnName\u662F\u8868\u7ED3\u6784\u4E2D\u5B57\u6BB5\u540D</span>
                    <span class="token comment">//\u800C\u6211\u4EECbean\u4E2D\u7684\u5C5E\u6027\u540D\u548C\u8868\u4E2D\u7684\u5B57\u6BB5\u540D\u53EF\u80FD\u4E0D\u5BF9\u5E94\uFF0C\u901A\u8FC7\u53D6\u522B\u540D\u7684\u65B9\u5F0F\u5BF9\u5E94\u4E86</span>
                    <span class="token class-name">String</span> columnName <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnLabel</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5982\u679C\u5B57\u6BB5\u6CA1\u6709\u53D6\u522B\u540D\uFF0C\u90A3\u4E48\u5C31\u7528\u539F\u540D\uFF0C\u6709\u53D6\u522B\u540D\u5C31\u7528\u522B\u540D</span>
                    <span class="token comment">//\u5373getColumnLabel\u771F\u6B63\u83B7\u53D6 \u7ED3\u679C\u96C6\u7684\u8868\u5934\uFF08\u663E\u793A\u7684\u8868\u5934</span>

                    <span class="token class-name">Field</span> field <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5C5E\u6027\u79C1\u6709\u5316\uFF0C\u9700\u8981\u8BBE\u7F6EsetAccessible(true)\u624D\u80FD\u64CD\u4F5C</span>
                    field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>


        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u628A\u7F16\u8BD1\u65F6\u5F02\u5E38\u8F6C\u4E3A\u8FD0\u884C\u65F6\u5F02\u5E38</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-4-dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_4-4-dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 4.4 DAO\u5B9E\u73B0\u7C7B</h2><h3 id="_1\u3001\u90E8\u95E8dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u90E8\u95E8dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 1\u3001\u90E8\u95E8DAO\u5B9E\u73B0\u7C7B</h3><h4 id="sql" tabindex="-1"><a class="header-anchor" href="#sql" aria-hidden="true">#</a> sql</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>insert into t_department values(null,?,?);
select * from t_department;
update t_department set dname=?,description=? where did=?;
select * from t_department where did = ?;
delete from t_department where did = ?;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u90E8\u95E8dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u90E8\u95E8dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> \u90E8\u95E8DAO\u5B9E\u73B0\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">DepartmentDAO</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DepartmentDAOImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDAOImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DepartmentDAO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_department values(null,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u7B2C\u4E00\u4E2Anull\u662F\u56E0\u4E3A\u90E8\u95E8\u8868\u7684\u7B2C\u4E00\u4E2A\u5B57\u6BB5did\u662F\u81EA\u589E\u7684</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">updateDepartment</span><span class="token punctuation">(</span><span class="token class-name">Department</span> department<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_department set dname=? , description=? where did =?&quot;</span><span class="token punctuation">;</span><span class="token comment">//\u6839\u636Edid\u53EF\u4EE5\u5B9A\u4F4D\u5230\u4E00\u6761\u8BB0\u5F55\uFF0C\u4E3B\u952E</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>department<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Department</span> <span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span><span class="token string">&quot;select * from t_department where did =?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Department</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>did<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_department&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token class-name">Department</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeByDid</span><span class="token punctuation">(</span><span class="token keyword">int</span> did<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_department where did = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>did<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6D4B\u8BD5\u90E8\u95E8dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5\u90E8\u95E8dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> \u6D4B\u8BD5\u90E8\u95E8DAO\u5B9E\u73B0\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">DepartmentDAOImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDepartmentDAOImpl</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        all<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Department</span> dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5\u90E8\u95E83&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6D4B\u8BD5\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u56E0\u4E3Adid\u662F\u81EA\u589E\u957F\u2019</span>
        <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">addDepartment</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6253\u7B97\u4FEE\u6539did\u4E3A1\u7684\u90E8\u95E8</span>
        <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Department</span> dept <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u539F\u6765\u7684\u6570\u636E\uFF1A&quot;</span> <span class="token operator">+</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u8FD9\u91CC\u5C31\u7B80\u5316\u4E86\uFF0C\u4E0D\u4ECE\u952E\u76D8\u8F93\u5165\u4E86</span>
        dept<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;\u7814\u53D1\u90E8\u95E8\u7684\u63CF\u8FF0\u4FE1\u606Fxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8FD9\u91CC\u6CA1\u6709\u4FEE\u6539\u90E8\u95E8\u7684\u540D\u79F0</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Department</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        all<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u5220\u96643008\u90E8\u95E8</span>
        <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">removeByDid</span><span class="token punctuation">(</span><span class="token number">3008</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 2\u3001\u5458\u5DE5DAO\u5B9E\u73B0\u7C7B</h3><h4 id="sql-1" tabindex="-1"><a class="header-anchor" href="#sql-1" aria-hidden="true">#</a> sql</h4><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>INSERT INTO t_employee(\`eid\`,\`ename\`,\`salary\`,\`commission_pct\`,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\`,\`hiredate\`,\`job_id\`,\`mid\`,\`did\`)VALUES(NULL,?,?,?,?,?,?,?,?,?,?,?,?,?);

delete from t_employee where eid = ?;

SELECT * FROM t_employee;

SELECT \`eid\`,\`ename\`,\`salary\`,\`commission_pct\` AS commissionPct,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\` AS workPlace,\`hiredate\`,\`job_id\` AS jobId,\`mid\`,\`did\` FROM t_employee;


SELECT \`eid\`,\`ename\`,\`salary\`,\`commission_pct\` AS commissionPct,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\` AS workPlace,\`hiredate\`,\`job_id\` AS jobId,\`mid\`,\`did\` FROM t_employee where eid=?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> \u5458\u5DE5DAO\u5B9E\u73B0\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">EmployeeDAO</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeDAOImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDAOImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_employee(\`eid\`,\`ename\`,\`salary\`,\`commission_pct\`,\`birthday\`,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\`,\`hiredate\`,\`job_id\`,\`mid\`,\`did\`)&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;values(null,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//null\u8868\u793Aeid\u662F\u81EA\u589E\u7684</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>employee<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        String sql = &quot;select * from t_employee where eid = ?&quot;;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT \`eid\`,\`ename\`,\`salary\`,\`commission_pct\` AS commissionPct,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\` AS workPlace,\`hiredate\`,\`job_id\` AS jobId,\`mid\`,\`did\` FROM t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>eid<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        String sql = &quot;select * from t_employee&quot;;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT \`eid\`,\`ename\`,\`salary\`,\`commission_pct\` AS commissionPct,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\` AS workPlace,\`hiredate\`,\`job_id\` AS jobId,\`mid\`,\`did\` FROM t_employee&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6D4B\u8BD5\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> \u6D4B\u8BD5\u5458\u5DE5DAO\u5B9E\u73B0\u7C7B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">EmployeeDAOImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEmployeeDAOImpl</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u5148\u6D4B\u8BD5\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u5BF9\u8C61</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        all<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        \uFF081\uFF09java.lang.RuntimeException: java.lang.NoSuchFieldException: commission_pct
            \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D \u5956\u91D1\u6BD4\u4F8B\u5B57\u6BB5\u540D\u662F  commission_pct
        \u800CJavabean Employee\u7C7B\u4E2D\u5956\u91D1\u6BD4\u4F8B\u662FcommissionPct
        \u5982\u4F55\u89E3\u51B3\uFF1F
        \u7F16\u5199\u7279\u6B8A\u7684sql\uFF0C\u5728select\u8BED\u53E5\u4E2D\u7ED9\u8868\u7684\u5B57\u6BB5\u53D6\u522B\u540D\uFF0C
            select commission_pct as commissionPct

        \u516C\u5171\u7684\u67E5\u8BE2\u65B9\u6CD5getList\u548CgetBean\u65B9\u6CD5\u4E2D\uFF0C\u53CD\u5C04\u83B7\u53D6Field\u5BF9\u8C61\u662F\u6839\u636EResultSet\u7ED3\u679C\u96C6\u4E2D\u7684\u8868\u5934\u6765\u786E\u5B9A\u5C5E\u6027\u540D\u3002
        String columnName = metaData.getColumnName(i);
        \u6362\u6210
        String columnName = metaData.getColumnLabel(i);

        \uFF082\uFF09java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set double field com.atguigu.bean.Employee.commissionPct to java.math.BigDecimal\u3002
        \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D \u5956\u91D1\u6BD4\u4F8B\u5B57\u6BB5\u6570\u636E\u7C7B\u578B\u662Fdecimal\uFF0C\u5BF9\u5E94Java\u7684java.math.BigDecimal\uFF0C\u4E0D\u662Fdouble\u3002

        \uFF083\uFF09java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set char field com.atguigu.bean.Employee.gender to java.lang.String
        \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D gender\u662Fenum(&#39;\u7537&#39;,&#39;\u5973&#39;)\uFF0C\u5BF9\u5E94Java\u7684String\u7C7B\u578B
        \u5176\u5B9E\u5C31\u7B97\u662F  t_employee\u8868\u4E2D gender\u662Fchar\u7C7B\u578B\uFF0C\u4E5F\u662F\u5BF9\u5E94Java\u7684String\u7C7B\u578B\uFF0C\u56E0\u4E3Amysql\u7684char\u53EF\u4EE5\u5B58\u50A8\u591A\u4E2A\u5B57\u7B26char(M)\uFF0C\u5FC5\u987B\u7528String\u7C7B\u578B

        \uFF084\uFF09java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set int field com.atguigu.bean.Employee.jobId to null value
        \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D job_id\u662Fint\u7C7B\u578B\uFF0C\u4F46\u662Fmysql\u4E2D\u7684int\u7C7B\u578B\u53EF\u4EE5\u8BBE\u7F6ENULL\u4E2D\uFF0C
        \u800CJava\u4E2D\u7684int\u7C7B\u578B\u662F\u4E0D\u80FD\u8BBE\u7F6E\u4E3Anull\uFF0C\u6240\u4EE5\u7684mysql\u4E2D\u7684int\u8981\u7528Java\u7684Integer\u5BF9\u5E94

        \u7C7B\u4F3C\u7684\u8FD8\u6709\uFF1Adouble\u7B49
         */</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6D4B\u8BD5\u67E5\u8BE2\u4E00\u4E2A\u5458\u5DE5\u7684\u65B9\u6CD5</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> eid <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Employee</span> employee <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByEid</span><span class="token punctuation">(</span>eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6D4B\u8BD5\u5220\u9664\u4E00\u4E2A\u5458\u5DE5\u7684\u65B9\u6CD5</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u8981\u5220\u9664\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> eid <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">removeEmployee</span><span class="token punctuation">(</span>eid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6D4B\u8BD5\u6DFB\u52A0\u5458\u5DE5\u65B9\u6CD5</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>
        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sf.parse(birthday)\u628A\u5B57\u7B26\u4E32\u7684\u65E5\u671F\u8F6C\u4E3ADate\u7C7B\u578B\u7684\u65E5\u671F</span>
        <span class="token class-name">Employee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>sf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span>gender<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>email<span class="token punctuation">,</span><span class="token string">&quot;\u5317\u4EAC&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E94\u7AE0-\u6700\u7EC8\u7248" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E94\u7AE0-\u6700\u7EC8\u7248" aria-hidden="true">#</a> \u7B2C\u4E94\u7AE0 \u6700\u7EC8\u7248</h1><h2 id="_5-1-jdbctools\u5DE5\u5177\u7C7B2-0\u7248" tabindex="-1"><a class="header-anchor" href="#_5-1-jdbctools\u5DE5\u5177\u7C7B2-0\u7248" aria-hidden="true">#</a> 5.1 JDBCTools\u5DE5\u5177\u7C7B2.0\u7248</h2><h3 id="_5-1-1-\u6F14\u793A\u4E8B\u52A1\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_5-1-1-\u6F14\u793A\u4E8B\u52A1\u95EE\u9898" aria-hidden="true">#</a> 5.1.1 \u6F14\u793A\u4E8B\u52A1\u95EE\u9898</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u9700\u6C42\uFF1A
    \uFF08<span class="token number">1</span>\uFF09\u4FEE\u6539did<span class="token operator">=</span><span class="token number">1</span>\u7684\u90E8\u95E8\u7B80\u4ECB\u4E3A\u201C\u90E8\u95E8<span class="token number">1</span>\u7684\u7B80\u4ECB\u201D
    \uFF08<span class="token number">2</span>\uFF09\u4FEE\u6539did<span class="token operator">=</span><span class="token number">2</span>\u7684\u90E8\u95E8\u540D\u79F0  <span class="token operator">=</span> \u90E8\u95E8<span class="token number">1</span>\u7684\u540D\u79F0\uFF08\u6545\u610F\u5236\u9020\u9519\u8BEF\uFF0C\u56E0\u4E3At_department\u8868\u7684dname\u6709\u552F\u4E00\u952E\u5143\u7D20\uFF0C\u8FD9\u6761\u4FEE\u6539\u4F1A\u5931\u8D25\uFF09
    \u8981\u6C42\uFF08<span class="token number">1</span>\uFF09\uFF08<span class="token number">2</span>\uFF09\u540C\u65F6\u6210\u529F\u6216\u540C\u65F6\u5931\u8D25\uFF0C\u5373\u5728\u4E00\u4E2A\u4E8B\u52A1\u4E2D\u5B8C\u6210\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">DepartmentDAOImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">JDBCTools</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTransaction</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Department</span> dept1 <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dept1<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;\u90E8\u95E81\u7684\u7B80\u4ECB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B2C\u4E00\u6761\u8BB0\u5F55\u4FEE\u6539\uFF1A&quot;</span> <span class="token operator">+</span>dao<span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span>dept1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Department</span> dept2 <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dept2<span class="token punctuation">.</span><span class="token function">setDname</span><span class="token punctuation">(</span>dept1<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6545\u610F\u4FEE\u6539\u4E3A\u548C\u90E8\u95E81\u7684\u540D\u79F0\u4E00\u6837\uFF0C\u5236\u9020\u5F02\u5E38</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B2C\u4E00\u6761\u8BB0\u5F55\u4FEE\u6539\uFF1A&quot;</span> <span class="token operator">+</span>dao<span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span>dept2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u90FD\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">freeConnection</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://photo.sneoo.com/spring5/202207031643553.png" alt="image-20211202140658101"></p><p>\u8FD0\u884C\u62A5\u9519\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u7B2C\u4E00\u6761\u8BB0\u5F55\u4FEE\u6539\uFF1A<span class="token boolean">true</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>RuntimeException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>SQLIntegrityConstraintViolationException</span><span class="token operator">:</span> <span class="token class-name">Duplicate</span> entry <span class="token char">&#39;\u7814\u53D1\u90E8&#39;</span> <span class="token keyword">for</span> key &#39;t_department<span class="token punctuation">.</span>dname&#39;
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>BaseDAOImpl</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">BaseDAOImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">35</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>DepartmentDAOImpl</span><span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span><span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>TestTransaction</span><span class="token punctuation">.</span><span class="token function">test01</span><span class="token punctuation">(</span><span class="token class-name">TestTransaction</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span>NativeMethodAccessorImpl</span><span class="token punctuation">.</span><span class="token function">invoke0</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span>NativeMethodAccessorImpl</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">NativeMethodAccessorImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span>DelegatingMethodAccessorImpl</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">DelegatingMethodAccessorImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span>Method</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Method</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">498</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>FrameworkMethod</span>$<span class="token number">1.</span><span class="token function">runReflectiveCall</span><span class="token punctuation">(</span><span class="token class-name">FrameworkMethod</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>ReflectiveCallable</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ReflectiveCallable</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span>FrameworkMethod</span><span class="token punctuation">.</span><span class="token function">invokeExplosively</span><span class="token punctuation">(</span><span class="token class-name">FrameworkMethod</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">47</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>internal<span class="token punctuation">.</span>runners<span class="token punctuation">.</span>statements<span class="token punctuation">.</span></span>InvokeMethod</span><span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token class-name">InvokeMethod</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span><span class="token punctuation">.</span><span class="token function">runLeaf</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">325</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>BlockJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token function">runChild</span><span class="token punctuation">(</span><span class="token class-name">BlockJUnit4ClassRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">78</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>BlockJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token function">runChild</span><span class="token punctuation">(</span><span class="token class-name">BlockJUnit4ClassRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">57</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span>$<span class="token number">3.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">290</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span>$<span class="token number">1.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">71</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span><span class="token punctuation">.</span><span class="token function">runChildren</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">288</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span><span class="token punctuation">.</span>access$<span class="token function">000</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">58</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span>$<span class="token number">2.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">268</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runners<span class="token punctuation">.</span></span>ParentRunner</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ParentRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">363</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span>JUnitCore</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">JUnitCore</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">137</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span>JUnit4IdeaTestRunner</span><span class="token punctuation">.</span><span class="token function">startRunnerWithArgs</span><span class="token punctuation">(</span><span class="token class-name">JUnit4IdeaTestRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">68</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span>IdeaTestRunner</span>$<span class="token class-name">Repeater</span><span class="token punctuation">.</span><span class="token function">startRunnerWithArgs</span><span class="token punctuation">(</span><span class="token class-name">IdeaTestRunner</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">47</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span>JUnitStarter</span><span class="token punctuation">.</span><span class="token function">prepareStreamsAndStart</span><span class="token punctuation">(</span><span class="token class-name">JUnitStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">242</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span>JUnitStarter</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">JUnitStarter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>SQLIntegrityConstraintViolationException</span><span class="token operator">:</span> <span class="token class-name">Duplicate</span> entry <span class="token char">&#39;\u7814\u53D1\u90E8&#39;</span> <span class="token keyword">for</span> key &#39;t_department<span class="token punctuation">.</span>dname&#39;
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span>SQLError</span><span class="token punctuation">.</span><span class="token function">createSQLException</span><span class="token punctuation">(</span><span class="token class-name">SQLError</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">117</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span>SQLError</span><span class="token punctuation">.</span><span class="token function">createSQLException</span><span class="token punctuation">(</span><span class="token class-name">SQLError</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">97</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span>SQLExceptionsMapping</span><span class="token punctuation">.</span><span class="token function">translateException</span><span class="token punctuation">(</span><span class="token class-name">SQLExceptionsMapping</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">122</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ClientPreparedStatement</span><span class="token punctuation">.</span><span class="token function">executeInternal</span><span class="token punctuation">(</span><span class="token class-name">ClientPreparedStatement</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">953</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ClientPreparedStatement</span><span class="token punctuation">.</span><span class="token function">executeUpdateInternal</span><span class="token punctuation">(</span><span class="token class-name">ClientPreparedStatement</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1092</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ClientPreparedStatement</span><span class="token punctuation">.</span><span class="token function">executeUpdateInternal</span><span class="token punctuation">(</span><span class="token class-name">ClientPreparedStatement</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1040</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ClientPreparedStatement</span><span class="token punctuation">.</span><span class="token function">executeLargeUpdate</span><span class="token punctuation">(</span><span class="token class-name">ClientPreparedStatement</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1347</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>ClientPreparedStatement</span><span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token class-name">ClientPreparedStatement</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1025</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span>DruidPooledPreparedStatement</span><span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token class-name">DruidPooledPreparedStatement</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">256</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>BaseDAOImpl</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">BaseDAOImpl</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">33</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">24</span> more
\u5931\u8D25
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-1-2-\u4F7F\u7528threadlocal\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-1-2-\u4F7F\u7528threadlocal\u7C7B" aria-hidden="true">#</a> 5.1.2 \u4F7F\u7528ThreadLocal\u7C7B</h3><p>\u5176\u4E2DThreadLocal\u7684\u4ECB\u7ECD\u5982\u4E0B\uFF1A</p><p>JDK 1.2\u7684\u7248\u672C\u4E2D\u5C31\u63D0\u4F9Bjava.lang.ThreadLocal\uFF0C\u4E3A\u89E3\u51B3\u591A\u7EBF\u7A0B\u7A0B\u5E8F\u7684\u5E76\u53D1\u95EE\u9898\u63D0\u4F9B\u4E86\u4E00\u79CD\u65B0\u7684\u601D\u8DEF\u3002\u4F7F\u7528\u8FD9\u4E2A\u5DE5\u5177\u7C7B\u53EF\u4EE5\u5F88\u7B80\u6D01\u5730\u7F16\u5199\u51FA\u4F18\u7F8E\u7684\u591A\u7EBF\u7A0B\u7A0B\u5E8F\u3002\u901A\u5E38\u7528\u6765\u5728\u5728\u591A\u7EBF\u7A0B\u4E2D\u7BA1\u7406\u5171\u4EAB\u6570\u636E\u5E93\u8FDE\u63A5\u3001Session\u7B49</p><p>ThreadLocal\u7528\u4E8E\u4FDD\u5B58\u67D0\u4E2A\u7EBF\u7A0B\u5171\u4EAB\u53D8\u91CF\uFF0C\u539F\u56E0\u662F\u5728Java\u4E2D\uFF0C\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u5BF9\u8C61\u4E2D\u90FD\u6709\u4E00\u4E2AThreadLocalMap&lt;ThreadLocal, Object&gt;\uFF0C\u5176key\u5C31\u662F\u4E00\u4E2AThreadLocal\uFF0C\u800CObject\u5373\u4E3A\u8BE5\u7EBF\u7A0B\u7684\u5171\u4EAB\u53D8\u91CF\u3002\u800C\u8FD9\u4E2Amap\u662F\u901A\u8FC7ThreadLocal\u7684set\u548Cget\u65B9\u6CD5\u64CD\u4F5C\u7684\u3002\u5BF9\u4E8E\u540C\u4E00\u4E2Astatic ThreadLocal\uFF0C\u4E0D\u540C\u7EBF\u7A0B\u53EA\u80FD\u4ECE\u4E2Dget\uFF0Cset\uFF0Cremove\u81EA\u5DF1\u7684\u53D8\u91CF\uFF0C\u800C\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u7EBF\u7A0B\u7684\u53D8\u91CF\u3002</p><p>1\u3001ThreadLocal\u5BF9\u8C61.get: \u83B7\u53D6ThreadLocal\u4E2D\u5F53\u524D\u7EBF\u7A0B\u5171\u4EAB\u53D8\u91CF\u7684\u503C\u3002</p><p>2\u3001ThreadLocal\u5BF9\u8C61.set: \u8BBE\u7F6EThreadLocal\u4E2D\u5F53\u524D\u7EBF\u7A0B\u5171\u4EAB\u53D8\u91CF\u7684\u503C\u3002</p><p>3\u3001ThreadLocal\u5BF9\u8C61.remove: \u79FB\u9664ThreadLocal\u4E2D\u5F53\u524D\u7EBF\u7A0B\u5171\u4EAB\u53D8\u91CF\u7684\u503C\u3002</p><p><img src="https://photo.sneoo.com/spring5/202207031643554.png" alt="image-20211202150640186"></p><p>\u7EBF\u7A0B\uFF08\u4E8B\u52A1\uFF09\u7ED3\u675F\u540E\u522B\u5FD8\u4E86\u79FB\u9664\u5171\u4EAB\u5BF9\u8C61\u3002<img src="https://photo.sneoo.com/spring5/202207031643555.png" alt="image-20210905181830880"></p><h3 id="_5-1-3-jdbctools2-0\u7248" tabindex="-1"><a class="header-anchor" href="#_5-1-3-jdbctools2-0\u7248" aria-hidden="true">#</a> 5.1.3 JDBCTools2.0\u7248</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCTools</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6570\u636E\u5E93\u8FDE\u63A5\u6C60</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>

    <span class="token comment">//\u9759\u6001\u53D8\u91CF\u7684\u521D\u59CB\u5316\uFF0C\u53EF\u4EE5\u4F7F\u7528\u9759\u6001\u4EE3\u7801\u5757</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">&gt;</span></span> threadLocal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//&lt;Connection&gt;\u8868\u793A  ThreadLocalMap\u4E2D(key,value)\u7684value\u662FConnection\u7C7B\u578B\u7684\u5BF9\u8C61</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> threadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u8C03\u7528\u8FD9\u53E5\u4EE3\u7801\uFF0C\u90FD\u4F1A\u5230\u81EA\u5DF1\u7684ThreadLocalMap\u4E2D\uFF0C\u4EE5threadLocal\u5BF9\u8C61\u4E3Akey\uFF0C\u627E\u5230value</span>
        <span class="token comment">//\u5982\u679Cvalue\u4E3A\u7A7A\uFF0C\u8BF4\u660E\u5F53\u524D\u7EBF\u7A0B\u8FD8\u672A\u83B7\u53D6\u8FC7Connection\u5BF9\u8C61\uFF0C\u90A3\u4E48\u5C31\u4ECE\u8FDE\u63A5\u6C60\u4E2D\u62FF\u4E00\u4E2A\u6570\u636E\u5E93\u8FDE\u63A5\u5BF9\u8C61\u7ED9\u4F60</span>
        <span class="token comment">//\u5E76\u4E14\u901A\u8FC7threadLocal\u7684set\u65B9\u6CD5\u628AConnection\u5BF9\u8C61\u653E\u5230\u5F53\u524D\u7EBF\u7A0BThreadLocalMap\u4E2D</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>connection <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            connection <span class="token operator">=</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u901A\u8FC7threadLocal\u7684set\u65B9\u6CD5\u628AConnection\u5BF9\u8C61\u653E\u5230\u5F53\u524D\u7EBF\u7A0BThreadLocalMap\u4E2D</span>
            threadLocal<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">freeConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> threadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8FD8\u539F\u81EA\u52A8\u63D0\u4EA4\u6A21\u5F0F</span>
            threadLocal<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4ECE\u5F53\u524D\u7EBF\u7A0B\u7684ThreadLocalMap\u4E2D\u5220\u9664\u8FD9\u4E2A\u8FDE\u63A5</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-2-basedaoimpl\u7C7B2-0\u7248" tabindex="-1"><a class="header-anchor" href="#_5-2-basedaoimpl\u7C7B2-0\u7248" aria-hidden="true">#</a> 5.2 BaseDAOImpl\u7C7B2.0\u7248</h2><h3 id="_5-2-1-\u4F7F\u7528dbutils" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u4F7F\u7528dbutils" aria-hidden="true">#</a> 5.2.1 \u4F7F\u7528Dbutils</h3><p>commons-dbutils \u662F Apache \u7EC4\u7EC7\u63D0\u4F9B\u7684\u4E00\u4E2A\u5F00\u6E90 JDBC\u5DE5\u5177\u7C7B\u5E93\uFF0C\u5B83\u662F\u5BF9JDBC\u7684\u7B80\u5355\u5C01\u88C5\uFF0C\u5B66\u4E60\u6210\u672C\u6781\u4F4E\uFF0C\u5E76\u4E14\u4F7F\u7528dbutils\u80FD\u6781\u5927\u7B80\u5316jdbc\u7F16\u7801\u7684\u5DE5\u4F5C\u91CF\uFF0C\u540C\u65F6\u4E5F\u4E0D\u4F1A\u5F71\u54CD\u7A0B\u5E8F\u7684\u6027\u80FD\u3002</p><p>\u5176\u4E2DQueryRunner\u7C7B\u5C01\u88C5\u4E86SQL\u7684\u6267\u884C\uFF0C\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\u3002</p><p>\uFF081\uFF09\u53EF\u4EE5\u5B9E\u73B0\u589E\u3001\u5220\u3001\u6539\u3001\u67E5\u3001\u6279\u5904\u7406\u3001</p><p>\uFF082\uFF09\u8003\u8651\u4E86\u4E8B\u52A1\u5904\u7406\u9700\u8981\u5171\u7528Connection\u3002</p><p>\uFF083\uFF09\u8BE5\u7C7B\u6700\u4E3B\u8981\u7684\u5C31\u662F\u7B80\u5355\u5316\u4E86SQL\u67E5\u8BE2\uFF0C\u5B83\u4E0EResultSetHandler\u7EC4\u5408\u5728\u4E00\u8D77\u4F7F\u7528\u53EF\u4EE5\u5B8C\u6210\u5927\u90E8\u5206\u7684\u6570\u636E\u5E93\u64CD\u4F5C\uFF0C\u80FD\u591F\u5927\u5927\u51CF\u5C11\u7F16\u7801\u91CF\u3002</p><p>\uFF084\uFF09\u4E0D\u9700\u8981\u624B\u52A8\u5173\u95ED\u8FDE\u63A5\uFF0Crunner\u4F1A\u81EA\u52A8\u5173\u95ED\u8FDE\u63A5\uFF0C\u91CA\u653E\u5230\u8FDE\u63A5\u6C60\u4E2D</p><p><strong>\uFF081\uFF09\u66F4\u65B0</strong></p><p>public int update(Connection conn, String sql, Object... params) throws SQLException:\u7528\u6765\u6267\u884C\u4E00\u4E2A\u66F4\u65B0\uFF08\u63D2\u5165\u3001\u66F4\u65B0\u6216\u5220\u9664\uFF09\u64CD\u4F5C\u3002</p><p>......</p><p><strong>\uFF082\uFF09\u63D2\u5165</strong></p><p>public <code>&lt;T&gt;</code>T insert(Connection conn,String sql,ResultSetHandler<code>&lt;T&gt;</code>rsh, Object... params) throws SQLException\uFF1A\u53EA\u652F\u6301INSERT\u8BED\u53E5\uFF0C\u5176\u4E2D rsh - The handler used to create the result object from the ResultSet of auto-generated keys. \u8FD4\u56DE\u503C: An object generated by the handler.\u5373\u81EA\u52A8\u751F\u6210\u7684\u952E\u503C</p><p>....</p><p><strong>\uFF083\uFF09\u6279\u5904\u7406</strong></p><p>public int[] batch(Connection conn,String sql,Object[][] params)throws SQLException\uFF1A INSERT, UPDATE, or DELETE\u8BED\u53E5</p><p>public <code>&lt;T&gt;</code>T insertBatch(Connection conn,String sql,ResultSetHandler<code>&lt;T&gt;</code>rsh,Object[][] params)throws SQLException\uFF1A\u53EA\u652F\u6301INSERT\u8BED\u53E5</p><p>.....</p><p><strong>\uFF084\uFF09\u4F7F\u7528QueryRunner\u7C7B\u5B9E\u73B0\u67E5\u8BE2</strong></p><p>public Object query(Connection conn, String sql, ResultSetHandler rsh,Object... params) throws SQLException\uFF1A\u6267\u884C\u4E00\u4E2A\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u5728\u8FD9\u4E2A\u67E5\u8BE2\u4E2D\uFF0C\u5BF9\u8C61\u6570\u7EC4\u4E2D\u7684\u6BCF\u4E2A\u5143\u7D20\u503C\u88AB\u7528\u6765\u4F5C\u4E3A\u67E5\u8BE2\u8BED\u53E5\u7684\u7F6E\u6362\u53C2\u6570\u3002\u8BE5\u65B9\u6CD5\u4F1A\u81EA\u884C\u5904\u7406 PreparedStatement \u548C ResultSet \u7684\u521B\u5EFA\u548C\u5173\u95ED\u3002</p><p>....</p><p>ResultSetHandler\u63A5\u53E3\u7528\u4E8E\u5904\u7406 java.sql.ResultSet\uFF0C\u5C06\u6570\u636E\u6309\u8981\u6C42\u8F6C\u6362\u4E3A\u53E6\u4E00\u79CD\u5F62\u5F0F\u3002ResultSetHandler \u63A5\u53E3\u63D0\u4F9B\u4E86\u4E00\u4E2A\u5355\u72EC\u7684\u65B9\u6CD5\uFF1AObject handle (java.sql.ResultSet rs)\u8BE5\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u5C06\u4F5C\u4E3AQueryRunner\u7C7B\u7684query()\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u3002</p><p>\u8BE5\u63A5\u53E3\u6709\u5982\u4E0B\u5B9E\u73B0\u7C7B\u53EF\u4EE5\u4F7F\u7528\uFF1A</p><ul><li>BeanHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u7B2C\u4E00\u884C\u6570\u636E\u5C01\u88C5\u5230\u4E00\u4E2A\u5BF9\u5E94\u7684JavaBean\u5B9E\u4F8B\u4E2D\u3002</li><li>BeanListHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u6BCF\u4E00\u884C\u6570\u636E\u90FD\u5C01\u88C5\u5230\u4E00\u4E2A\u5BF9\u5E94\u7684JavaBean\u5B9E\u4F8B\u4E2D\uFF0C\u5B58\u653E\u5230List\u91CC\u3002</li><li>ScalarHandler\uFF1A\u67E5\u8BE2\u5355\u4E2A\u503C\u5BF9\u8C61</li><li>MapHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u7B2C\u4E00\u884C\u6570\u636E\u5C01\u88C5\u5230\u4E00\u4E2AMap\u91CC\uFF0Ckey\u662F\u5217\u540D\uFF0Cvalue\u5C31\u662F\u5BF9\u5E94\u7684\u503C\u3002</li><li>MapListHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u6BCF\u4E00\u884C\u6570\u636E\u90FD\u5C01\u88C5\u5230\u4E00\u4E2AMap\u91CC\uFF0C\u7136\u540E\u518D\u5B58\u653E\u5230List</li><li>ColumnListHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u67D0\u4E00\u5217\u7684\u6570\u636E\u5B58\u653E\u5230List\u4E2D\u3002</li><li>KeyedHandler(name)\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u6BCF\u4E00\u884C\u6570\u636E\u90FD\u5C01\u88C5\u5230\u4E00\u4E2AMap\u91CC\uFF0C\u518D\u628A\u8FD9\u4E9Bmap\u518D\u5B58\u5230\u4E00\u4E2Amap\u91CC\uFF0C\u5176key\u4E3A\u6307\u5B9A\u7684key\u3002</li><li>ArrayHandler\uFF1A\u628A\u7ED3\u679C\u96C6\u4E2D\u7684\u7B2C\u4E00\u884C\u6570\u636E\u8F6C\u6210\u5BF9\u8C61\u6570\u7EC4\u3002</li><li>ArrayListHandler\uFF1A\u628A\u7ED3\u679C\u96C6\u4E2D\u7684\u6BCF\u4E00\u884C\u6570\u636E\u90FD\u8F6C\u6210\u4E00\u4E2A\u6570\u7EC4\uFF0C\u518D\u5B58\u653E\u5230List\u4E2D\u3002</li></ul><h3 id="_5-2-2-\u4F7F\u7528dbutils\u7EC4\u4EF6\u5C01\u88C5basedaoimpl" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u4F7F\u7528dbutils\u7EC4\u4EF6\u5C01\u88C5basedaoimpl" aria-hidden="true">#</a> 5.2.2 \u4F7F\u7528Dbutils\u7EC4\u4EF6\u5C01\u88C5BaseDAOImpl</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">JDBCTools</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span></span><span class="token class-name">QueryRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">BeanListHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>dbutils<span class="token punctuation">.</span>handlers<span class="token punctuation">.</span></span><span class="token class-name">ScalarHandler</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token comment">/*

\u5982\u4F55\u4F7F\u7528DBUtils\uFF1F
\uFF081\uFF09\u5BFC\u5165jar
commons-dbutils-1.6.jar
druid-1.1.10.jar
mysql-connector-java-5.1.36-bin.jar

\uFF082\uFF09QueryRunner\u6709\u5404\u79CD\u6267\u884Csql\u65B9\u6CD5
public int update(Connection conn, String sql, Object... params) throws SQLException:\u7528\u6765\u6267\u884C\u4E00\u4E2A\u66F4\u65B0\uFF08\u63D2\u5165\u3001\u66F4\u65B0\u6216\u5220\u9664\uFF09\u64CD\u4F5C\u3002
public Object query(Connection conn, String sql, ResultSetHandler rsh,Object... params) throws SQLException\uFF1A\u6267\u884C\u4E00\u4E2A\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u5728\u8FD9\u4E2A\u67E5\u8BE2\u4E2D\uFF0C\u5BF9\u8C61\u6570\u7EC4\u4E2D\u7684\u6BCF\u4E2A\u5143\u7D20\u503C\u88AB\u7528\u6765\u4F5C\u4E3A\u67E5\u8BE2\u8BED\u53E5\u7684\u7F6E\u6362\u53C2\u6570\u3002\u8BE5\u65B9\u6CD5\u4F1A\u81EA\u884C\u5904\u7406 PreparedStatement \u548C ResultSet \u7684\u521B\u5EFA\u548C\u5173\u95ED\u3002

\u67E5\u8BE2\u7684\u65B9\u6CD5query\u65B9\u6CD5\uFF0C\u9700\u8981\u914D\u5408ResultSetHandler\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\u4F7F\u7528\u3002
ResultSetHandler\u63A5\u53E3\u6709\u5F88\u591A\u5B9E\u73B0\u7C7B\uFF1A
A\uFF1ABeanListHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u6BCF\u4E00\u884C\u6570\u636E\u90FD\u5C01\u88C5\u5230\u4E00\u4E2A\u5BF9\u5E94\u7684JavaBean\u5B9E\u4F8B\u4E2D\uFF0C\u5B58\u653E\u5230List\u91CC\u3002
B:BeanHandler\uFF1A\u5C06\u7ED3\u679C\u96C6\u4E2D\u7684\u7B2C\u4E00\u884C\u6570\u636E\u5C01\u88C5\u5230\u4E00\u4E2A\u5BF9\u5E94\u7684JavaBean\u5B9E\u4F8B\u4E2D
C\uFF1AScalarHandler\uFF1A\u67E5\u8BE2\u5355\u4E2A\u503C\u5BF9\u8C61

 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDAOImpl</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u901A\u7528\u7684\u589E\u5220\u6539\u7684\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">sql</span> String \u8981\u6267\u884C\u7684sql
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> Object... \u5982\u679Csql\u4E2D\u6709\uFF1F\uFF0C\u5C31\u4F20\u5165\u5BF9\u5E94\u4E2A\u6570\u7684\uFF1F\u8981\u8BBE\u7F6E\u503C
     * <span class="token keyword">@return</span> int \u6267\u884C\u7684\u7ED3\u679C
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u67E5\u8BE2\u5355\u4E2A\u5BF9\u8C61\u7684\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">clazz</span> Class \u8BB0\u5F55\u5BF9\u5E94\u7684\u7C7B\u7C7B\u578B
     * <span class="token keyword">@param</span> <span class="token parameter">sql</span> String \u67E5\u8BE2\u8BED\u53E5
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> Object... \u5982\u679Csql\u4E2D\u6709\uFF1F\uFF0C\u5373\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\uFF1F\u7684\u503C
     * <span class="token keyword">@param</span> \`\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>\`\`\u6CDB\u578B\u65B9\u6CD5\u58F0\u660E\u7684\u6CDB\u578B\u7C7B\u578B
     * <span class="token keyword">@return</span>  T \u4E00\u4E2A\u5BF9\u8C61
     */</span>
    <span class="token keyword">protected</span> \`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`<span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`clazz<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">List</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`list <span class="token operator">=</span> <span class="token function">getList</span><span class="token punctuation">(</span>clazz<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>list <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">getList</span><span class="token punctuation">(</span>clazz<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u901A\u7528\u67E5\u8BE2\u591A\u4E2A\u5BF9\u8C61\u7684\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">clazz</span> Class \u8BB0\u5F55\u5BF9\u5E94\u7684\u7C7B\u7C7B\u578B
     * <span class="token keyword">@param</span> <span class="token parameter">sql</span> String \u67E5\u8BE2\u8BED\u53E5
     * <span class="token keyword">@param</span> <span class="token parameter">args</span> Object... \u5982\u679Csql\u4E2D\u6709\uFF1F\uFF0C\u5373\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\uFF1F\u7684\u503C
     * <span class="token keyword">@param</span> \`\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>\`\`\u6CDB\u578B\u65B9\u6CD5\u58F0\u660E\u7684\u6CDB\u578B\u7C7B\u578B
     * <span class="token keyword">@return</span> List\`\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>T</span><span class="token punctuation">&gt;</span></span>\`\`\u628A\u591A\u4E2A\u5BF9\u8C61\u653E\u5230\u4E86List\u96C6\u5408
     */</span>
    <span class="token keyword">protected</span> \`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`<span class="token class-name">List</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`<span class="token function">getList</span><span class="token punctuation">(</span><span class="token class-name">Class</span>\`\`<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>\`\`clazz<span class="token punctuation">,</span> <span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-3-\u5176\u4ED6\u7684dao\u548Cdao\u5B9E\u73B0\u7C7B\u4E0D\u53D8" tabindex="-1"><a class="header-anchor" href="#_5-3-\u5176\u4ED6\u7684dao\u548Cdao\u5B9E\u73B0\u7C7B\u4E0D\u53D8" aria-hidden="true">#</a> 5.3 \u5176\u4ED6\u7684DAO\u548CDAO\u5B9E\u73B0\u7C7B\u4E0D\u53D8</h2><p>1\u3001\u518D\u6B21\u8FD0\u884C\u90E8\u95E8DAO\u6D4B\u8BD5\u7C7B\uFF1AOK</p><p>2\u3001\u518D\u6B21\u8FD0\u884C\u5458\u5DE5DAO\u6D4B\u8BD5\u7C7B\uFF1AOK</p><p>3\u3001\u518D\u6B21\u6D4B\u8BD5\u4E4B\u524D\u7684\u4E8B\u52A1\u95EE\u9898\uFF1AOK\uFF08\u5C31\u4FEE\u6539\u6700\u540E\u4E00\u53E5\u5173\u95ED\u4EE3\u7801\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Department</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">DepartmentDAOImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>tools<span class="token punctuation">.</span></span><span class="token class-name">JDBCTools</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTransaction</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">DepartmentDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DepartmentDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Department</span> dept1 <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dept1<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;\u90E8\u95E81\u7684\u7B80\u4ECB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B2C\u4E00\u6761\u8BB0\u5F55\u4FEE\u6539\uFF1A&quot;</span> <span class="token operator">+</span>dao<span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span>dept1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Department</span> dept2 <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByDid</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dept2<span class="token punctuation">.</span><span class="token function">setDname</span><span class="token punctuation">(</span>dept1<span class="token punctuation">.</span><span class="token function">getDname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6545\u610F\u4FEE\u6539\u4E3A\u548C\u90E8\u95E81\u7684\u540D\u79F0\u4E00\u6837\uFF0C\u5236\u9020\u5F02\u5E38</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B2C\u4E00\u6761\u8BB0\u5F55\u4FEE\u6539\uFF1A&quot;</span> <span class="token operator">+</span>dao<span class="token punctuation">.</span><span class="token function">updateDepartment</span><span class="token punctuation">(</span>dept2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u90FD\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">JDBCTools</span><span class="token punctuation">.</span><span class="token function">freeConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u65B9\u6CD5\u8C03\u7528\u4E0D\u7528\u4F20\u53C2\u6570\u4E86</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-4-\u7ED9\u5458\u5DE5dao\u589E\u52A0\u4E00\u4E2A\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u6570\u91CF\u7684\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_5-4-\u7ED9\u5458\u5DE5dao\u589E\u52A0\u4E00\u4E2A\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u6570\u91CF\u7684\u65B9\u6CD5" aria-hidden="true">#</a> 5.4 \u7ED9\u5458\u5DE5DAO\u589E\u52A0\u4E00\u4E2A\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u6570\u91CF\u7684\u65B9\u6CD5</h2><h3 id="_5-4-1-\u5458\u5DE5dao\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_5-4-1-\u5458\u5DE5dao\u63A5\u53E3" aria-hidden="true">#</a> 5.4.1 \u5458\u5DE5DAO\u63A5\u53E3</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6DFB\u52A0\u4E00\u4E2A\u5458\u5DE5</span>
    <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6839\u636E\u5458\u5DE5\u7F16\u53F7\u67E5\u8BE2\u4E00\u4E2A\u5458\u5DE5\u5BF9\u8C61</span>
    <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6839\u636E\u5458\u5DE5\u7F16\u53F7\u5220\u9664\u4E00\u4E2A\u5458\u5DE5\u5BF9\u8C61\uFF0C\u5373\u5220\u9664\u4E00\u6761\u8BB0\u5F55</span>
    <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u67E5\u8BE2\u6240\u6709\u7684\u5458\u5DE5\u5BF9\u8C61</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u6570\u91CF\u7684\u65B9\u6CD5</span>
    <span class="token keyword">long</span> <span class="token function">getEmployeeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">//\u5176\u4ED6\u65B9\u6CD5\u7565</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-2-\u5458\u5DE5dao\u63A5\u53E3\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-4-2-\u5458\u5DE5dao\u63A5\u53E3\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 5.4.2 \u5458\u5DE5DAO\u63A5\u53E3\u5B9E\u73B0\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">EmployeeDAO</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeDAOImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDAOImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeDAO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addEmployee</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> employee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_employee(\`eid\`,\`ename\`,\`salary\`,\`commission_pct\`,\`birthday\`,&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\`,\`hiredate\`,\`job_id\`,\`mid\`,\`did\`)&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;values(null,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;</span><span class="token punctuation">;</span><span class="token comment">//null\u8868\u793Aeid\u662F\u81EA\u589E\u7684</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>employee<span class="token punctuation">.</span><span class="token function">getEname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getCommissionPct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getTel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getWorkPlace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getHiredate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getJobId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getMid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                employee<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">getByEid</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        String sql = &quot;select * from t_employee where eid = ?&quot;;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT \`eid\`,\`ename\`,\`salary\`,\`commission_pct\` AS commissionPct,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\` AS workPlace,\`hiredate\`,\`job_id\` AS jobId,\`mid\`,\`did\` FROM t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">,</span>eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeEmployee</span><span class="token punctuation">(</span><span class="token keyword">int</span> eid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_employee where eid = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>eid<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        String sql = &quot;select * from t_employee&quot;;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT \`eid\`,\`ename\`,\`salary\`,\`commission_pct\` AS commissionPct,\`birthday\`,\`gender\`,\`tel\`,\`email\`,\`address\`,\`work_place\` AS workPlace,\`hiredate\`,\`job_id\` AS jobId,\`mid\`,\`did\` FROM t_employee&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getEmployeeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(*) from t_employee&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> <span class="token function">getValue</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Object\u4E0D\u80FD\u76F4\u63A5\u5F3A\u8F6C\u4E3Along\uFF0C\u53EA\u80FD\u8F6C\u4E3ALong\u5305\u88C5\u7C7B\uFF0C\u7136\u540E\u5728\u81EA\u52A8\u62C6\u7BB1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-5-3-\u6D4B\u8BD5\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" tabindex="-1"><a class="header-anchor" href="#_5-5-3-\u6D4B\u8BD5\u5458\u5DE5dao\u5B9E\u73B0\u7C7B" aria-hidden="true">#</a> 5.5.3 \u6D4B\u8BD5\u5458\u5DE5DAO\u5B9E\u73B0\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Employee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">EmployeeDAOImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEmployeeDAOImpl</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u5148\u6D4B\u8BD5\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u5BF9\u8C61</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Employee</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        all<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        \uFF081\uFF09java.lang.RuntimeException: java.lang.NoSuchFieldException: commission_pct
            \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D \u5956\u91D1\u6BD4\u4F8B\u5B57\u6BB5\u540D\u662F  commission_pct
        \u800CJavabean Employee\u7C7B\u4E2D\u5956\u91D1\u6BD4\u4F8B\u662FcommissionPct
        \u5982\u4F55\u89E3\u51B3\uFF1F
        \u7F16\u5199\u7279\u6B8A\u7684sql\uFF0C\u5728select\u8BED\u53E5\u4E2D\u7ED9\u8868\u7684\u5B57\u6BB5\u53D6\u522B\u540D\uFF0C
            select commission_pct as commissionPct

        \u516C\u5171\u7684\u67E5\u8BE2\u65B9\u6CD5getList\u548CgetBean\u65B9\u6CD5\u4E2D\uFF0C\u53CD\u5C04\u83B7\u53D6Field\u5BF9\u8C61\u662F\u6839\u636EResultSet\u7ED3\u679C\u96C6\u4E2D\u7684\u8868\u5934\u6765\u786E\u5B9A\u5C5E\u6027\u540D\u3002
        String columnName = metaData.getColumnName(i);
        \u6362\u6210
        String columnName = metaData.getColumnLabel(i);

        \uFF082\uFF09java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set double field com.atguigu.bean.Employee.commissionPct to java.math.BigDecimal\u3002
        \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D \u5956\u91D1\u6BD4\u4F8B\u5B57\u6BB5\u6570\u636E\u7C7B\u578B\u662Fdecimal\uFF0C\u5BF9\u5E94Java\u7684java.math.BigDecimal\uFF0C\u4E0D\u662Fdouble\u3002

        \uFF083\uFF09java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set char field com.atguigu.bean.Employee.gender to java.lang.String
        \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D gender\u662Fenum(&#39;\u7537&#39;,&#39;\u5973&#39;)\uFF0C\u5BF9\u5E94Java\u7684String\u7C7B\u578B
        \u5176\u5B9E\u5C31\u7B97\u662F  t_employee\u8868\u4E2D gender\u662Fchar\u7C7B\u578B\uFF0C\u4E5F\u662F\u5BF9\u5E94Java\u7684String\u7C7B\u578B\uFF0C\u56E0\u4E3Amysql\u7684char\u53EF\u4EE5\u5B58\u50A8\u591A\u4E2A\u5B57\u7B26char(M)\uFF0C\u5FC5\u987B\u7528String\u7C7B\u578B

        \uFF084\uFF09java.lang.RuntimeException: java.lang.IllegalArgumentException:
        Can not set int field com.atguigu.bean.Employee.jobId to null value
        \u539F\u56E0\uFF1Amysql\u7684atguigu\u5E93\uFF0Ct_employee\u8868\u4E2D job_id\u662Fint\u7C7B\u578B\uFF0C\u4F46\u662Fmysql\u4E2D\u7684int\u7C7B\u578B\u53EF\u4EE5\u8BBE\u7F6ENULL\u4E2D\uFF0C
        \u800CJava\u4E2D\u7684int\u7C7B\u578B\u662F\u4E0D\u80FD\u8BBE\u7F6E\u4E3Anull\uFF0C\u6240\u4EE5\u7684mysql\u4E2D\u7684int\u8981\u7528Java\u7684Integer\u5BF9\u5E94

        \u7C7B\u4F3C\u7684\u8FD8\u6709\uFF1Adouble\u7B49
         */</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6D4B\u8BD5\u67E5\u8BE2\u4E00\u4E2A\u5458\u5DE5\u7684\u65B9\u6CD5</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u8981\u67E5\u8BE2\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> eid <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Employee</span> employee <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByEid</span><span class="token punctuation">(</span>eid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6D4B\u8BD5\u5220\u9664\u4E00\u4E2A\u5458\u5DE5\u7684\u65B9\u6CD5</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u8981\u5220\u9664\u7684\u5458\u5DE5\u7684\u7F16\u53F7\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> eid <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">removeEmployee</span><span class="token punctuation">(</span>eid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6D4B\u8BD5\u6DFB\u52A0\u5458\u5DE5\u65B9\u6CD5</span>
        <span class="token class-name">Scanner</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u59D3\u540D\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ename <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u674E\u56DB</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u85AA\u8D44\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> salary <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//15000</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u51FA\u751F\u65E5\u671F\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> birthday <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1990-1-1</span>
        <span class="token class-name">SimpleDateFormat</span> sf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u6027\u522B\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> gender <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tel <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//13578595685</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF1A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> email <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//zhangsan@atguigu.com</span>

        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//sf.parse(birthday)\u628A\u5B57\u7B26\u4E32\u7684\u65E5\u671F\u8F6C\u4E3ADate\u7C7B\u578B\u7684\u65E5\u671F</span>
        <span class="token class-name">Employee</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>sf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span>gender<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>email<span class="token punctuation">,</span><span class="token string">&quot;\u5317\u4EAC&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">addEmployee</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        input<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">EmployeeDAOImpl</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeDAOImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">getEmployeeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u8865\u5145\u5B66\u751F\u95EE\u9898-jar\u5305\u7248\u672C\u4E0D\u517C\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u8865\u5145\u5B66\u751F\u95EE\u9898-jar\u5305\u7248\u672C\u4E0D\u517C\u5BB9" aria-hidden="true">#</a> \u8865\u5145\u5B66\u751F\u95EE\u9898\uFF1A jar\u5305\u7248\u672C\u4E0D\u517C\u5BB9</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Exception in thread &quot;main&quot; com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:408)
	at com.mysql.jdbc.Util.getInstance(Util.java:383)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1023)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:997)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:983)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:928)
	at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2576)
	at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2309)
	at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:834)
	at com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:46)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:408)
	at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:419)
	at com.mysql.jdbc.NonRegisteringDriver.connect(Loading class \`com.mysql.jdbc.Driver&#39;. This is deprecated. The new driver class is \`com.mysql.cj.jdbc.Driver&#39;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
Exception in thread &quot;main&quot; java.sql.SQLException: The server time zone value &#39;\uFFFD\u0439\uFFFD\uFFFD\uFFFD\u05FC\u02B1\uFFFD\uFFFD&#39; is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:76)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:835)
	at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:455)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:240)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:199)
	at java.sql.DriverManager.getConnection(DriverManager.java:664)
	at java.sql.DriverManager.getConnection(DriverManager.java:247)
.java:344)
	at java.sql.DriverManager.getConnection(DriverManager.java:664)
	at java.sql.DriverManager.getConnection(DriverManager.java:247)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5F02\u5E38\u597D\u50CF\u662F\u65E0\u4E8B\u52A1\u8FDE\u63A5\u5F02\u5E38\uFF0C\u65E0\u6CD5\u521B\u5EFA\u8FDE\u63A5\u3002\u5C06MySQL\u9A71\u52A8\u6539\u4E3A\u4E86\u6700\u65B0\u76848.0\u7248\u672C\u7684MySQL\u9A71\u52A8\u3002\u663E\u793A\u90A3\u4E2A\u9A71\u52A8\u7C7B\u5DF2\u7ECF\u8FC7\u65F6\u4E86\uFF0C\u65B0\u7684\u9A71\u52A8\u7C7B\u662F\u201Ccom.mysql.cj.jdbc.Driver\u201D\uFF0C\u800C\u4E0D\u662F\u201Ccom.mysql.jdbc.Driver\u201D\u4E86\uFF0C\u5E76\u4E14\u8FD8\u8BF4\u6211\u6CA1\u6709\u914D\u7F6E\u65F6\u533A\uFF0C\u67E5\u4E86\u4E00\u4E0B\uFF0C\u539F\u6765\u4ECEJDBC6.0\u5F00\u59CB\u9A71\u52A8\u7C7B\u4F7F\u7528\u4E86\u65B0\u7684\uFF0C\u5E76\u4E14url\u4E2D\u5FC5\u987B\u8981\u8BBE\u7F6E\u65F6\u533A\uFF0C\u5426\u4FA7\u4F1A\u62A5\u9519\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u7B2C\u4E00\u6B65\uFF1A\u4F7F\u7528\u6700\u65B0\u7684MySQL\u9A71\u52A8jar\u5305\u3002
\u7B2C\u4E8C\u6B65\uFF1A\u628A\u9A71\u52A8\u7684\u7C7B\u540D\u6539\u4E3A:
static String driver=&quot;com.mysql.cj.jdbc.Driver&quot;;
\u7B2C\u4E09\u6B65\uFF1A\u5728\u8BBF\u95EEmysql\u7684url\u540E\u52A0\u5165\u65F6\u533A\u8BBE\u7F6E\uFF1A
static String url=&quot;jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF8&amp;serverTimezone=UTC&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,105);function U(J,Q){const t=e("ExternalLinkIcon");return c(),o("div",null,[u,n("table",null,[k,n("tbody",null,[r,d,m,n("tr",null,[v,b,n("td",null,[g,n("a",y,[q,l(t)])])]),w,h,f,S,j,D,x,C,E,_,T,L,O,I,A,P,B,N,M])]),R])}var F=p(i,[["render",U],["__file","MySQL8.0_JDBC\u7B14\u8BB0.html.vue"]]);export{F as default};
