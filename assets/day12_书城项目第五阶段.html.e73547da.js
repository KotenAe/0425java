import{_ as n,o as s,c as a,a as t}from"./app.a3ab45a4.js";const p={},e=t(`<h1 id="day12-\u4E66\u57CE\u9879\u76EE\u7B2C\u4E94\u9636\u6BB5" tabindex="-1"><a class="header-anchor" href="#day12-\u4E66\u57CE\u9879\u76EE\u7B2C\u4E94\u9636\u6BB5" aria-hidden="true">#</a> day12_\u4E66\u57CE\u9879\u76EE\u7B2C\u4E94\u9636\u6BB5</h1><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u8BFE\u524D\u56DE\u987E<span class="token operator">:</span>
  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span><span class="token string">&quot;\u8BF7\u6C42\u65B9\u5F0F&quot;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span><span class="token string">&quot;\u8BF7\u6C42\u8DEF\u5F84&quot;</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span><span class="token punctuation">{</span>
       \u8BF7\u6C42\u53C2\u6570\u540D<span class="token operator">:</span>\u8BF7\u6C42\u53C2\u6570\u503C   <span class="token operator">-&gt;</span>  \u8BF7\u6C42\u53C2\u6570\u540D\u53EF\u4EE5\u5199\u53CC\u5F15\u53F7<span class="token punctuation">,</span>\u4E5F\u53EF\u4EE5\u4E0D\u5199
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
    \u63A5\u6536\u670D\u52A1\u5668\u54CD\u5E94\u56DE\u6765\u7684\u6570\u636E
    response\u63A5\u6536\u7684\u5C31\u662F\u54CD\u5E94\u56DE\u6765\u7684\u6570\u636E
    response\u63A5\u6536\u7684\u54CD\u5E94\u6570\u636E\u6709\u5F88\u591A<span class="token punctuation">,</span>\u5176\u4E2Ddata\u4E2D\u4FDD\u5B58\u7684\u6570\u636E\u624D\u662F\u6211\u4EEC\u60F3\u8981\u7684
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  \u5982\u679C\u60F3\u8981\u7ED9\u670D\u52A1\u5668\u53D1\u9001json\u6570\u636E<span class="token operator">-&gt;</span>\u5C06params\u6539\u6210data
  \u914D\u5408post\u8BF7\u6C42<span class="token punctuation">,</span>\u7136\u540E\u7528IO\u6D41\u63A5\u6536\u8BF7\u6C42<span class="token punctuation">,</span>\u83B7\u53D6json\u6570\u636E
      
<span class="token number">2.</span>vue\u56DE\u987E
  a<span class="token punctuation">.</span>\u57FA\u672C\u683C\u5F0F<span class="token operator">:</span>
    <span class="token keyword">new</span> <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       el<span class="token operator">:</span><span class="token string">&quot;id\u9009\u62E9\u5668&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//\u8981\u7ED1\u5B9A\u54EA\u4E2Adiv\u533A\u57DF</span>
       data<span class="token operator">:</span><span class="token punctuation">{</span>
         \u8981\u5C55\u793A\u5728\u6807\u7B7E\u4E2D\u7684\u6570\u636E
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       methods<span class="token operator">:</span><span class="token punctuation">{</span>
         \u6807\u7B7E\u4E2D\u4E8B\u4EF6\u7ED1\u5B9A\u7684\u51FD\u6570
         \u5982\u679C\u60F3\u8981\u5728\u51FD\u6570\u4E2D\u62FFdata\u4E2D\u7684\u6570\u636E
         <span class="token keyword">this</span><span class="token punctuation">.</span>data\u4E2D\u7684key
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
  b<span class="token punctuation">.</span>\u6307\u4EE4<span class="token operator">:</span>
    v<span class="token operator">-</span><span class="token keyword">for</span> <span class="token operator">=</span> <span class="token string">&quot;\u53D8\u91CF\u540D in \u6570\u7EC4\u6216\u8005\u96C6\u5408&quot;</span>  <span class="token operator">-&gt;</span> \u904D\u5386
    v<span class="token operator">-</span>text <span class="token operator">=</span> <span class="token string">&quot;data\u4E2D\u7684key&quot;</span>  <span class="token operator">-&gt;</span> \u5C06vue\u4E2Ddata\u7684\u6570\u636E\u663E\u793A\u5728\u6807\u7B7E\u4F53\u4E2D
    v<span class="token operator">-</span>model <span class="token operator">=</span> <span class="token string">&quot;data\u4E2D\u7684key&quot;</span>  <span class="token operator">-&gt;</span> \u53CC\u5411\u7ED1\u5B9A
    v<span class="token operator">-</span><span class="token keyword">if</span> <span class="token operator">=</span> <span class="token string">&quot;\u5224\u65AD&quot;</span>  <span class="token operator">-&gt;</span> \u5982\u679C\u5224\u65AD\u6210\u529F\u6807\u7B7E\u663E\u793A<span class="token punctuation">,</span>\u5982\u679C\u5224\u65AD\u662F\u5931\u8D25\u6807\u7B7E\u4E0D\u663E\u793A
    <span class="token punctuation">{</span><span class="token punctuation">{</span>data\u4E2D\u7684key<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">-&gt;</span>\u63D2\u503C\u8868\u8FBE\u5F0F <span class="token operator">-&gt;</span>\u5C06vue\u4E2Ddata\u7684\u6570\u636E\u5C55\u793A\u5728\u6807\u7B7E\u4F53\u4E2D
    v<span class="token operator">-</span>on<span class="token operator">:</span>\u4E8B\u4EF6  <span class="token operator">-&gt;</span> \u7ED1\u4E8B\u4EF6   <span class="token operator">-&gt;</span>  @\u4E8B\u4EF6\u540D <span class="token operator">=</span> <span class="token string">&quot;\u51FD\u6570\u540D&quot;</span>
    v<span class="token operator">-</span>bind<span class="token operator">:</span>\u5C5E\u6027\u540D   <span class="token operator">-&gt;</span> \u7ED1\u5B9A\u5C5E\u6027  <span class="token operator">-&gt;</span>  <span class="token operator">:</span>\u5C5E\u6027\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u7B2C\u4E00\u7AE0-\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E00\u7AE0-\u8D2D\u7269\u8F66" aria-hidden="true">#</a> \u7B2C\u4E00\u7AE0.\u8D2D\u7269\u8F66</h1><h2 id="_1-\u8D2D\u7269\u8F66\u539F\u578B\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_1-\u8D2D\u7269\u8F66\u539F\u578B\u5206\u6790" aria-hidden="true">#</a> 1.\u8D2D\u7269\u8F66\u539F\u578B\u5206\u6790</h2><p><img src="https://photo.sneoo.com/spring5/202207051129877.png" alt="1655773606408"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u901A\u8FC7\u89C2\u5BDF\u53D1\u73B0<span class="token operator">:</span>\u4E00\u4E2A\u8D2D\u7269\u8F66\u4E2D\u90FD\u591A\u4E2A\u8D2D\u7269\u9879
    
<span class="token number">2.</span>\u8D2D\u7269\u9879\u7684\u5C5E\u6027\u6709<span class="token operator">:</span> 
  \u56FE\u4E66<span class="token function">id</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span>  
  \u56FE\u4E66\u540D\u79F0<span class="token punctuation">(</span>bookName<span class="token punctuation">)</span>   
  \u56FE\u4E66\u56FE\u7247\u8DEF\u5F84<span class="token punctuation">(</span>imgPath<span class="token punctuation">)</span>  
  \u56FE\u4E66\u5355\u4EF7<span class="token punctuation">(</span>price<span class="token punctuation">)</span>  
  \u56FE\u4E66\u6570\u91CF<span class="token punctuation">(</span>count<span class="token punctuation">)</span>   
  \u56FE\u4E66\u91D1\u989D<span class="token punctuation">(</span>amount<span class="token punctuation">)</span>  <span class="token comment">//\u91D1\u989D\u7684\u591A\u5C11\u5E94\u8BE5\u662F\u6570\u91CF*\u5355\u4EF7\u51B3\u5B9A\u7684</span>
      
<span class="token number">3.</span>\u8D2D\u7269\u8F66
  a<span class="token punctuation">.</span>\u5C5E\u6027\u6709<span class="token operator">:</span>
    <span class="token function">totalAmount</span><span class="token punctuation">(</span>\u8D2D\u7269\u8F66\u603B\u91D1\u989D<span class="token punctuation">)</span>
    <span class="token function">totalCount</span><span class="token punctuation">(</span>\u8D2D\u7269\u8F66\u5546\u54C1\u603B\u6570<span class="token punctuation">)</span>
    <span class="token class-name">Map</span>\u96C6\u5408   <span class="token operator">-&gt;</span> \u5B58\u50A8\u8D2D\u7269\u9879   \u5E94\u8BE5\u7528<span class="token class-name">Map</span><span class="token punctuation">(</span>\u5B58\u50A8\u8D2D\u7269\u9879\u7684<span class="token class-name">Map</span>\u96C6\u5408<span class="token punctuation">,</span>\u8D2D\u7269\u9879\u7684bookId\u4F5C\u4E3Akey<span class="token punctuation">,</span>\u8D2D\u7269\u9879<span class="token class-name">CartItem</span>\u4F5C\u4E3Avalue<span class="token punctuation">)</span>
            \u56E0\u4E3A\u5220\u9664<span class="token punctuation">,</span>\u6DFB\u52A0\u67D0\u4E00\u4E2A\u5546\u54C1<span class="token punctuation">,</span>\u8D2D\u7269\u8F66\u4E2D\u7684\u5176\u4ED6\u5546\u54C1\u4E0D\u80FD\u52A8<span class="token punctuation">,</span>\u6240\u4EE5map\u4E2D\u7684key\u5E94\u8BE5\u662F\u56FE\u4E66\u7684id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-1-\u8D2D\u7269\u9879\u7C7B-cartitem" tabindex="-1"><a class="header-anchor" href="#_1-1-\u8D2D\u7269\u9879\u7C7B-cartitem" aria-hidden="true">#</a> 1.1.\u8D2D\u7269\u9879\u7C7B_CartItem</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartItem</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u56FE\u4E66id  \u56E0\u4E3A\u56FE\u4E66\u5305\u542B\u5728\u8D2D\u7269\u9879\u4E4B\u5185</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> bookId<span class="token punctuation">;</span>
    <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\u56FE\u4E66\u7684\u540D\u79F0</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bookName<span class="token punctuation">;</span>
    <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\u56FE\u7247\u7684\u8DEF\u5F84</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">;</span>
    <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\u56FE\u4E66\u7684\u5355\u4EF7</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\u56FE\u4E66\u7684\u6570\u91CF</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\u56FE\u4E66\u7684\u91D1\u989D</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> amount <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">,</span> <span class="token class-name">String</span> bookName<span class="token punctuation">,</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">,</span> <span class="token class-name">Double</span> price<span class="token punctuation">,</span> <span class="token class-name">Integer</span> count<span class="token punctuation">,</span> <span class="token class-name">Double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookId <span class="token operator">=</span> bookId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookName <span class="token operator">=</span> bookName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookId <span class="token operator">=</span> bookId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookName</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookName <span class="token operator">=</span> bookName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> imgPath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setImgPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> imgPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token class-name">Double</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BA1\u7B97\u5C0F\u8BA1\u91D1\u989D</span>
    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>
        <span class="token keyword">return</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-\u8D2D\u7269\u8F66\u7C7B-cart" tabindex="-1"><a class="header-anchor" href="#_1-2-\u8D2D\u7269\u8F66\u7C7B-cart" aria-hidden="true">#</a> 1.2.\u8D2D\u7269\u8F66\u7C7B_Cart</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cart</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u8D2D\u7269\u8F66\u4EF7\u683C\u603B\u91D1\u989D</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> totalAmount <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    <span class="token comment">//\u8D2D\u7269\u8F66\u5546\u54C1\u603B\u6570\u91CF</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">/*
      \u7531\u4E8E\u8D2D\u7269\u8F66\u4E2D\u9700\u8981\u5B58\u50A8\u591A\u4E2A\u8D2D\u7269\u9879
      \u6240\u4EE5\u6211\u4EEC\u5B9A\u4E49Map\u96C6\u5408,key\u4E3A\u56FE\u4E66\u7684id,value\u4E3A\u8D2D\u7269\u9879\u5BF9\u8C61\u6765\u5B58\u50A8\u8D2D\u7269\u9879\u5BF9\u8C61
    */</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token class-name">Double</span> totalAmount<span class="token punctuation">,</span> <span class="token class-name">Integer</span> totalCount<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalAmount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalCount <span class="token operator">=</span> totalCount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cartItemMap <span class="token operator">=</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> totalAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> totalAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> totalCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> totalCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalCount <span class="token operator">=</span> totalCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCartItemMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cartItemMap <span class="token operator">=</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u6DFB\u52A0\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#_2-\u6DFB\u52A0\u8D2D\u7269\u8F66" aria-hidden="true">#</a> 2.\u6DFB\u52A0\u8D2D\u7269\u8F66</h2><p><img src="https://photo.sneoo.com/spring5/202207051129878.png" alt="1655774535322"></p><img src="https://photo.sneoo.com/spring5/202207051129879.png" alt="image-20211201095557521" style="zoom:80%;"><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u5C06\u4F7F\u7528\u5230\u7684js\u6587\u4EF6\u5F15\u5165\u5230index<span class="token punctuation">.</span>html\u4E2D
<span class="token number">2.</span>\u7ED9<span class="token string">&quot;\u52A0\u5165\u8D2D\u7269\u8F66&quot;</span>\u6309\u94AE\u6DFB\u52A0\u5355\u51FB\u4E8B\u4EF6<span class="token operator">:</span>  <span class="token operator">&lt;</span>button <span class="token annotation punctuation">@click</span><span class="token operator">=</span><span class="token string">&quot;addCart&quot;</span> th<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;\${book.bookId}&quot;</span><span class="token operator">&gt;</span>\u52A0\u5165\u8D2D\u7269\u8F66<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token number">3.</span>\u4F7F\u7528vue\u548Caxios\u5B9A\u4E49addCart\u65B9\u6CD5<span class="token operator">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token generics"><span class="token punctuation">&lt;</span>script<span class="token punctuation">&gt;</span></span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        methods<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u83B7\u53D6&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66&quot;\u6309\u94AE\u4E0A\u7684value\u5C5E\u6027</span>
                <span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    method<span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
                    url<span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
                    params<span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                        method<span class="token operator">:</span> <span class="token string">&quot;addCart&quot;</span><span class="token punctuation">,</span>
                        bookId<span class="token operator">:</span> bookId
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>

                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-cartservlet\u6DFB\u52A0\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#_2-1-cartservlet\u6DFB\u52A0\u8D2D\u7269\u8F66" aria-hidden="true">#</a> 2.1.CartServlet\u6DFB\u52A0\u8D2D\u7269\u8F66</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/cart&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">{</span>
    <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">toCartPage</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token function">processTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;cart/cart&quot;</span><span class="token punctuation">,</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
       \u6DFB\u52A0\u8D2D\u7269\u8F66
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u9875\u9762\u5F02\u6B65\u63D0\u4EA4\u8FC7\u6765\u7684\u8981\u6DFB\u52A0\u7684\u56FE\u4E66id</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528\u6839\u636Eid\u67E5\u8BE2\u56FE\u4E66\u7684\u65B9\u6CD5</span>
        <span class="token class-name">Book</span> book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">findBookById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
          \u8C03\u7528\u8D2D\u7269\u8F66\u5BF9\u8C61\u7684\u65B9\u6CD5,\u5F80\u8D2D\u7269\u8F66\u4E2D\u6DFB\u52A0\u8D2D\u7269\u9879
          \u4F46\u662F\u8FD9\u91CC\u4E0D\u8981\u76F4\u63A5new Cart(),\u56E0\u4E3A\u8FD9\u6837\u7684\u8BDD\u6211\u4EEC\u6BCF\u6B21\u70B9\u51FB&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66&quot;\u90FD\u4F1A\u8D70addCart\u65B9\u6CD5
          \u5C31\u90FD\u4F1Anew Cart\u5BF9\u8C61

          \u6211\u4EEC\u5E94\u8BE5\u5C06\u8D2D\u7269\u8F66\u653E\u5230Session\u4E2D,\u4ECESession\u4E2D\u83B7\u53D6-&gt;\u5B9A\u4E49\u4E00\u4E2AgetCart\u65B9\u6CD5
         */</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
           \u600E\u4E48\u5C06\u8D2D\u7269\u9879\u6DFB\u52A0\u5230\u8D2D\u7269\u8F66\u5462?
           \u5728Cart\u7C7B\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u65B9\u6CD5,\u4E13\u95E8\u5B9E\u73B0\u5C06\u8D2D\u7269\u9879\u6DFB\u52A0\u5230\u8D2D\u7269\u8F66\u4E2D
         */</span>
        cart<span class="token punctuation">.</span><span class="token function">addCartItem</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u54CD\u5E94\u5BA2\u6237\u7AEF:\u6DFB\u52A0\u8D2D\u7269\u8F66\u6210\u529F,\u5F02\u6B65\u8BF7\u6C42,\u54CD\u5E94\u6570\u636E\u90FD\u662Fjson</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cart</span> <span class="token function">getCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5224\u65AD\u5982\u679CCart\u5BF9\u8C61\u4E3A\u7A7A,\u5C31\u5C06Cart\u6DFB\u52A0\u5230Session\u57DF\u4E2D</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cart<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            cart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> cart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-\u4FEE\u6539cart\u7C7B\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_2-2-\u4FEE\u6539cart\u7C7B\u4EE3\u7801" aria-hidden="true">#</a> 2.2.\u4FEE\u6539Cart\u7C7B\u4EE3\u7801</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u5728<span class="token class-name">Cart</span>\u7C7B\u4E2D\u6DFB\u52A0\u8D2D\u7269\u8F66
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
 <span class="token doc-comment comment">/**
     * \u5B9A\u4E49\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u5C06\u8D2D\u7269\u9879\u6DFB\u52A0\u5230\u8D2D\u7269\u8F66\u4E2D
     * \u4F20\u9012\u53C2\u6570\u8981\u6DFB\u52A0\u7684\u4E66\u5BF9\u8C61
     * \u6DFB\u52A0\u8FC7\u7A0B\uFF1A
     * 1\uFF1A \u5224\u65AD\u6DFB\u52A0\u7684\u5546\u54C1\uFF0C\u662F\u4E0D\u662F\u5DF2\u7ECF\u5728\u8D2D\u7269\u8F66\u4E2D\u4E86
     * 2\uFF1A \u8D2D\u7269\u8F66\u4E2D\u5B58\u5728\u76F8\u540C\u7684\u5546\u54C1\uFF0C\u4FEE\u6539\u539F\u6709\u8D2D\u4E70\u5546\u54C1\u7684\u6570\u91CF+1
     * 3\uFF1A \u8D2D\u7269\u8F66\u4E2D\u4E0D\u5B58\u5728\u76F8\u540C\u7684\u5546\u54C1\uFF0C\u76F4\u63A5\u521B\u5EFA\u8D2D\u7269\u9879\u5BF9\u8C61\uFF0C\u5B58\u50A8\u5728\u8D2D\u7269\u8F66\u4E2D
     * 4\uFF1A \u8BA1\u7B97\u603B\u4EF7\u683C
     */</span>
     <span class="token doc-comment comment">/**
     * \u6DFB\u52A0\u8D2D\u7269\u8F66
     * <span class="token keyword">@param</span> <span class="token parameter">book</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> bookId <span class="token operator">=</span> book<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItemMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItemMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>bookId<span class="token punctuation">,</span>cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setBookId</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setBookName</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setImgPath</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            cartItemMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>bookId<span class="token punctuation">,</span>cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount<span class="token operator">+=</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-\u4FEE\u6539index-html" tabindex="-1"><a class="header-anchor" href="#_2-3-\u4FEE\u6539index-html" aria-hidden="true">#</a> 2.3.\u4FEE\u6539index.html</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u83B7\u53D6&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66&quot;\u6309\u94AE\u4E0A\u7684value\u5C5E\u6027</span>
                <span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
                    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
                    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;addCart&quot;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">bookId</span><span class="token operator">:</span> bookId
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                   <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                       <span class="token comment">//\u63D0\u793A\u7528\u6237\u6DFB\u52A0\u6210\u529F</span>
                       layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u60F3\u4F7F\u7528layer\u505A<span class="token string">&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66\u6210\u529F&quot;</span>\u63D0\u793A<span class="token punctuation">,</span>\u6211\u4EEC\u5C31\u9700\u8981\u5C06layer<span class="token punctuation">.</span>js\u653E\u5230script\u5305\u4E0B

\u6CE8\u610F<span class="token operator">:</span>
<span class="token number">1.</span>\u6709\u53EF\u80FD\u90E8\u7F72\u7684webapps\u4E0B\u6CA1\u6709\u65B0\u5F15\u5165\u7684js
<span class="token number">2.</span>\u6B64js\u4F9D\u8D56\u4E8Ejquery<span class="token punctuation">.</span>js<span class="token punctuation">,</span>\u6240\u4EE5\u4E5F\u9700\u8981\u5C06jquery<span class="token punctuation">.</span>js\u5F15\u5165\u5230\u9879\u76EE\u4E0B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h2 id="_3-\u9996\u9875\u8D2D\u7269\u8F66\u6570\u91CF\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-\u9996\u9875\u8D2D\u7269\u8F66\u6570\u91CF\u95EE\u9898" aria-hidden="true">#</a> 3.\u9996\u9875\u8D2D\u7269\u8F66\u6570\u91CF\u95EE\u9898</h2><img src="https://photo.sneoo.com/spring5/202207051129880.png" alt="image-20211130181904579" style="zoom:80%;"><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u521A\u5F00\u59CB\u5728\u9996\u9875\u7684\u65F6\u5019<span class="token punctuation">,</span>\u8D2D\u7269\u8F66\u6570\u91CF\u5E94\u8BE5\u4E3A<span class="token number">0</span>
<span class="token number">2.</span><span class="token string">&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66&quot;</span>\u4E4B\u540E<span class="token punctuation">,</span>\u6570\u91CF\u5E94\u8BE5\u6539\u53D8<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>\u540E\u9762\u5373\u4F7F\u5237\u65B0\u9875\u9762\u8FD9\u4E2A\u6570\u91CF\u4E5F\u4E0D\u80FD\u6E05<span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-1-\u4FEE\u6539index-html" tabindex="-1"><a class="header-anchor" href="#_3-1-\u4FEE\u6539index-html" aria-hidden="true">#</a> 3.1.\u4FEE\u6539index.html</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">/*
   \u663E\u793A\u8D2D\u7269\u9879\u603B\u6570\u91CF
 */</span>
 <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
         <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
         <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&quot;getTotalCount&quot;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>resultData<span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>       


       <span class="token comment">/*
          \u9996\u9875\u4E0A\u663E\u793A\u7684\u56FE\u4E66\u6570\u91CF,\u662F\u968F\u7740\u70B9\u51FB&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66&quot;\u800C\u52A8\u6001\u53D8\u5316\u7684
          \u8FD9\u79CD\u64CD\u4F5C\u4E0D\u7528\u70B9\u67D0\u4E2A\u6309\u94AE\u6216\u8005\u6807\u7B7E\u5C31\u8981\u53D1\u5F02\u6B65\u8BF7\u6C42\u7684\u64CD\u4F5C,\u6CA1\u6CD5\u5728\u5BF9\u5E94\u7684\u6807\u7B7E\u4E0A\u52A0\u4E8B\u4EF6,\u8C03\u65B9\u6CD5
          \u529E\u6CD5:
            \u8FD9\u79CD\u4E0D\u901A\u8FC7\u70B9\u51FB\u6309\u94AE\u53D1\u5F02\u6B65\u8BF7\u6C42\u7684\u7684\u4EE3\u7801,\u76F4\u63A5\u653E\u5230vue\u7684\u94A9\u5B50\u51FD\u6570\u4E2D(vue\u6709\u751F\u547D\u5468\u671F,\u6BCF\u5230\u4E00\u4E2A\u5468\u671F,vue\u4F1A\u81EA\u52A8\u8C03\u7528\u5BF9\u5E94\u7684\u94A9\u5B50\u51FD\u6570)

            \u8FD9\u79CD\u4EE3\u7801\u653E\u5230\u94A9\u5B50\u51FD\u6570\u4E2D,\u8BA9vue\u81EA\u52A8\u8C03\u7528

            vue\u88C5\u8F7D\u5B8C\u6BD5\u4E4B\u540E,\u81EA\u52A8\u8C03\u7528
         */</span>

        <span class="token comment">/*
           \u9996\u9875\u663E\u793A\u6DFB\u52A0\u8D2D\u7269\u8F66\u6570\u91CF
           \u8FD9\u79CD\u94A9\u5B50\u51FD\u6570\u662F\u81EA\u52A8\u8C03\u7528\u7684
           vue\u4E2Dmethods\u91CC\u9762\u5199\u7684\u51FD\u6570\u662F\u9700\u8981\u7ED1\u5B9A\u4E8B\u4EF6\u624D\u80FD\u8C03\u7528\u7684
           \u6240\u4EE5\u94A9\u5B50\u51FD\u6570\u7ED9\u6211\u5199\u5728methods\u5916\u9762
         */</span>
 <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_3-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 3.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/*
      \u9996\u9875\u5C55\u793A\u5546\u54C1\u603B\u6570\u91CF
      \u53D6\u51FA\u8D2D\u7269\u8F66,\u83B7\u53D6Cart\u7C7B\u4E2D\u7684totalCount\u7684\u503C
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5B9A\u4E49\u53D8\u91CF\uFF0C\u4FDD\u5B58\u8D2D\u7269\u8F66\u7684\u5546\u54C1\u6570\u91CF</span>
        <span class="token class-name">Integer</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8D2D\u7269\u8F66\u5BF9\u8C61\u5224\u65AD</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cart <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u8C03\u7528\u8D2D\u7269\u8F66\u7684\u65B9\u6CD5\uFF0C\u83B7\u53D6\u6570\u91CF</span>
            count <span class="token operator">=</span> cart<span class="token punctuation">.</span><span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResultData</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD4\u56DE\u8D2D\u7269\u8F66\u603B\u6570\u91CF&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-\u4FEE\u6539cart\u7C7B" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4FEE\u6539cart\u7C7B" aria-hidden="true">#</a> 3.3.\u4FEE\u6539Cart\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*
          \u5982\u679C\u6BCF\u6B21\u8C03\u7528getTotalCount\u65B9\u6CD5
          \u6BCF\u6B21\u90FD\u4F1A\u5728\u539F\u6765\u7684\u57FA\u7840\u4E0A+1
          \u800C\u8D2D\u7269\u9879\u662F\u4ECEmap\u4E2D\u83B7\u53D6\u7684
          \u90A3\u4E48\u8D2D\u7269\u8F66\u4E2D\u6709\u591A\u5C11\u8D2D\u7269\u9879,map\u5C31\u904D\u5386\u51E0\u6B21,\u5C31\u8981\u52A0\u51E0\u6B21
          \u4F1A\u5BFC\u81F4\u52A0\u591A\u4E86
         */</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> key <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            totalCount<span class="token operator">+=</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> totalCount<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-\u4FEE\u6539index-html" tabindex="-1"><a class="header-anchor" href="#_3-4-\u4FEE\u6539index-html" aria-hidden="true">#</a> 3.4.\u4FEE\u6539index.html</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;count&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">/*
             \u6DFB\u52A0\u8D2D\u7269\u8F66
             */</span>
            <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u83B7\u53D6&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66&quot;\u6309\u94AE\u4E0A\u7684value\u5C5E\u6027</span>
                <span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
                    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
                    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;addCart&quot;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">bookId</span><span class="token operator">:</span> bookId
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                   <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                       <span class="token comment">//\u63D0\u793A\u7528\u6237\u6DFB\u52A0\u6210\u529F</span>
                       layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token comment">//==========\u6DFB\u52A0\u4E86\u8FD9\u91CC=======</span>
                       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>   
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\u767B\u5F55\u524D\u767B\u5F55\u540E\u98CE\u683C\u90FD\u8981\u6539
=====================================
\u8D2D\u7269\u8F66<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u8D2D\u7269\u8F66\u4E2D\u5C55\u793A\u6DFB\u52A0\u8D2D\u7269\u8F66\u7684\u56FE\u4E66" tabindex="-1"><a class="header-anchor" href="#_4-\u8D2D\u7269\u8F66\u4E2D\u5C55\u793A\u6DFB\u52A0\u8D2D\u7269\u8F66\u7684\u56FE\u4E66" aria-hidden="true">#</a> 4.\u8D2D\u7269\u8F66\u4E2D\u5C55\u793A\u6DFB\u52A0\u8D2D\u7269\u8F66\u7684\u56FE\u4E66</h2><h3 id="_4-1-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_4-1-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 4.1.\u4FEE\u6539cart.html</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u7ED9div\u6DFB\u52A0id <span class="token operator">=</span> app
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;list&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
      
<span class="token number">2.</span>\u6DFB\u52A0axios vue\u7684js\u6587\u4EF6
<span class="token number">3.</span>\u6DFB\u52A0vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
           <span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                 <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
                 <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
                 <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                    <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&quot;showCart&quot;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

             <span class="token punctuation">}</span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_4-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 4.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * \u5728\u8D2D\u7269\u8F66\u4E2D\u663E\u793A\u6DFB\u52A0\u5728\u8D2D\u7269\u8F66\u4E2D\u7684\u56FE\u4E66
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">showCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u8D2D\u7269\u8F66</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5224\u65AD\u8D2D\u7269\u8F66\u4E2D\u662F\u5426\u6709\u5546\u54C1</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cart<span class="token punctuation">.</span><span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">CommonResult</span> cr1 <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResultData</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D2D\u7269\u8F66\u4E2D\u6CA1\u6709\u5546\u54C1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">CommonResult</span> cr2 <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setResultData</span><span class="token punctuation">(</span>cart<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D2D\u7269\u8F66\u83B7\u53D6\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_4-3-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 4.3.\u4FEE\u6539cart.html</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u5982\u679C\u6CA1\u6709\u5728\u8D2D\u7269\u8F66\u4E2D\u6DFB\u52A0\u5546\u54C1<span class="token punctuation">,</span>\u90A3\u4E48\u8D2D\u7269\u8F66\u4E2D\u5E94\u8BE5\u662F\u7A7A\u7684<span class="token punctuation">;</span>\u5982\u679C\u662F\u7A7A\u7684<span class="token punctuation">,</span>cart<span class="token punctuation">.</span>html\u4E2D\u663E\u793A<span class="token string">&quot;\u8D2D\u7269\u8F66\u5565\u4E5F\u6CA1\u6709&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span><span class="token literal-property property">\u5728vue\u7684data\u4E2D\u6DFB\u52A0</span><span class="token operator">:</span><span class="token string">&quot;cart&quot;</span><span class="token operator">:</span><span class="token number">0</span>
<span class="token number">2.</span><span class="token literal-property property">\u5728then\u4E2D\u6DFB\u52A0</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>cart <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>resultData<span class="token punctuation">;</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//=============\u65B0\u6DFB\u52A0\u7684=========</span>
            <span class="token string-property property">&quot;cart&quot;</span><span class="token operator">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//\u751F\u547D\u5468\u671F\u94A9\u5B50</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                 <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
                 <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
                 <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                     <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;showCart&quot;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                 <span class="token comment">//\u54CD\u5E94\u6570\u636E\u5224\u65AD\uFF0C\u662F\u5426\u6709\u8D2D\u7269\u8F66\u5BF9\u8C61\u8FD4\u56DE</span>
                 <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
                     <span class="token comment">//Vue\u5BF9\u8C61\u7684json:cart\u8D4B\u503C</span>
                     <span class="token keyword">this</span><span class="token punctuation">.</span>cart <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>resultData<span class="token punctuation">;</span>
                 <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                     <span class="token comment">//\u670D\u52A1\u5668\u54CD\u5E94\u7684\u662F\uFF0C\u8D2D\u7269\u8F66\u6CA1\u5546\u54C1</span>
                     <span class="token keyword">this</span><span class="token punctuation">.</span>cart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u5728cart<span class="token punctuation">.</span>html\u4E2D\u7684tbody\u4F4D\u7F6E\u505A\u5224\u65ADvue\u4E2Dcart\u662F\u5426\u4E3A<span class="token number">0</span><span class="token punctuation">,</span>\u5982\u679C\u4E3A<span class="token number">0</span><span class="token punctuation">,</span>\u663E\u793A<span class="token string">&quot;\u8D2D\u7269\u8F66\u4E2D\u5565\u4E5F\u6CA1\u6709&quot;</span><span class="token punctuation">;</span>\u5426\u5219<span class="token punctuation">,</span>\u663E\u793A\u56FE\u4E66
    
<span class="token number">2.</span>\u6DFB\u52A0v<span class="token operator">-</span><span class="token keyword">if</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">v-if</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>cart==0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u8D2D\u7269\u8F66\u4E2D\u5565\u4E5F\u6CA1\u6709<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">v-if</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>cart!=0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/uploads/huozhe.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>\u6D3B\u7740<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>36.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>36.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5220\u9664<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-\u8D2D\u7269\u8F66\u6570\u636E\u5C55\u793A\u5B8C\u6210-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_4-4-\u8D2D\u7269\u8F66\u6570\u636E\u5C55\u793A\u5B8C\u6210-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 4.4.\u8D2D\u7269\u8F66\u6570\u636E\u5C55\u793A\u5B8C\u6210_\u4FEE\u6539cart.html</h3><p><img src="https://photo.sneoo.com/spring5/202207051129881.png" alt="1655780068435"></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>            <span class="token comment">&lt;!--
              \u5C06\u670D\u52A1\u5668\u54CD\u5E94\u56DE\u6765\u7684Cart\u5BF9\u8C61\u4E2D\u7684map\u96C6\u5408\u4E2D\u7684\u6570\u636E\u904D\u5386\u51FA\u6765
              \u5C55\u793A\u5728\u9875\u9762\u4E0A
            --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart!=0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>cartItem in cart.cartItemMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--
                     \u7528\u5C5E\u6027\u7ED1\u5B9A,\u7ED1\u5B9Asrc  v-bind
                    --&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem.imgPath<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{cartItem.bookName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem.count<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{cartItem.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{cartItem.amount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u5220\u9664<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clear-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u6E05\u7A7A\u8D2D\u7269\u8F66<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u7EE7\u7EED\u8D2D\u7269<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>\u5171<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{cart.totalCount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>\u4EF6\u5546\u54C1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total-price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u603B\u91D1\u989D<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{cart.totalAmount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>\u5143<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pay<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkout.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u53BB\u7ED3\u8D26<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://photo.sneoo.com/spring5/202207051129882.png" alt="image-20211201145351522" style="zoom:80%;"><h2 id="_5-\u6E05\u7A7A\u8D2D\u7269\u8F66" tabindex="-1"><a class="header-anchor" href="#_5-\u6E05\u7A7A\u8D2D\u7269\u8F66" aria-hidden="true">#</a> 5.\u6E05\u7A7A\u8D2D\u7269\u8F66</h2><h3 id="_5-1-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_5-1-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 5.1.\u4FEE\u6539cart.html</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>\u5728<span class="token string">&quot;\u6E05\u7A7A\u8D2D\u7269\u8F66&quot;</span>\u7684\u6309\u94AE\u4E0A\u6DFB\u52A0<span class="token operator">:</span>
   <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:void(0)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;clear-cart&quot;</span> <span class="token annotation punctuation">@click</span><span class="token operator">=</span><span class="token string">&quot;clearCart()&quot;</span><span class="token operator">&gt;</span>\u6E05\u7A7A\u8D2D\u7269\u8F66<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token number">2.</span>\u5728vue\u4E2D\u7F16\u5199<span class="token operator">:</span><span class="token function">clearCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\u51FD\u6570<span class="token operator">:</span>
 
<span class="token number">3.</span>\u6CE8\u610F<span class="token operator">:</span>\u6E05\u7A7A\u4E4B\u540E\u9700\u8981\u91CD\u65B0\u5C55\u793A\u4E00\u4E0B\u8D2D\u7269\u8F66
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6E05\u7A7A\u8D2D\u7269\u8F66</span>
    <span class="token function">clearCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;\u60A8\u786E\u5B9A\u6E05\u7A7A\u8D2D\u7269\u8F66\u5417?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
                <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                    <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clearCart&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u5982\u679Cresponse\u63A5\u6536\u7684true,\u8BC1\u660E\u6E05\u7A7A\u8D2D\u7269\u8F66\u6210\u529F\u4E86</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>cart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    <span class="token comment">//\u91CD\u65B0\u8C03\u7528\u5C55\u793A\u6DFB\u52A0\u5230\u8D2D\u7269\u8F66\u4E2D\u56FE\u4E66\u7684\u65B9\u6CD5</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>

     <span class="token comment">//\u5C55\u793A\u6DFB\u52A0\u5230\u8D2D\u7269\u8F66\u4E2D\u7684\u56FE\u4E66</span>
     <span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
               <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
               <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
               <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                   <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;showCart&quot;</span>
               <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               <span class="token comment">//\u54CD\u5E94\u6570\u636E\u5224\u65AD\uFF0C\u662F\u5426\u6709\u8D2D\u7269\u8F66\u5BF9\u8C61\u8FD4\u56DE</span>
               <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
                   <span class="token comment">//Vue\u5BF9\u8C61\u7684json:cart\u8D4B\u503C</span>
                   <span class="token keyword">this</span><span class="token punctuation">.</span>cart <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>resultData<span class="token punctuation">;</span>
               <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                   <span class="token comment">//\u670D\u52A1\u5668\u54CD\u5E94\u7684\u662Ffalse\uFF0C\u8D2D\u7269\u8F66\u6CA1\u5546\u54C1</span>
                   <span class="token keyword">this</span><span class="token punctuation">.</span>cart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//\u751F\u547D\u5468\u671F\u94A9\u5B50</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_5-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 5.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
      \u6E05\u7A7A\u8D2D\u7269\u8F66
 */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clearCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u4ECEsession\u57DF\u4E2D\u83B7\u53D6Cart</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6Cart\u4E2D\u7684Map\u96C6\u5408</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> cart<span class="token punctuation">.</span><span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06Map\u4E2D\u7684CartItem\u8D2D\u7269\u9879\u6E05\u7A7A</span>
        map<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5C06\u8D2D\u7269\u8F66\u4E2D\u7684\u603B\u91D1\u989D\u53D8\u62100  -&gt; \u65B0\u6DFB\u52A0\u7684</span>
        cart<span class="token punctuation">.</span><span class="token function">setTotalAmount</span><span class="token punctuation">(</span><span class="token number">0d</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D2D\u7269\u8F66\u6E05\u7A7A\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>  

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-\u8D2D\u7269\u8F66\u70B9\u51FB\u51CF\u53F7" tabindex="-1"><a class="header-anchor" href="#_6-\u8D2D\u7269\u8F66\u70B9\u51FB\u51CF\u53F7" aria-hidden="true">#</a> 6.\u8D2D\u7269\u8F66\u70B9\u51FB\u51CF\u53F7</h2><h3 id="_6-1-\u70B9\u51FB\u51CF\u53F7\u7684\u8BF7\u6C42-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_6-1-\u70B9\u51FB\u51CF\u53F7\u7684\u8BF7\u6C42-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 6.1.\u70B9\u51FB\u51CF\u53F7\u7684\u8BF7\u6C42_\u4FEE\u6539cart.html</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\u627E\u5230cart.html\u7684\u51CF\u53F7

====================================
<span class="token comment">&lt;!--
  \u6389\u65B9\u6CD5\u65F6\u9700\u8981\u4F20\u9012\u56FE\u4E66id\u548C\u5BF9\u5E94\u56FE\u4E66\u7684\u6570\u91CF
--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>cartItemDecrease(cartItem.bookId,cartItem.count)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token comment">//\u70B9\u51FB\u51CF\u53F7</span>
  <span class="token function">cartItemDecrease</span><span class="token punctuation">(</span><span class="token parameter">bookId<span class="token punctuation">,</span>count</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//\u5224\u65AD\u8D2D\u4E70\u7684\u5546\u54C1\u5C311\u4E2A,\u70B9\u51FB\u51CF\u53F7,\u76F4\u63A5\u5220\u9664\u8FD9\u4E2A\u5546\u54C1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5546\u54C1\u5417?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">//\u5411\u670D\u52A1\u5668\u53D1\u9001\u5F02\u6B65\u8BF7\u6C42</span>
       <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
            <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
               <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;cartItemDecrease&quot;</span><span class="token punctuation">,</span>
               <span class="token string-property property">&quot;bookId&quot;</span><span class="token operator">:</span>bookId<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

       <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_6-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 6.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/*
      \u70B9\u51FB\u51CF\u53F7
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cartItemDecrease</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u8981\u51CF\u7684\u56FE\u4E66bookId</span>
        <span class="token class-name">Integer</span> bookId <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEsession\u4E2D\u83B7\u53D6\u8D2D\u7269\u8F66</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528cart\u4E2D\u7684\u51CF1\u65B9\u6CD5,\u4F20\u9012bookId</span>
        cart<span class="token punctuation">.</span><span class="token function">cartItemDecrease</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u54CD\u5E94\u7ED3\u679C</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u54C1\u51CF\u5C11\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-\u4FEE\u6539cart\u7C7B" tabindex="-1"><a class="header-anchor" href="#_6-3-\u4FEE\u6539cart\u7C7B" aria-hidden="true">#</a> 6.3.\u4FEE\u6539Cart\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * \u70B9\u51FB\u51CF\u53F7
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cartItemDecrease</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//1.\u4ECEmap\u4E2D\u5148\u83B7\u53D6\u8D2D\u7269\u9879</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
          2.\u5728CartItem\u7C7B\u4E2D\u521B\u5EFA\u8D2D\u4E70\u6570\u91CF\u51CF1\u7684\u65B9\u6CD5
            countDecrease()\u65B9\u6CD5-&gt;count--
         */</span>
        cartItem<span class="token punctuation">.</span><span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.\u83B7\u53D6\u8D2D\u7269\u9879\u4E2D\u7684count\u6570\u91CF,\u5224\u65AD\u5982\u679C\u662F0,\u76F4\u63A5\u4ECEmap\u4E2D\u5220\u9664\u8D2D\u7269\u9879CartItem</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            cartItemMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//3.\u8BA1\u7B97\u65B0\u7684\u603B\u4EF7\u683C</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount<span class="token operator">-=</span>cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4-\u4FEE\u6539cartitem\u7C7B" tabindex="-1"><a class="header-anchor" href="#_6-4-\u4FEE\u6539cartitem\u7C7B" aria-hidden="true">#</a> 6.4.\u4FEE\u6539CartItem\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8D2D\u7269\u9879\u5546\u54C1\u51CF1
 */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5-\u56DE\u5934\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_6-5-\u56DE\u5934\u4FEE\u6539cart-html" aria-hidden="true">#</a> 6.5.\u56DE\u5934\u4FEE\u6539cart.html</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">//\u70B9\u51FB\u51CF\u53F7</span>
 <span class="token function">cartItemDecrease</span><span class="token punctuation">(</span><span class="token parameter">bookId<span class="token punctuation">,</span>count</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//\u5224\u65AD\u8D2D\u4E70\u7684\u5546\u54C1\u5C311\u4E2A,\u70B9\u51FB\u51CF\u53F7,\u76F4\u63A5\u5220\u9664\u8FD9\u4E2A\u5546\u54C1</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;\u786E\u5B9A\u8981\u5220\u9664\u6B64\u5546\u54C1\u5417?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token keyword">return</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token comment">//\u5411\u670D\u52A1\u5668\u53D1\u9001\u5F02\u6B65\u8BF7\u6C42</span>
      <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
           <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
           <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
           <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
              <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;cartItemDecrease&quot;</span><span class="token punctuation">,</span>
              <span class="token string-property property">&quot;bookId&quot;</span><span class="token operator">:</span>bookId<span class="token punctuation">,</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token comment">//\u5982\u679C\u51CF1\u6210\u529F\u4E86,\u91CD\u65B0\u8C03\u7528showCart,\u91CD\u65B0\u5C55\u793A\u4E00\u4E0B\u8D2D\u7269\u8F66\u5546\u54C1</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-\u8D2D\u7269\u8F66\u70B9\u51FB\u52A0\u53F7" tabindex="-1"><a class="header-anchor" href="#_7-\u8D2D\u7269\u8F66\u70B9\u51FB\u52A0\u53F7" aria-hidden="true">#</a> 7.\u8D2D\u7269\u8F66\u70B9\u51FB\u52A0\u53F7</h2><h3 id="_7-1-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_7-1-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 7.1.\u4FEE\u6539cart.html</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\u7ED9+\u6DFB\u52A0\u4E8B\u4EF6,\u4F20\u9012\u53C2\u6570
======================================
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItemIncrease(cartItem.bookId)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u70B9\u51FB\u52A0\u53F7</span>
 <span class="token function">cartItemIncrease</span><span class="token punctuation">(</span><span class="token parameter">bookId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
         <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
         <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
         <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
             <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cartItemIncrease&quot;</span><span class="token punctuation">,</span>
             <span class="token string-property property">&quot;bookId&quot;</span><span class="token operator">:</span> bookId
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_7-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 7.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">/*
      \u70B9\u51FB\u52A0\u53F7
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cartItemIncrease</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u8981\u52A0\u7684\u56FE\u4E66bookId</span>
        <span class="token class-name">Integer</span> bookId <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECEsession\u4E2D\u83B7\u53D6\u8D2D\u7269\u8F66</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528cart\u4E2D\u7684\u52A01\u65B9\u6CD5,\u4F20\u9012bookId</span>
        cart<span class="token punctuation">.</span><span class="token function">cartItemIncrease</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u54CD\u5E94\u7ED3\u679C</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u54C1\u589E\u52A0\u4E86&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-\u4FEE\u6539cart\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-3-\u4FEE\u6539cart\u7C7B" aria-hidden="true">#</a> 7.3.\u4FEE\u6539Cart\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token doc-comment comment">/**
     * \u70B9\u51FB\u52A0\u53F7
 */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cartItemIncrease</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//1.\u4ECEmap\u4E2D\u5148\u83B7\u53D6\u8D2D\u7269\u9879</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
          2.\u5728CartItem\u7C7B\u4E2D\u521B\u5EFA\u8D2D\u4E70\u6570\u91CF\u51CF\u52A01\u7684\u65B9\u6CD5
            countIncrease()\u65B9\u6CD5-&gt;count++
         */</span>
        cartItem<span class="token punctuation">.</span><span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.\u8BA1\u7B97\u65B0\u7684\u603B\u4EF7\u683C</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount<span class="token operator">+=</span>cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-\u4FEE\u6539cartitem\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-4-\u4FEE\u6539cartitem\u7C7B" aria-hidden="true">#</a> 7.4.\u4FEE\u6539CartItem\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * \u8D2D\u7269\u9879\u5546\u54C1\u52A01
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-\u4FEE\u6539\u8F93\u5165\u6846\u4FEE\u6539\u56FE\u4E66\u6570\u91CF" tabindex="-1"><a class="header-anchor" href="#_8-\u4FEE\u6539\u8F93\u5165\u6846\u4FEE\u6539\u56FE\u4E66\u6570\u91CF" aria-hidden="true">#</a> 8.\u4FEE\u6539\u8F93\u5165\u6846\u4FEE\u6539\u56FE\u4E66\u6570\u91CF</h2><h3 id="_8-1-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_8-1-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 8.1.\u4FEE\u6539cart.html</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\u7ED9\u5546\u54C1\u6570\u91CF\u6587\u672C\u6846\u6DFB\u52A0\u5931\u53BB\u7126\u70B9\u4E8B\u4EF6\u6216\u8005\u6539\u53D8\u4E8B\u4EF6
===================================================
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@blur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateCartItemCount(cartItem.bookId,cartItem.count)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem.count<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">//\u4FEE\u6539\u8F93\u5165\u6846\u4FEE\u6539\u56FE\u4E66\u6570\u91CF</span>
<span class="token function">updateCartItemCount</span><span class="token punctuation">(</span><span class="token parameter">bookId<span class="token punctuation">,</span>count</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u6587\u672C\u6846\u6570\u636E\u7684\u6821\u9A8C\uFF0C\u5FC5\u987B\u6574\u6570\uFF0C\u5927\u4E8E0</span>
    <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[1-9][0-9]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6587\u672C\u6846\u6570\u636E\u8F93\u5165\u9519\u8BEF</span>
        layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&quot;\u5BF9\u4E0D\u8D77\uFF0C\u8F93\u5165\u9519\u8BEF&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u670D\u52A1\u5668\u53D1\u9001\u8BF7\u6C42\uFF0C\u4F20\u9012\u4E66\u7684id\uFF0C\u4FEE\u6539\u540E\u7684\u6570\u91CF</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&quot;updateCartItemCount&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">bookId</span><span class="token operator">:</span>bookId<span class="token punctuation">,</span>
            <span class="token literal-property property">count</span><span class="token operator">:</span>count
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//\u670D\u52A1\u5668 \u52A0\u52A0\u6210\u529F\uFF0C\u4ECE\u65B0\u52A0\u8F7D\u8D2D\u7269\u8F66</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_8-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 8.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  <span class="token comment">/*
      \u4FEE\u6539\u8F93\u5165\u6846\u6539\u53D8\u5546\u54C1\u6570\u91CF
  */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCartItemCount</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u83B7\u53D6\u5BA2\u6237\u7AEF\u7684\u8BF7\u6C42\u53C2\u6570\uFF0C\u4E66\u7684id\uFF0C\u8D2D\u4E70\u6570\u91CF</span>
        <span class="token class-name">Integer</span> bookId <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> count <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cart<span class="token punctuation">.</span><span class="token function">updateCartItemCount</span><span class="token punctuation">(</span>bookId<span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u54CD\u5E94</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u4FEE\u6539\u6570\u91CF\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-\u4FEE\u6539cart\u7C7B" tabindex="-1"><a class="header-anchor" href="#_8-3-\u4FEE\u6539cart\u7C7B" aria-hidden="true">#</a> 8.3.\u4FEE\u6539Cart\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/*
     *  \u4FEE\u6539\u8F93\u5165\u6846\u4FEE\u6539\u56FE\u4E66\u6570\u91CF
     *  \u4FEE\u6539\u8D2D\u4E70\u6570\u91CF\u7684\u65B9\u6CD5\uFF0C\u53C2\u6570\uFF0C\u56FE\u4E66id\uFF0C\u4FEE\u6539\u7684\u6570\u91CF
     *  \u5B9E\u73B0\u5B9E\u73B0\uFF1A
     *    \u56FE\u4E66id\u4F5C\u4E3A\u952E\uFF0C\u53D6\u51FAMap\u96C6\u5408\u7684\u503C\uFF0C\u8D2D\u7269\u9879CartItem
     *    \u8BBE\u7F6E\u8D2D\u7269\u9879\u4E2D\u7684\u8D2D\u4E70\u6570\u91CF
     *    \u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCartItemCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u539F\u6709\u7684\u6570\u91CF</span>
        <span class="token class-name">Integer</span> originalCount <span class="token operator">=</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u4FEE\u6539\u7684\u6570\u91CF</span>
        cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA1\u7B97\u603B\u91D1\u989D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">+=</span> <span class="token punctuation">(</span>count<span class="token operator">-</span>originalCount<span class="token punctuation">)</span><span class="token operator">*</span>cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-\u8D2D\u7269\u8F66\u79FB\u9664\u8D2D\u7269\u9879" tabindex="-1"><a class="header-anchor" href="#_9-\u8D2D\u7269\u8F66\u79FB\u9664\u8D2D\u7269\u9879" aria-hidden="true">#</a> 9.\u8D2D\u7269\u8F66\u79FB\u9664\u8D2D\u7269\u9879</h2><h3 id="_9-1-\u4FEE\u6539cart-html" tabindex="-1"><a class="header-anchor" href="#_9-1-\u4FEE\u6539cart-html" aria-hidden="true">#</a> 9.1.\u4FEE\u6539cart.html</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u7ED9\u5220\u9664\u6309\u94AE\u7ED1\u5B9A\u5355\u51FB\u4E8B\u4EF6
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
 <span class="token generics"><span class="token punctuation">&lt;</span>td<span class="token punctuation">&gt;</span></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:void(0)&quot;</span> <span class="token annotation punctuation">@click</span><span class="token operator">=</span><span class="token string">&quot;removeCartItem(cartItem.bookId)&quot;</span><span class="token operator">&gt;</span>\u5220\u9664<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">//\u5220\u9664\u8D2D\u7269\u9879</span>
<span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token parameter">bookId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;\u60A8\u786E\u5B9A\u5220\u9664\u5417?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token comment">//\u8BF7\u6C42\u65B9\u5F0F</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span>    <span class="token comment">//\u8BF7\u6C42\u8DEF\u5F84</span>
            <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">//\u8BF7\u6C42\u53C2\u6570</span>
                <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;removeCartItem&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;bookId&quot;</span><span class="token operator">:</span> bookId
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>flag<span class="token operator">==</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//\u670D\u52A1\u5668 \u52A0\u52A0\u6210\u529F\uFF0C\u4ECE\u65B0\u52A0\u8F7D\u8D2D\u7269\u8F66</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-2-\u4FEE\u6539cartservlet" tabindex="-1"><a class="header-anchor" href="#_9-2-\u4FEE\u6539cartservlet" aria-hidden="true">#</a> 9.2.\u4FEE\u6539CartServlet</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">/*
      \u5220\u9664\u8D2D\u7269\u9879
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> bookId <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token function">getCart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528cart\u7C7B\u4E2D\u7684\u5220\u9664\u8D2D\u7269\u9879\u7684\u65B9\u6CD5</span>
        cart<span class="token punctuation">.</span><span class="token function">removeCartItem</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u54CD\u5E94</span>
        <span class="token class-name">CommonResult</span> cr <span class="token operator">=</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u5220\u9664\u8D2D\u7269\u9879\u6210\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">writeResult</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span>cr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-3-\u4FEE\u6539cart\u7C7B" tabindex="-1"><a class="header-anchor" href="#_9-3-\u4FEE\u6539cart\u7C7B" aria-hidden="true">#</a> 9.3.\u4FEE\u6539Cart\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * \u5220\u9664\u8D2D\u7269\u9879
     * <span class="token keyword">@param</span> <span class="token parameter">bookId</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Map\u96C6\u5408\u7684\u65B9\u6CD5remove()\u79FB\u9664\u952E\u503C\u5BF9\uFF0C\u8FD4\u56DE\u88AB\u79FB\u9664\u4E4B\u524D\u7684\u503C</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u8001\u7684\u91D1\u989D</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount<span class="token operator">-=</span>cartItem<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-\u89E3\u51B3\u91D1\u989D\u7CBE\u5EA6\u635F\u5931\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_10-\u89E3\u51B3\u91D1\u989D\u7CBE\u5EA6\u635F\u5931\u95EE\u9898" aria-hidden="true">#</a> 10.\u89E3\u51B3\u91D1\u989D\u7CBE\u5EA6\u635F\u5931\u95EE\u9898</h2><h3 id="_10-1\u4FEE\u6539cart\u7C7B" tabindex="-1"><a class="header-anchor" href="#_10-1\u4FEE\u6539cart\u7C7B" aria-hidden="true">#</a> 10.1\u4FEE\u6539Cart\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8D2D\u7269\u8F66\u7C7B
 *  \u5305\u542B\uFF0C\u8D2D\u7269\u9879\u591A\u4E2A\uFF0C\u603B\u6570\u636E\u91CF\uFF0C\u8D2D\u7269\u8F66\u6240\u6709\u5546\u54C1\u7684\u603B\u4EF7\u683C
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cart</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> totalCount<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> totalAmount <span class="token operator">=</span> <span class="token number">0D</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5B9A\u4E49\u5927\u6570\u636E\u8FD0\u7B97\u7C7B</span>
    <span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> totalCountBigDecimal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u5B58\u50A8\u591A\u4E2A\u8D2D\u7269\u9879\u7684\u96C6\u5408
     * Map\u96C6\u5408\u7684\u952E\uFF0C\u662F\u56FE\u4E66\u7684\u552F\u4E00\u7F16\u53F7
     * Map\u96C6\u5408\u7684\u503C\uFF0C\u662F\u8D2D\u7269\u9879
     * \u8D2D\u7269\u9879\u5BF9\u8C61CartItem\uFF0C\u5B58\u50A8Map\u96C6\u5408\uFF0C\u6DFB\u52A0\u8D2D\u7269\u8F66
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> totalCount<span class="token punctuation">,</span> <span class="token class-name">Double</span> totalAmount<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalCount <span class="token operator">=</span> totalCount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalAmount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cartItemMap <span class="token operator">=</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     *  \u79FB\u9664\u8D2D\u7269\u8F66\u4E2D\u7684\u8D2D\u7269\u9879\uFF0C\u53C2\u6570\u56FE\u4E66id
     *  \u5C06Map\u96C6\u5408\u4E2D\uFF0C\u79FB\u9664\u4E00\u7EC4\u952E\u503C\u5BF9
     *  \u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeCartItem</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//Map\u96C6\u5408\u7684\u65B9\u6CD5remove()\u79FB\u9664\u952E\u503C\u5BF9\uFF0C\u8FD4\u56DE\u88AB\u79FB\u9664\u4E4B\u524D\u7684\u503C</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D</span>
        <span class="token comment">//\u603B\u91D1\u989D = \u539F\u6709\u7684\u603B\u91D1\u989D - \u88AB\u79FB\u9664\u7684\u8D2D\u7269\u9879\u7684\u5C0F\u8BA1\u91D1\u989D</span>
        totalCountBigDecimal <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token doc-comment comment">/**
     *  \u4FEE\u6539\u8D2D\u4E70\u6570\u91CF\u7684\u65B9\u6CD5\uFF0C\u53C2\u6570\uFF0C\u56FE\u4E66id\uFF0C\u4FEE\u6539\u7684\u6570\u91CF
     *  \u5B9E\u73B0\u5B9E\u73B0\uFF1A
     *    \u56FE\u4E66id\u4F5C\u4E3A\u952E\uFF0C\u53D6\u51FAMap\u96C6\u5408\u7684\u503C\uFF0C\u8D2D\u7269\u9879CartItem
     *    \u8BBE\u7F6E\u8D2D\u7269\u9879\u4E2D\u7684\u8D2D\u4E70\u6570\u91CF
     *    \u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCartItemCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">,</span><span class="token class-name">Integer</span> count<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u83B7\u53D6\u539F\u6709\u7684\u8D2D\u4E70\u6570\u91CF</span>
        <span class="token class-name">Integer</span> originalCount <span class="token operator">=</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BBE\u7F6E\u8D2D\u4E70\u6570\u91CF</span>
        cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D, \u539F\u6709\u7684\u603B\u91D1\u989D + \u8D2D\u4E70\u6570\u91CF\u7684\u5DEE\u503C*\u5355\u4EF7</span>
        totalCountBigDecimal <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token punctuation">(</span>count<span class="token operator">-</span>originalCount<span class="token punctuation">)</span><span class="token operator">*</span>cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     * cartItemIncrease \u65B9\u6CD5\uFF0C\u5B9E\u73B0\u8D2D\u7269\u8F66\u4E2D\u5546\u54C1\u6570\u91CF\u7684++\u64CD\u4F5C
     * \u4F20\u9012\u7684\u53C2\u6570\uFF1AbookId\uFF0C\u53D6\u51FAMap\u96C6\u5408\u4E2D\u7684\u503CCartItem \u8D2D\u7269\u9879\u5BF9\u8C61
     * \u8C03\u7528\u8D2D\u7269\u9879\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u8D2D\u4E70\u6570\u91CF+1
     * \u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cartItemIncrease</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u8D2D\u7269\u8F66\u5BF9\u8C61\u7684Map\u96C6\u5408\uFF0C\u952E\u83B7\u53D6\u503C\uFF0C\u8D2D\u7269\u9879</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u8C03\u7528\u8D2D\u7269\u9879\u5BF9\u8C61\u7684\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u8D2D\u4E70\u6570\u91CF+1</span>
        cartItem<span class="token punctuation">.</span><span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u4ECE\u65B0\u8BA1\u7B97\u603B\u91D1\u989D</span>
        totalCountBigDecimal <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * cartItemDecrease \u5B9A\u4E49\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u8D2D\u7269\u8F66\u4E2D\u5546\u54C1\u6570\u91CF\u7684--\u64CD\u4F5C
     * \u8D2D\u7269\u8F66\u5BF9\u8C61\uFF1AMap\u96C6\u5408cartItemMap \uFF08\u4E66\u4FE1\u606F\uFF0C\u8D2D\u4E70\u7684\u4FE1\u606F\uFF0C\u8D2D\u4E70\u6570\u91CF\uFF0C\u5C0F\u8BA1\u91D1\u989D\uFF09
     * \u5B9E\u73B0\u6B65\u9AA4\uFF1A
     *   \u4E66\u7684\u552F\u4E00\u7F16\u53F7bookId\uFF0CMap\u96C6\u5408\u7684\u952E\uFF0C\u53D6\u51FAMap\u96C6\u5408\u7684\u503C \uFF08\u8D2D\u7269\u9879\u5BF9\u8C61\uFF09
     *   \u53D6\u51FA\u8D2D\u7269\u9879\u4E2D\u7684\u8D2D\u4E70\u6570\u91CF
     *   \u5224\u65AD\u8D2D\u4E70\u6570\u91CF\u662F 1 \uFF0CMap\u96C6\u5408\u4E2D\u79FB\u9664\u8BE5\u8D2D\u7269\u9879
     *   \u5224\u65AD\u8D2D\u4E70\u6570\u91CF\u662F&gt;1 ,\u8D2D\u7269\u9879\u7684\u8D2D\u4E70\u6570\u91CF-1
     *   \u4ECE\u65B0\u8BA1\u7B97\u8D2D\u7269\u8F66\u7684\u603B\u91D1\u989D
     *     \u8D2D\u7269\u8F66\u7684\u91D1\u989D = \u539F\u6709\u91D1\u989D - \u8D2D\u7269\u9879\u7684\u5355\u4EF7*\u6570\u91CF
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cartItemDecrease</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u4E66\u7684\u552F\u4E00\u7F16\u53F7bookId\uFF0CMap\u96C6\u5408\u7684\u952E\uFF0C\u53D6\u51FAMap\u96C6\u5408\u7684\u503C \uFF08\u8D2D\u7269\u9879\u5BF9\u8C61\uFF09</span>
        <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528\u8D2D\u7269\u9879\u5BF9\u8C61\u81EA\u5DF1\u7684\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u8D2D\u4E70\u6570\u91CF--</span>
        cartItem<span class="token punctuation">.</span><span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5224\u65AD\uFF0C\u8D2D\u7269\u9879\uFF0C--\u540E\uFF0C\u8D2D\u4E70\u6570\u91CF\u662F\u4E0D\u662F0</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u79FB\u9664\u8BE5\u8D2D\u7269\u9879</span>
            cartItemMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//\u8BA1\u7B97\u65B0\u7684\u603B\u4EF7\u683C -= \u539F\u6709\u8D2D\u7269\u9879\u7684\u91D1\u989D</span>
        totalCountBigDecimal <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>cartItem<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token comment">/* //\u53D6\u51FA\u8D2D\u7269\u9879\u4E2D\u7684\u8D2D\u4E70\u6570\u91CF
        Integer count = cartItem.getCount();
        //\u5224\u65AD\u6570\u91CF
        if (count == 1)
            //Map\u96C6\u5408\u4E2D\u79FB\u9664\u8BE5\u952E
            cartItemMap.remove(bookId);
        else {
            //\u8D2D\u4E70\u6570\u91CF-1
            cartItem.setCount( cartItem.getCount() - 1 );
        }
*/</span>
    <span class="token punctuation">}</span>


    <span class="token doc-comment comment">/**
     * \u5B9A\u4E49\u65B9\u6CD5\uFF0C\u5B9E\u73B0\u6DFB\u52A0\u8D2D\u7269\u8F66
     * \u4F20\u9012\u53C2\u6570\u8981\u6DFB\u52A0\u7684\u4E66\u5BF9\u8C61
     * \u6DFB\u52A0\u8FC7\u7A0B\uFF1A
     *   1\uFF1A \u5224\u65AD\u6DFB\u52A0\u7684\u5546\u54C1\uFF0C\u662F\u4E0D\u662F\u5DF2\u7ECF\u5728\u8D2D\u7269\u8F66\u4E2D\u4E86
     *   2\uFF1A \u8D2D\u7269\u8F66\u4E2D\u5B58\u5728\u76F8\u540C\u7684\u5546\u54C1\uFF0C\u4FEE\u6539\u539F\u6709\u8D2D\u4E70\u5546\u54C1\u7684\u6570\u91CF+1
     *   3\uFF1A \u8D2D\u7269\u8F66\u4E2D\u4E0D\u5B58\u5728\u76F8\u540C\u7684\u5546\u54C1\uFF0C\u76F4\u63A5\u521B\u5EFA\u8D2D\u7269\u9879\u5BF9\u8C61\uFF0C\u5B58\u50A8\u5728\u8D2D\u7269\u8F66\u4E2D
     *   4\uFF1A \u8BA1\u7B97\u603B\u4EF7\u683C
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCartItem</span><span class="token punctuation">(</span><span class="token class-name">Book</span> book<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 1\uFF1A \u5224\u65AD\u6DFB\u52A0\u7684\u5546\u54C1\uFF0C\u662F\u4E0D\u662F\u5DF2\u7ECF\u5728\u8D2D\u7269\u8F66\u4E2D\u4E86</span>
         <span class="token comment">//\u53D6\u51FA\u4E66\u7684id\u503C</span>
        <span class="token class-name">Integer</span> bookId <span class="token operator">=</span> book<span class="token punctuation">.</span><span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5224\u65AD\u8D2D\u7269\u8F66\u4E2D\u7684Map\u96C6\u5408\uFF0C\u662F\u5426\u5B58\u5728\u6B64\u952E</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cartItemMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\uFF0C\u6709\u91CD\u590D\u7684\u5546\u54C1\uFF0C\u53D6\u51FA\u8D2D\u7269\u9879</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u8D2D\u7269\u9879\u4E2D\u7684\u8D2D\u4E70\u6570\u91CF+1</span>
            <span class="token comment">//2\uFF1A \u8D2D\u7269\u8F66\u4E2D\u5B58\u5728\u76F8\u540C\u7684\u5546\u54C1\uFF0C\u4FEE\u6539\u539F\u6709\u8D2D\u4E70\u5546\u54C1\u7684\u6570\u91CF+1</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//\u8D2D\u7269\u9879\u96C6\u5408\uFF0C\u6CA1\u6709\u5728\u8D2D\u7269\u8F66\u4E2D\uFF0C\u521B\u5EFA\u8D2D\u7269\u9879\u5BF9\u8C61</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u8BBE\u7F6E\u8D2D\u7269\u9879\u7684\u6570\u636E</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setBookId</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4E66\u7684\u552F\u4E00\u7F16\u53F7</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setBookName</span><span class="token punctuation">(</span> book<span class="token punctuation">.</span><span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4E66\u540D</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setImgPath</span><span class="token punctuation">(</span> book<span class="token punctuation">.</span><span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u56FE\u7247\u8DEF\u5F84</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span> book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5355\u4EF7</span>
            cartItem<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8D2D\u4E70\u6570\u91CF=1</span>
            <span class="token comment">//\u8D2D\u7269\u9879\u5B58\u50A8Map\u96C6\u5408</span>
            <span class="token comment">//3\uFF1A \u8D2D\u7269\u8F66\u4E2D\u4E0D\u5B58\u5728\u76F8\u540C\u7684\u5546\u54C1\uFF0C\u76F4\u63A5\u521B\u5EFA\u8D2D\u7269\u9879\u5BF9\u8C61\uFF0C\u5B58\u50A8\u5728\u8D2D\u7269\u8F66\u4E2D</span>
            cartItemMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>bookId<span class="token punctuation">,</span>cartItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 4\uFF1A \u8BA1\u7B97\u603B\u4EF7\u683C\uFF0C \u603B\u4EF7\u683C=\u8981\u8D2D\u4E70\u7684\u5546\u54C1\u7684\u5C0F\u8BA1\u91D1\u989D</span>
        <span class="token comment">//\u6D6E\u70B9\u6570\u636E\uFF0C\u5728\u5185\u5B58\u4E0D\u7CBE\u786E\u6027</span>
        totalCountBigDecimal <span class="token operator">=</span>
                totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8BA1\u7B97\u540E\u7684\u6C42\u548C\uFF0C\u603B\u4EF7\u683C\uFF0C\u8D4B\u503C\u53D8\u91CFtotalAmount</span>
        totalAmount <span class="token operator">=</span> totalCountBigDecimal<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token doc-comment comment">/**
     *
     * \u8FD4\u56DE\u8D2D\u7269\u8F66\u4E2D\u5546\u54C1\u7684\u603B\u6570\u636E\u91CF
     * \u8FDB\u884C\u8BA1\u7B97\uFF0C\u8FD4\u56DE\u503C
     * \u76F8\u540C\u7684\u5546\u54C1\uFF0C\u7B971\u4E2A\uFF0C\u8FD8\u662F\u5355\u7B97
     * \u8D2D\u7269\u9879\u5BF9\u8C61Cart\uFF0C\u6DFB\u52A0\u8D2D\u7269\u8F66\uFF0C\u5C31\u662F\u8D2D\u7269\u9879\u5BF9\u8C61\uFF0C\u6DFB\u52A0\u5230\u8D2D\u7269\u8F66\u7684Map\u96C6\u5408
     * CartItem(\u8D2D\u7269\u9879)\uFF0C\u6DFB\u52A0\u5230Cart\u7684Map\u96C6\u5408
     *
     * \u76F8\u540C\u5546\u54C1\u7B97\u8BA11\u4E2A\uFF1A Map\u7684\u957F\u5EA6
     * \u76F8\u540C\u5546\u54C1\u5355\u72EC\u8BA1\u7B97\uFF1A Map\u96C6\u5408\u7684\u8D2D\u7269\u9879\uFF0C\u83B7\u53D6\u8D2D\u4E70\u6570\u91CF
     * totalCount 1
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5355\u72EC\u8BA1\u7B97</span>
        <span class="token comment">//\u904D\u5386Map\u96C6\u5408</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> key <span class="token operator">:</span> cartItemMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">CartItem</span> cartItem <span class="token operator">=</span> cartItemMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u83B7\u53D6\u8D2D\u7269\u9879\u4E2D\u7684\u8D2D\u4E70\u6570\u91CF</span>
            totalCount <span class="token operator">+=</span> cartItem<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> totalCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> totalCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalCount <span class="token operator">=</span> totalCount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> totalAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> totalAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        totalCountBigDecimal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>totalAmount <span class="token operator">=</span> totalAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCartItemMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">CartItem</span><span class="token punctuation">&gt;</span></span> cartItemMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cartItemMap <span class="token operator">=</span> cartItemMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Cart{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;totalCount=&quot;</span> <span class="token operator">+</span> totalCount <span class="token operator">+</span>
                <span class="token string">&quot;, totalAmount=&quot;</span> <span class="token operator">+</span> totalAmount <span class="token operator">+</span>
                <span class="token string">&quot;, cartItemMap=&quot;</span> <span class="token operator">+</span> cartItemMap <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-2-\u4FEE\u6539cartitem\u7C7B" tabindex="-1"><a class="header-anchor" href="#_10-2-\u4FEE\u6539cartitem\u7C7B" aria-hidden="true">#</a> 10.2.\u4FEE\u6539CartItem\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 *  \u8D2D\u7269\u9879\u5BF9\u8C61
 *  \u5305\u542B\uFF1A\u56FE\u4E66\u552F\u4E00ID\uFF0C\u4E66\u540D\uFF0C\u56FE\u7247\uFF0C\u5355\u4EF7\uFF0C\u8D2D\u4E70\u6570\u91CF\uFF0C\u5C0F\u8BA1\u91D1\u989D
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CartItem</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> bookId<span class="token punctuation">;</span><span class="token comment">//\u56FE\u4E66ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bookName<span class="token punctuation">;</span><span class="token comment">//\u56FE\u4E66\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">;</span><span class="token comment">//\u56FE\u7247\u8DEF\u5F84</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span><span class="token comment">//\u5355\u4EF7</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> count<span class="token punctuation">;</span><span class="token comment">//\u8D2D\u4E70\u6570\u91CF</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> amount<span class="token punctuation">;</span><span class="token comment">//\u5C0F\u8BA1\u91D1\u989D</span>

    <span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> amountBigDecimal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">CartItem</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">,</span> <span class="token class-name">String</span> bookName<span class="token punctuation">,</span> <span class="token class-name">String</span> imgPath<span class="token punctuation">,</span> <span class="token class-name">Double</span> price<span class="token punctuation">,</span> <span class="token class-name">Integer</span> count<span class="token punctuation">,</span> <span class="token class-name">Double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookId <span class="token operator">=</span> bookId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookName <span class="token operator">=</span> bookName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u8D2D\u4E70\u6570\u91CF++</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countIncrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D2D\u4E70\u6570\u91CF --</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">countDecrease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">--</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getBookId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> bookId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookId <span class="token operator">=</span> bookId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBookName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookName</span><span class="token punctuation">(</span><span class="token class-name">String</span> bookName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookName <span class="token operator">=</span> bookName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getImgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> imgPath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setImgPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> imgPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgPath <span class="token operator">=</span> imgPath<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token class-name">Double</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u5C0F\u8BA1\u91D1\u989D</span>
    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BigDecimal</span> bigDecimalCount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BigDecimal</span> bigDecimalPrice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> bigDecimalCount<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>bigDecimalPrice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;CartItem{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;bookId=&quot;</span> <span class="token operator">+</span> bookId <span class="token operator">+</span>
                <span class="token string">&quot;, bookName=&#39;&quot;</span> <span class="token operator">+</span> bookName <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, imgPath=&#39;&quot;</span> <span class="token operator">+</span> imgPath <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, price=&quot;</span> <span class="token operator">+</span> price <span class="token operator">+</span>
                <span class="token string">&quot;, count=&quot;</span> <span class="token operator">+</span> count <span class="token operator">+</span>
                <span class="token string">&quot;, amount=&quot;</span> <span class="token operator">+</span> amount <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,98),o=[e];function c(l,i){return s(),a("div",null,o)}var r=n(p,[["render",c],["__file","day12_\u4E66\u57CE\u9879\u76EE\u7B2C\u4E94\u9636\u6BB5.html.vue"]]);export{r as default};
